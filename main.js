/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var SS=Object.create;var ia=Object.defineProperty;var xS=Object.getOwnPropertyDescriptor;var _S=Object.getOwnPropertyNames;var ES=Object.getPrototypeOf,bS=Object.prototype.hasOwnProperty;var CS=(e,t,n)=>t in e?ia(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var de=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),IS=(e,t)=>{for(var n in t)ia(e,n,{get:t[n],enumerable:!0})},fh=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of _S(t))!bS.call(e,i)&&i!==n&&ia(e,i,{get:()=>t[i],enumerable:!(r=xS(t,i))||r.enumerable});return e};var ae=(e,t,n)=>(n=e!=null?SS(ES(e)):{},fh(t||!e||!e.__esModule?ia(n,"default",{value:e,enumerable:!0}):n,e)),TS=e=>fh(ia({},"__esModule",{value:!0}),e);var Al=(e,t,n)=>CS(e,typeof t!="symbol"?t+"":t,n);var bh=de(ge=>{"use strict";var oa=Symbol.for("react.element"),LS=Symbol.for("react.portal"),PS=Symbol.for("react.fragment"),AS=Symbol.for("react.strict_mode"),kS=Symbol.for("react.profiler"),DS=Symbol.for("react.provider"),MS=Symbol.for("react.context"),RS=Symbol.for("react.forward_ref"),OS=Symbol.for("react.suspense"),FS=Symbol.for("react.memo"),NS=Symbol.for("react.lazy"),ph=Symbol.iterator;function US(e){return e===null||typeof e!="object"?null:(e=ph&&e[ph]||e["@@iterator"],typeof e=="function"?e:null)}var gh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vh=Object.assign,yh={};function $i(e,t,n){this.props=e,this.context=t,this.refs=yh,this.updater=n||gh}$i.prototype.isReactComponent={};$i.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wh(){}wh.prototype=$i.prototype;function Lc(e,t,n){this.props=e,this.context=t,this.refs=yh,this.updater=n||gh}var Pc=Lc.prototype=new wh;Pc.constructor=Lc;vh(Pc,$i.prototype);Pc.isPureReactComponent=!0;var hh=Array.isArray,Sh=Object.prototype.hasOwnProperty,Ac={current:null},xh={key:!0,ref:!0,__self:!0,__source:!0};function _h(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Sh.call(t,r)&&!xh.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var s=Array(l),u=0;u<l;u++)s[u]=arguments[u+2];i.children=s}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:oa,type:e,key:o,ref:a,props:i,_owner:Ac.current}}function BS(e,t){return{$$typeof:oa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kc(e){return typeof e=="object"&&e!==null&&e.$$typeof===oa}function zS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var mh=/\/+/g;function Tc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zS(""+e.key):t.toString(36)}function Dl(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case oa:case LS:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Tc(a,0):r,hh(i)?(n="",e!=null&&(n=e.replace(mh,"$&/")+"/"),Dl(i,t,n,"",function(u){return u})):i!=null&&(kc(i)&&(i=BS(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(mh,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",hh(e))for(var l=0;l<e.length;l++){o=e[l];var s=r+Tc(o,l);a+=Dl(o,t,n,s,i)}else if(s=US(e),typeof s=="function")for(e=s.call(e),l=0;!(o=e.next()).done;)o=o.value,s=r+Tc(o,l++),a+=Dl(o,t,n,s,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function kl(e,t,n){if(e==null)return e;var r=[],i=0;return Dl(e,r,"","",function(o){return t.call(n,o,i++)}),r}function VS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var At={current:null},Ml={transition:null},HS={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Ml,ReactCurrentOwner:Ac};function Eh(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:kl,forEach:function(e,t,n){kl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return kl(e,function(){t++}),t},toArray:function(e){return kl(e,function(t){return t})||[]},only:function(e){if(!kc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=$i;ge.Fragment=PS;ge.Profiler=kS;ge.PureComponent=Lc;ge.StrictMode=AS;ge.Suspense=OS;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HS;ge.act=Eh;ge.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=vh({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Ac.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(s in t)Sh.call(t,s)&&!xh.hasOwnProperty(s)&&(r[s]=t[s]===void 0&&l!==void 0?l[s]:t[s])}var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){l=Array(s);for(var u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:oa,type:e.type,key:i,ref:o,props:r,_owner:a}};ge.createContext=function(e){return e={$$typeof:MS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:DS,_context:e},e.Consumer=e};ge.createElement=_h;ge.createFactory=function(e){var t=_h.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:RS,render:e}};ge.isValidElement=kc;ge.lazy=function(e){return{$$typeof:NS,_payload:{_status:-1,_result:e},_init:VS}};ge.memo=function(e,t){return{$$typeof:FS,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=Ml.transition;Ml.transition={};try{e()}finally{Ml.transition=t}};ge.unstable_act=Eh;ge.useCallback=function(e,t){return At.current.useCallback(e,t)};ge.useContext=function(e){return At.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return At.current.useDeferredValue(e)};ge.useEffect=function(e,t){return At.current.useEffect(e,t)};ge.useId=function(){return At.current.useId()};ge.useImperativeHandle=function(e,t,n){return At.current.useImperativeHandle(e,t,n)};ge.useInsertionEffect=function(e,t){return At.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return At.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return At.current.useMemo(e,t)};ge.useReducer=function(e,t,n){return At.current.useReducer(e,t,n)};ge.useRef=function(e){return At.current.useRef(e)};ge.useState=function(e){return At.current.useState(e)};ge.useSyncExternalStore=function(e,t,n){return At.current.useSyncExternalStore(e,t,n)};ge.useTransition=function(){return At.current.useTransition()};ge.version="18.3.1"});var ft=de((QI,Ch)=>{"use strict";Ch.exports=bh()});var Oh=de(Fe=>{"use strict";function Oc(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(0<Rl(i,t))e[r]=t,e[n]=i,n=r;else break e}}function _n(e){return e.length===0?null:e[0]}function Fl(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],s=a+1,u=e[s];if(0>Rl(l,n))s<i&&0>Rl(u,l)?(e[r]=u,e[s]=n,r=s):(e[r]=l,e[a]=n,r=a);else if(s<i&&0>Rl(u,n))e[r]=u,e[s]=n,r=s;else break e}}return t}function Rl(e,t){var n=e.sortIndex-t.sortIndex;return n!==0?n:e.id-t.id}typeof performance=="object"&&typeof performance.now=="function"?(Ih=performance,Fe.unstable_now=function(){return Ih.now()}):(Dc=Date,Th=Dc.now(),Fe.unstable_now=function(){return Dc.now()-Th});var Ih,Dc,Th,On=[],Cr=[],GS=1,un=null,_t=3,Nl=!1,di=!1,la=!1,Ah=typeof setTimeout=="function"?setTimeout:null,kh=typeof clearTimeout=="function"?clearTimeout:null,Lh=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Fc(e){for(var t=_n(Cr);t!==null;){if(t.callback===null)Fl(Cr);else if(t.startTime<=e)Fl(Cr),t.sortIndex=t.expirationTime,Oc(On,t);else break;t=_n(Cr)}}function Nc(e){if(la=!1,Fc(e),!di)if(_n(On)!==null)di=!0,Bc(Uc);else{var t=_n(Cr);t!==null&&zc(Nc,t.startTime-e)}}function Uc(e,t){di=!1,la&&(la=!1,kh(sa),sa=-1),Nl=!0;var n=_t;try{for(Fc(t),un=_n(On);un!==null&&(!(un.expirationTime>t)||e&&!Rh());){var r=un.callback;if(typeof r=="function"){un.callback=null,_t=un.priorityLevel;var i=r(un.expirationTime<=t);t=Fe.unstable_now(),typeof i=="function"?un.callback=i:un===_n(On)&&Fl(On),Fc(t)}else Fl(On);un=_n(On)}if(un!==null)var o=!0;else{var a=_n(Cr);a!==null&&zc(Nc,a.startTime-t),o=!1}return o}finally{un=null,_t=n,Nl=!1}}var Ul=!1,Ol=null,sa=-1,Dh=5,Mh=-1;function Rh(){return!(Fe.unstable_now()-Mh<Dh)}function Mc(){if(Ol!==null){var e=Fe.unstable_now();Mh=e;var t=!0;try{t=Ol(!0,e)}finally{t?aa():(Ul=!1,Ol=null)}}else Ul=!1}var aa;typeof Lh=="function"?aa=function(){Lh(Mc)}:typeof MessageChannel!="undefined"?(Rc=new MessageChannel,Ph=Rc.port2,Rc.port1.onmessage=Mc,aa=function(){Ph.postMessage(null)}):aa=function(){Ah(Mc,0)};var Rc,Ph;function Bc(e){Ol=e,Ul||(Ul=!0,aa())}function zc(e,t){sa=Ah(function(){e(Fe.unstable_now())},t)}Fe.unstable_IdlePriority=5;Fe.unstable_ImmediatePriority=1;Fe.unstable_LowPriority=4;Fe.unstable_NormalPriority=3;Fe.unstable_Profiling=null;Fe.unstable_UserBlockingPriority=2;Fe.unstable_cancelCallback=function(e){e.callback=null};Fe.unstable_continueExecution=function(){di||Nl||(di=!0,Bc(Uc))};Fe.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Dh=0<e?Math.floor(1e3/e):5};Fe.unstable_getCurrentPriorityLevel=function(){return _t};Fe.unstable_getFirstCallbackNode=function(){return _n(On)};Fe.unstable_next=function(e){switch(_t){case 1:case 2:case 3:var t=3;break;default:t=_t}var n=_t;_t=t;try{return e()}finally{_t=n}};Fe.unstable_pauseExecution=function(){};Fe.unstable_requestPaint=function(){};Fe.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=_t;_t=e;try{return t()}finally{_t=n}};Fe.unstable_scheduleCallback=function(e,t,n){var r=Fe.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?r+n:r):n=r,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return i=n+i,e={id:GS++,callback:t,priorityLevel:e,startTime:n,expirationTime:i,sortIndex:-1},n>r?(e.sortIndex=n,Oc(Cr,e),_n(On)===null&&e===_n(Cr)&&(la?(kh(sa),sa=-1):la=!0,zc(Nc,n-r))):(e.sortIndex=i,Oc(On,e),di||Nl||(di=!0,Bc(Uc))),e};Fe.unstable_shouldYield=Rh;Fe.unstable_wrapCallback=function(e){var t=_t;return function(){var n=_t;_t=t;try{return e.apply(this,arguments)}finally{_t=n}}}});var Nh=de((eT,Fh)=>{"use strict";Fh.exports=Oh()});var Vv=de(Qt=>{"use strict";var WS=ft(),Kt=Nh();function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wm=new Set,Aa={};function bi(e,t){ho(e,t),ho(e+"Capture",t)}function ho(e,t){for(Aa[e]=t,e=0;e<t.length;e++)Wm.add(t[e])}var lr=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ud=Object.prototype.hasOwnProperty,jS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uh={},Bh={};function $S(e){return ud.call(Bh,e)?!0:ud.call(Uh,e)?!1:jS.test(e)?Bh[e]=!0:(Uh[e]=!0,!1)}function YS(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XS(e,t,n,r){if(t===null||typeof t=="undefined"||YS(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mt(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yt[e]=new Mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yt[t]=new Mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yt[e]=new Mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yt[e]=new Mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yt[e]=new Mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yt[e]=new Mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yt[e]=new Mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yt[e]=new Mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yt[e]=new Mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var tf=/[\-:]([a-z])/g;function nf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tf,nf);yt[t]=new Mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tf,nf);yt[t]=new Mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tf,nf);yt[t]=new Mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yt[e]=new Mt(e,1,!1,e.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yt[e]=new Mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function rf(e,t,n,r){var i=yt.hasOwnProperty(t)?yt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XS(t,n,i,r)&&(n=null),r||i===null?$S(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var dr=WS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bl=Symbol.for("react.element"),Zi=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),of=Symbol.for("react.strict_mode"),cd=Symbol.for("react.profiler"),jm=Symbol.for("react.provider"),$m=Symbol.for("react.context"),af=Symbol.for("react.forward_ref"),dd=Symbol.for("react.suspense"),fd=Symbol.for("react.suspense_list"),lf=Symbol.for("react.memo"),Tr=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var Ym=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var zh=Symbol.iterator;function ua(e){return e===null||typeof e!="object"?null:(e=zh&&e[zh]||e["@@iterator"],typeof e=="function"?e:null)}var Ke=Object.assign,Vc;function va(e){if(Vc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vc=t&&t[1]||""}return`
`+Vc+e}var Hc=!1;function Gc(e,t){if(!e||Hc)return"";Hc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,l=o.length-1;1<=a&&0<=l&&i[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==o[l]){var s=`
`+i[a].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}while(1<=a&&0<=l);break}}}finally{Hc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?va(e):""}function ZS(e){switch(e.tag){case 5:return va(e.type);case 16:return va("Lazy");case 13:return va("Suspense");case 19:return va("SuspenseList");case 0:case 2:case 15:return e=Gc(e.type,!1),e;case 11:return e=Gc(e.type.render,!1),e;case 1:return e=Gc(e.type,!0),e;default:return""}}function pd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ki:return"Fragment";case Zi:return"Portal";case cd:return"Profiler";case of:return"StrictMode";case dd:return"Suspense";case fd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $m:return(e.displayName||"Context")+".Consumer";case jm:return(e._context.displayName||"Context")+".Provider";case af:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lf:return t=e.displayName||null,t!==null?t:pd(e.type)||"Memo";case Tr:t=e._payload,e=e._init;try{return pd(e(t))}catch(n){}}return null}function KS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pd(t);case 8:return t===of?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qS(e){var t=Xm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zl(e){e._valueTracker||(e._valueTracker=qS(e))}function Zm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Xm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hs(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function hd(e,t){var n=t.checked;return Ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function Vh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Vr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Km(e,t){t=t.checked,t!=null&&rf(e,"checked",t,!1)}function md(e,t){Km(e,t);var n=Vr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gd(e,t.type,n):t.hasOwnProperty("defaultValue")&&gd(e,t.type,Vr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function gd(e,t,n){(t!=="number"||hs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ya=Array.isArray;function lo(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Vr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function vd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return Ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(V(92));if(ya(n)){if(1<n.length)throw Error(V(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Vr(n)}}function qm(e,t){var n=Vr(t.value),r=Vr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Wh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vl,Jm=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vl=Vl||document.createElement("div"),Vl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ka(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QS=["Webkit","ms","Moz","O"];Object.keys(xa).forEach(function(e){QS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xa[t]=xa[e]})});function eg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||xa.hasOwnProperty(e)&&xa[e]?(""+t).trim():t+"px"}function tg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=eg(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var JS=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wd(e,t){if(t){if(JS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function Sd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xd=null;function sf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _d=null,so=null,uo=null;function jh(e){if(e=Za(e)){if(typeof _d!="function")throw Error(V(280));var t=e.stateNode;t&&(t=Hs(t),_d(e.stateNode,e.type,t))}}function ng(e){so?uo?uo.push(e):uo=[e]:so=e}function rg(){if(so){var e=so,t=uo;if(uo=so=null,jh(e),t)for(e=0;e<t.length;e++)jh(t[e])}}function ig(e,t){return e(t)}function og(){}var Wc=!1;function ag(e,t,n){if(Wc)return e(t,n);Wc=!0;try{return ig(e,t,n)}finally{Wc=!1,(so!==null||uo!==null)&&(og(),rg())}}function Da(e,t){var n=e.stateNode;if(n===null)return null;var r=Hs(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(V(231,t,typeof n));return n}var Ed=!1;if(lr)try{Yi={},Object.defineProperty(Yi,"passive",{get:function(){Ed=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch(e){Ed=!1}var Yi;function ex(e,t,n,r,i,o,a,l,s){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var _a=!1,ms=null,gs=!1,bd=null,tx={onError:function(e){_a=!0,ms=e}};function nx(e,t,n,r,i,o,a,l,s){_a=!1,ms=null,ex.apply(tx,arguments)}function rx(e,t,n,r,i,o,a,l,s){if(nx.apply(this,arguments),_a){if(_a){var u=ms;_a=!1,ms=null}else throw Error(V(198));gs||(gs=!0,bd=u)}}function Ci(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function lg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $h(e){if(Ci(e)!==e)throw Error(V(188))}function ix(e){var t=e.alternate;if(!t){if(t=Ci(e),t===null)throw Error(V(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $h(i),e;if(o===r)return $h(i),t;o=o.sibling}throw Error(V(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(V(189))}}if(n.alternate!==r)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?e:t}function sg(e){return e=ix(e),e!==null?ug(e):null}function ug(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ug(e);if(t!==null)return t;e=e.sibling}return null}var cg=Kt.unstable_scheduleCallback,Yh=Kt.unstable_cancelCallback,ox=Kt.unstable_shouldYield,ax=Kt.unstable_requestPaint,et=Kt.unstable_now,lx=Kt.unstable_getCurrentPriorityLevel,uf=Kt.unstable_ImmediatePriority,dg=Kt.unstable_UserBlockingPriority,vs=Kt.unstable_NormalPriority,sx=Kt.unstable_LowPriority,fg=Kt.unstable_IdlePriority,Us=null,Bn=null;function ux(e){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Us,e,void 0,(e.current.flags&128)===128)}catch(t){}}var Tn=Math.clz32?Math.clz32:fx,cx=Math.log,dx=Math.LN2;function fx(e){return e>>>=0,e===0?32:31-(cx(e)/dx|0)|0}var Hl=64,Gl=4194304;function wa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ys(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=wa(l):(o&=a,o!==0&&(r=wa(o)))}else a=n&~i,a!==0?r=wa(a):o!==0&&(r=wa(o));if(r===0)return 0;if(t!==0&&t!==r&&(t&i)===0&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Tn(t),i=1<<n,r|=e[n],t&=~i;return r}function px(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hx(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Tn(o),l=1<<a,s=i[a];s===-1?((l&n)===0||(l&r)!==0)&&(i[a]=px(l,t)):s<=t&&(e.expiredLanes|=l),o&=~l}}function Cd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pg(){var e=Hl;return Hl<<=1,(Hl&4194240)===0&&(Hl=64),e}function jc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ya(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tn(t),e[t]=n}function mx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Tn(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function cf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Tn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ae=0;function hg(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var mg,df,gg,vg,yg,Id=!1,Wl=[],Mr=null,Rr=null,Or=null,Ma=new Map,Ra=new Map,Pr=[],gx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xh(e,t){switch(e){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":Ma.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ra.delete(t.pointerId)}}function ca(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Za(t),t!==null&&df(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function vx(e,t,n,r,i){switch(t){case"focusin":return Mr=ca(Mr,e,t,n,r,i),!0;case"dragenter":return Rr=ca(Rr,e,t,n,r,i),!0;case"mouseover":return Or=ca(Or,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ma.set(o,ca(Ma.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ra.set(o,ca(Ra.get(o)||null,e,t,n,r,i)),!0}return!1}function wg(e){var t=hi(e.target);if(t!==null){var n=Ci(t);if(n!==null){if(t=n.tag,t===13){if(t=lg(n),t!==null){e.blockedOn=t,yg(e.priority,function(){gg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function is(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Td(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);xd=r,n.target.dispatchEvent(r),xd=null}else return t=Za(n),t!==null&&df(t),e.blockedOn=n,!1;t.shift()}return!0}function Zh(e,t,n){is(e)&&n.delete(t)}function yx(){Id=!1,Mr!==null&&is(Mr)&&(Mr=null),Rr!==null&&is(Rr)&&(Rr=null),Or!==null&&is(Or)&&(Or=null),Ma.forEach(Zh),Ra.forEach(Zh)}function da(e,t){e.blockedOn===t&&(e.blockedOn=null,Id||(Id=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,yx)))}function Oa(e){function t(i){return da(i,e)}if(0<Wl.length){da(Wl[0],e);for(var n=1;n<Wl.length;n++){var r=Wl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Mr!==null&&da(Mr,e),Rr!==null&&da(Rr,e),Or!==null&&da(Or,e),Ma.forEach(t),Ra.forEach(t),n=0;n<Pr.length;n++)r=Pr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pr.length&&(n=Pr[0],n.blockedOn===null);)wg(n),n.blockedOn===null&&Pr.shift()}var co=dr.ReactCurrentBatchConfig,ws=!0;function wx(e,t,n,r){var i=Ae,o=co.transition;co.transition=null;try{Ae=1,ff(e,t,n,r)}finally{Ae=i,co.transition=o}}function Sx(e,t,n,r){var i=Ae,o=co.transition;co.transition=null;try{Ae=4,ff(e,t,n,r)}finally{Ae=i,co.transition=o}}function ff(e,t,n,r){if(ws){var i=Td(e,t,n,r);if(i===null)Qc(e,t,r,Ss,n),Xh(e,r);else if(vx(i,e,t,n,r))r.stopPropagation();else if(Xh(e,r),t&4&&-1<gx.indexOf(e)){for(;i!==null;){var o=Za(i);if(o!==null&&mg(o),o=Td(e,t,n,r),o===null&&Qc(e,t,r,Ss,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Qc(e,t,r,null,n)}}var Ss=null;function Td(e,t,n,r){if(Ss=null,e=sf(r),e=hi(e),e!==null)if(t=Ci(e),t===null)e=null;else if(n=t.tag,n===13){if(e=lg(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ss=e,null}function Sg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lx()){case uf:return 1;case dg:return 4;case vs:case sx:return 16;case fg:return 536870912;default:return 16}default:return 16}}var kr=null,pf=null,os=null;function xg(){if(os)return os;var e,t=pf,n=t.length,r,i="value"in kr?kr.value:kr.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return os=i.slice(e,1<r?1-r:void 0)}function as(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jl(){return!0}function Kh(){return!1}function qt(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?jl:Kh,this.isPropagationStopped=Kh,this}return Ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),t}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=qt(xo),Xa=Ke({},xo,{view:0,detail:0}),xx=qt(Xa),$c,Yc,fa,Bs=Ke({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fa&&(fa&&e.type==="mousemove"?($c=e.screenX-fa.screenX,Yc=e.screenY-fa.screenY):Yc=$c=0,fa=e),$c)},movementY:function(e){return"movementY"in e?e.movementY:Yc}}),qh=qt(Bs),_x=Ke({},Bs,{dataTransfer:0}),Ex=qt(_x),bx=Ke({},Xa,{relatedTarget:0}),Xc=qt(bx),Cx=Ke({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ix=qt(Cx),Tx=Ke({},xo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lx=qt(Tx),Px=Ke({},xo,{data:0}),Qh=qt(Px),Ax={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dx[e])?!!t[e]:!1}function mf(){return Mx}var Rx=Ke({},Xa,{key:function(e){if(e.key){var t=Ax[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=as(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mf,charCode:function(e){return e.type==="keypress"?as(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?as(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ox=qt(Rx),Fx=Ke({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jh=qt(Fx),Nx=Ke({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mf}),Ux=qt(Nx),Bx=Ke({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),zx=qt(Bx),Vx=Ke({},Bs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hx=qt(Vx),Gx=[9,13,27,32],gf=lr&&"CompositionEvent"in window,Ea=null;lr&&"documentMode"in document&&(Ea=document.documentMode);var Wx=lr&&"TextEvent"in window&&!Ea,_g=lr&&(!gf||Ea&&8<Ea&&11>=Ea),em=" ",tm=!1;function Eg(e,t){switch(e){case"keyup":return Gx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qi=!1;function jx(e,t){switch(e){case"compositionend":return bg(t);case"keypress":return t.which!==32?null:(tm=!0,em);case"textInput":return e=t.data,e===em&&tm?null:e;default:return null}}function $x(e,t){if(qi)return e==="compositionend"||!gf&&Eg(e,t)?(e=xg(),os=pf=kr=null,qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _g&&t.locale!=="ko"?null:t.data;default:return null}}var Yx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Yx[e.type]:t==="textarea"}function Cg(e,t,n,r){ng(r),t=xs(t,"onChange"),0<t.length&&(n=new hf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ba=null,Fa=null;function Xx(e){Fg(e,0)}function zs(e){var t=eo(e);if(Zm(t))return e}function Zx(e,t){if(e==="change")return t}var Ig=!1;lr&&(lr?(Yl="oninput"in document,Yl||(Zc=document.createElement("div"),Zc.setAttribute("oninput","return;"),Yl=typeof Zc.oninput=="function"),$l=Yl):$l=!1,Ig=$l&&(!document.documentMode||9<document.documentMode));var $l,Yl,Zc;function rm(){ba&&(ba.detachEvent("onpropertychange",Tg),Fa=ba=null)}function Tg(e){if(e.propertyName==="value"&&zs(Fa)){var t=[];Cg(t,Fa,e,sf(e)),ag(Xx,t)}}function Kx(e,t,n){e==="focusin"?(rm(),ba=t,Fa=n,ba.attachEvent("onpropertychange",Tg)):e==="focusout"&&rm()}function qx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zs(Fa)}function Qx(e,t){if(e==="click")return zs(t)}function Jx(e,t){if(e==="input"||e==="change")return zs(t)}function e_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pn=typeof Object.is=="function"?Object.is:e_;function Na(e,t){if(Pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ud.call(t,i)||!Pn(e[i],t[i]))return!1}return!0}function im(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function om(e,t){var n=im(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=im(n)}}function Lg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Lg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pg(){for(var e=window,t=hs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(r){n=!1}if(n)e=t.contentWindow;else break;t=hs(e.document)}return t}function vf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function t_(e){var t=Pg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Lg(n.ownerDocument.documentElement,n)){if(r!==null&&vf(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=om(n,o);var a=om(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var n_=lr&&"documentMode"in document&&11>=document.documentMode,Qi=null,Ld=null,Ca=null,Pd=!1;function am(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pd||Qi==null||Qi!==hs(r)||(r=Qi,"selectionStart"in r&&vf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ca&&Na(Ca,r)||(Ca=r,r=xs(Ld,"onSelect"),0<r.length&&(t=new hf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Qi)))}function Xl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ji={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},Kc={},Ag={};lr&&(Ag=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function Vs(e){if(Kc[e])return Kc[e];if(!Ji[e])return e;var t=Ji[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ag)return Kc[e]=t[n];return e}var kg=Vs("animationend"),Dg=Vs("animationiteration"),Mg=Vs("animationstart"),Rg=Vs("transitionend"),Og=new Map,lm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(e,t){Og.set(e,t),bi(t,[e])}for(Zl=0;Zl<lm.length;Zl++)Kl=lm[Zl],sm=Kl.toLowerCase(),um=Kl[0].toUpperCase()+Kl.slice(1),Gr(sm,"on"+um);var Kl,sm,um,Zl;Gr(kg,"onAnimationEnd");Gr(Dg,"onAnimationIteration");Gr(Mg,"onAnimationStart");Gr("dblclick","onDoubleClick");Gr("focusin","onFocus");Gr("focusout","onBlur");Gr(Rg,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sa));function cm(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,rx(r,t,void 0,e),e.currentTarget=null}function Fg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],s=l.instance,u=l.currentTarget;if(l=l.listener,s!==o&&i.isPropagationStopped())break e;cm(i,l,u),o=s}else for(a=0;a<r.length;a++){if(l=r[a],s=l.instance,u=l.currentTarget,l=l.listener,s!==o&&i.isPropagationStopped())break e;cm(i,l,u),o=s}}}if(gs)throw e=bd,gs=!1,bd=null,e}function Ve(e,t){var n=t[Rd];n===void 0&&(n=t[Rd]=new Set);var r=e+"__bubble";n.has(r)||(Ng(t,e,2,!1),n.add(r))}function qc(e,t,n){var r=0;t&&(r|=4),Ng(n,e,r,t)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Ua(e){if(!e[ql]){e[ql]=!0,Wm.forEach(function(n){n!=="selectionchange"&&(r_.has(n)||qc(n,!1,e),qc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ql]||(t[ql]=!0,qc("selectionchange",!1,t))}}function Ng(e,t,n,r){switch(Sg(t)){case 1:var i=wx;break;case 4:i=Sx;break;default:i=ff}n=i.bind(null,t,n,e),i=void 0,!Ed||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Qc(e,t,n,r,i){var o=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var s=a.tag;if((s===3||s===4)&&(s=a.stateNode.containerInfo,s===i||s.nodeType===8&&s.parentNode===i))return;a=a.return}for(;l!==null;){if(a=hi(l),a===null)return;if(s=a.tag,s===5||s===6){r=o=a;continue e}l=l.parentNode}}r=r.return}ag(function(){var u=o,c=sf(n),p=[];e:{var d=Og.get(e);if(d!==void 0){var g=hf,y=e;switch(e){case"keypress":if(as(n)===0)break e;case"keydown":case"keyup":g=Ox;break;case"focusin":y="focus",g=Xc;break;case"focusout":y="blur",g=Xc;break;case"beforeblur":case"afterblur":g=Xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=qh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Ex;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ux;break;case kg:case Dg:case Mg:g=Ix;break;case Rg:g=zx;break;case"scroll":g=xx;break;case"wheel":g=Hx;break;case"copy":case"cut":case"paste":g=Lx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Jh}var v=(t&4)!==0,S=!v&&e==="scroll",m=v?d!==null?d+"Capture":null:d;v=[];for(var f=u,h;f!==null;){h=f;var w=h.stateNode;if(h.tag===5&&w!==null&&(h=w,m!==null&&(w=Da(f,m),w!=null&&v.push(Ba(f,w,h)))),S)break;f=f.return}0<v.length&&(d=new g(d,y,null,n,c),p.push({event:d,listeners:v}))}}if((t&7)===0){e:{if(d=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",d&&n!==xd&&(y=n.relatedTarget||n.fromElement)&&(hi(y)||y[sr]))break e;if((g||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?hi(y):null,y!==null&&(S=Ci(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(v=qh,w="onMouseLeave",m="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(v=Jh,w="onPointerLeave",m="onPointerEnter",f="pointer"),S=g==null?d:eo(g),h=y==null?d:eo(y),d=new v(w,f+"leave",g,n,c),d.target=S,d.relatedTarget=h,w=null,hi(c)===u&&(v=new v(m,f+"enter",y,n,c),v.target=h,v.relatedTarget=S,w=v),S=w,g&&y)t:{for(v=g,m=y,f=0,h=v;h;h=Xi(h))f++;for(h=0,w=m;w;w=Xi(w))h++;for(;0<f-h;)v=Xi(v),f--;for(;0<h-f;)m=Xi(m),h--;for(;f--;){if(v===m||m!==null&&v===m.alternate)break t;v=Xi(v),m=Xi(m)}v=null}else v=null;g!==null&&dm(p,d,g,v,!1),y!==null&&S!==null&&dm(p,S,y,v,!0)}}e:{if(d=u?eo(u):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var I=Zx;else if(nm(d))if(Ig)I=Jx;else{I=qx;var T=Kx}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(I=Qx);if(I&&(I=I(e,u))){Cg(p,I,n,c);break e}T&&T(e,d,u),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&gd(d,"number",d.value)}switch(T=u?eo(u):window,e){case"focusin":(nm(T)||T.contentEditable==="true")&&(Qi=T,Ld=u,Ca=null);break;case"focusout":Ca=Ld=Qi=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,am(p,n,c);break;case"selectionchange":if(n_)break;case"keydown":case"keyup":am(p,n,c)}var L;if(gf)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else qi?Eg(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(_g&&n.locale!=="ko"&&(qi||A!=="onCompositionStart"?A==="onCompositionEnd"&&qi&&(L=xg()):(kr=c,pf="value"in kr?kr.value:kr.textContent,qi=!0)),T=xs(u,A),0<T.length&&(A=new Qh(A,e,null,n,c),p.push({event:A,listeners:T}),L?A.data=L:(L=bg(n),L!==null&&(A.data=L)))),(L=Wx?jx(e,n):$x(e,n))&&(u=xs(u,"onBeforeInput"),0<u.length&&(c=new Qh("onBeforeInput","beforeinput",null,n,c),p.push({event:c,listeners:u}),c.data=L))}Fg(p,t)})}function Ba(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xs(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Da(e,n),o!=null&&r.unshift(Ba(e,o,i)),o=Da(e,t),o!=null&&r.push(Ba(e,o,i))),e=e.return}return r}function Xi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dm(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,s=l.alternate,u=l.stateNode;if(s!==null&&s===r)break;l.tag===5&&u!==null&&(l=u,i?(s=Da(n,o),s!=null&&a.unshift(Ba(n,s,l))):i||(s=Da(n,o),s!=null&&a.push(Ba(n,s,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var i_=/\r\n?/g,o_=/\u0000|\uFFFD/g;function fm(e){return(typeof e=="string"?e:""+e).replace(i_,`
`).replace(o_,"")}function Ql(e,t,n){if(t=fm(t),fm(e)!==t&&n)throw Error(V(425))}function _s(){}var Ad=null,kd=null;function Dd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Md=typeof setTimeout=="function"?setTimeout:void 0,a_=typeof clearTimeout=="function"?clearTimeout:void 0,pm=typeof Promise=="function"?Promise:void 0,l_=typeof queueMicrotask=="function"?queueMicrotask:typeof pm!="undefined"?function(e){return pm.resolve(null).then(e).catch(s_)}:Md;function s_(e){setTimeout(function(){throw e})}function Jc(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Oa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Oa(t)}function Fr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var _o=Math.random().toString(36).slice(2),Un="__reactFiber$"+_o,za="__reactProps$"+_o,sr="__reactContainer$"+_o,Rd="__reactEvents$"+_o,u_="__reactListeners$"+_o,c_="__reactHandles$"+_o;function hi(e){var t=e[Un];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sr]||n[Un]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hm(e);e!==null;){if(n=e[Un])return n;e=hm(e)}return t}e=n,n=e.parentNode}return null}function Za(e){return e=e[Un]||e[sr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function eo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function Hs(e){return e[za]||null}var Od=[],to=-1;function Wr(e){return{current:e}}function He(e){0>to||(e.current=Od[to],Od[to]=null,to--)}function Ne(e,t){to++,Od[to]=e.current,e.current=t}var Hr={},It=Wr(Hr),Vt=Wr(!1),wi=Hr;function mo(e,t){var n=e.type.contextTypes;if(!n)return Hr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ht(e){return e=e.childContextTypes,e!=null}function Es(){He(Vt),He(It)}function mm(e,t,n){if(It.current!==Hr)throw Error(V(168));Ne(It,t),Ne(Vt,n)}function Ug(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(V(108,KS(e)||"Unknown",i));return Ke({},n,r)}function bs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hr,wi=It.current,Ne(It,e),Ne(Vt,Vt.current),!0}function gm(e,t,n){var r=e.stateNode;if(!r)throw Error(V(169));n?(e=Ug(e,t,wi),r.__reactInternalMemoizedMergedChildContext=e,He(Vt),He(It),Ne(It,e)):He(Vt),Ne(Vt,n)}var rr=null,Gs=!1,ed=!1;function Bg(e){rr===null?rr=[e]:rr.push(e)}function d_(e){Gs=!0,Bg(e)}function jr(){if(!ed&&rr!==null){ed=!0;var e=0,t=Ae;try{var n=rr;for(Ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rr=null,Gs=!1}catch(i){throw rr!==null&&(rr=rr.slice(e+1)),cg(uf,jr),i}finally{Ae=t,ed=!1}}return null}var no=[],ro=0,Cs=null,Is=0,cn=[],dn=0,Si=null,ir=1,or="";function fi(e,t){no[ro++]=Is,no[ro++]=Cs,Cs=e,Is=t}function zg(e,t,n){cn[dn++]=ir,cn[dn++]=or,cn[dn++]=Si,Si=e;var r=ir;e=or;var i=32-Tn(r)-1;r&=~(1<<i),n+=1;var o=32-Tn(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ir=1<<32-Tn(t)+i|n<<i|r,or=o+e}else ir=1<<o|n<<i|r,or=e}function yf(e){e.return!==null&&(fi(e,1),zg(e,1,0))}function wf(e){for(;e===Cs;)Cs=no[--ro],no[ro]=null,Is=no[--ro],no[ro]=null;for(;e===Si;)Si=cn[--dn],cn[dn]=null,or=cn[--dn],cn[dn]=null,ir=cn[--dn],cn[dn]=null}var Zt=null,Xt=null,$e=!1,In=null;function Vg(e,t){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function vm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zt=e,Xt=Fr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zt=e,Xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Si!==null?{id:ir,overflow:or}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Zt=e,Xt=null,!0):!1;default:return!1}}function Fd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Nd(e){if($e){var t=Xt;if(t){var n=t;if(!vm(e,t)){if(Fd(e))throw Error(V(418));t=Fr(n.nextSibling);var r=Zt;t&&vm(e,t)?Vg(r,n):(e.flags=e.flags&-4097|2,$e=!1,Zt=e)}}else{if(Fd(e))throw Error(V(418));e.flags=e.flags&-4097|2,$e=!1,Zt=e}}}function ym(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zt=e}function Jl(e){if(e!==Zt)return!1;if(!$e)return ym(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Dd(e.type,e.memoizedProps)),t&&(t=Xt)){if(Fd(e))throw Hg(),Error(V(418));for(;t;)Vg(e,t),t=Fr(t.nextSibling)}if(ym(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Xt=Fr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Xt=null}}else Xt=Zt?Fr(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=Xt;e;)e=Fr(e.nextSibling)}function go(){Xt=Zt=null,$e=!1}function Sf(e){In===null?In=[e]:In.push(e)}var f_=dr.ReactCurrentBatchConfig;function pa(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var r=n.stateNode}if(!r)throw Error(V(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=i.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,e))}return e}function es(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wm(e){var t=e._init;return t(e._payload)}function Gg(e){function t(m,f){if(e){var h=m.deletions;h===null?(m.deletions=[f],m.flags|=16):h.push(f)}}function n(m,f){if(!e)return null;for(;f!==null;)t(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function i(m,f){return m=zr(m,f),m.index=0,m.sibling=null,m}function o(m,f,h){return m.index=h,e?(h=m.alternate,h!==null?(h=h.index,h<f?(m.flags|=2,f):h):(m.flags|=2,f)):(m.flags|=1048576,f)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,f,h,w){return f===null||f.tag!==6?(f=ld(h,m.mode,w),f.return=m,f):(f=i(f,h),f.return=m,f)}function s(m,f,h,w){var I=h.type;return I===Ki?c(m,f,h.props.children,w,h.key):f!==null&&(f.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Tr&&wm(I)===f.type)?(w=i(f,h.props),w.ref=pa(m,f,h),w.return=m,w):(w=ps(h.type,h.key,h.props,null,m.mode,w),w.ref=pa(m,f,h),w.return=m,w)}function u(m,f,h,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==h.containerInfo||f.stateNode.implementation!==h.implementation?(f=sd(h,m.mode,w),f.return=m,f):(f=i(f,h.children||[]),f.return=m,f)}function c(m,f,h,w,I){return f===null||f.tag!==7?(f=yi(h,m.mode,w,I),f.return=m,f):(f=i(f,h),f.return=m,f)}function p(m,f,h){if(typeof f=="string"&&f!==""||typeof f=="number")return f=ld(""+f,m.mode,h),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Bl:return h=ps(f.type,f.key,f.props,null,m.mode,h),h.ref=pa(m,null,f),h.return=m,h;case Zi:return f=sd(f,m.mode,h),f.return=m,f;case Tr:var w=f._init;return p(m,w(f._payload),h)}if(ya(f)||ua(f))return f=yi(f,m.mode,h,null),f.return=m,f;es(m,f)}return null}function d(m,f,h,w){var I=f!==null?f.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return I!==null?null:l(m,f,""+h,w);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Bl:return h.key===I?s(m,f,h,w):null;case Zi:return h.key===I?u(m,f,h,w):null;case Tr:return I=h._init,d(m,f,I(h._payload),w)}if(ya(h)||ua(h))return I!==null?null:c(m,f,h,w,null);es(m,h)}return null}function g(m,f,h,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(h)||null,l(f,m,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bl:return m=m.get(w.key===null?h:w.key)||null,s(f,m,w,I);case Zi:return m=m.get(w.key===null?h:w.key)||null,u(f,m,w,I);case Tr:var T=w._init;return g(m,f,h,T(w._payload),I)}if(ya(w)||ua(w))return m=m.get(h)||null,c(f,m,w,I,null);es(f,w)}return null}function y(m,f,h,w){for(var I=null,T=null,L=f,A=f=0,O=null;L!==null&&A<h.length;A++){L.index>A?(O=L,L=null):O=L.sibling;var R=d(m,L,h[A],w);if(R===null){L===null&&(L=O);break}e&&L&&R.alternate===null&&t(m,L),f=o(R,f,A),T===null?I=R:T.sibling=R,T=R,L=O}if(A===h.length)return n(m,L),$e&&fi(m,A),I;if(L===null){for(;A<h.length;A++)L=p(m,h[A],w),L!==null&&(f=o(L,f,A),T===null?I=L:T.sibling=L,T=L);return $e&&fi(m,A),I}for(L=r(m,L);A<h.length;A++)O=g(L,m,A,h[A],w),O!==null&&(e&&O.alternate!==null&&L.delete(O.key===null?A:O.key),f=o(O,f,A),T===null?I=O:T.sibling=O,T=O);return e&&L.forEach(function(F){return t(m,F)}),$e&&fi(m,A),I}function v(m,f,h,w){var I=ua(h);if(typeof I!="function")throw Error(V(150));if(h=I.call(h),h==null)throw Error(V(151));for(var T=I=null,L=f,A=f=0,O=null,R=h.next();L!==null&&!R.done;A++,R=h.next()){L.index>A?(O=L,L=null):O=L.sibling;var F=d(m,L,R.value,w);if(F===null){L===null&&(L=O);break}e&&L&&F.alternate===null&&t(m,L),f=o(F,f,A),T===null?I=F:T.sibling=F,T=F,L=O}if(R.done)return n(m,L),$e&&fi(m,A),I;if(L===null){for(;!R.done;A++,R=h.next())R=p(m,R.value,w),R!==null&&(f=o(R,f,A),T===null?I=R:T.sibling=R,T=R);return $e&&fi(m,A),I}for(L=r(m,L);!R.done;A++,R=h.next())R=g(L,m,A,R.value,w),R!==null&&(e&&R.alternate!==null&&L.delete(R.key===null?A:R.key),f=o(R,f,A),T===null?I=R:T.sibling=R,T=R);return e&&L.forEach(function(q){return t(m,q)}),$e&&fi(m,A),I}function S(m,f,h,w){if(typeof h=="object"&&h!==null&&h.type===Ki&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case Bl:e:{for(var I=h.key,T=f;T!==null;){if(T.key===I){if(I=h.type,I===Ki){if(T.tag===7){n(m,T.sibling),f=i(T,h.props.children),f.return=m,m=f;break e}}else if(T.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Tr&&wm(I)===T.type){n(m,T.sibling),f=i(T,h.props),f.ref=pa(m,T,h),f.return=m,m=f;break e}n(m,T);break}else t(m,T);T=T.sibling}h.type===Ki?(f=yi(h.props.children,m.mode,w,h.key),f.return=m,m=f):(w=ps(h.type,h.key,h.props,null,m.mode,w),w.ref=pa(m,f,h),w.return=m,m=w)}return a(m);case Zi:e:{for(T=h.key;f!==null;){if(f.key===T)if(f.tag===4&&f.stateNode.containerInfo===h.containerInfo&&f.stateNode.implementation===h.implementation){n(m,f.sibling),f=i(f,h.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else t(m,f);f=f.sibling}f=sd(h,m.mode,w),f.return=m,m=f}return a(m);case Tr:return T=h._init,S(m,f,T(h._payload),w)}if(ya(h))return y(m,f,h,w);if(ua(h))return v(m,f,h,w);es(m,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,f!==null&&f.tag===6?(n(m,f.sibling),f=i(f,h),f.return=m,m=f):(n(m,f),f=ld(h,m.mode,w),f.return=m,m=f),a(m)):n(m,f)}return S}var vo=Gg(!0),Wg=Gg(!1),Ts=Wr(null),Ls=null,io=null,xf=null;function _f(){xf=io=Ls=null}function Ef(e){var t=Ts.current;He(Ts),e._currentValue=t}function Ud(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fo(e,t){Ls=e,xf=io=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(zt=!0),e.firstContext=null)}function hn(e){var t=e._currentValue;if(xf!==e)if(e={context:e,memoizedValue:t,next:null},io===null){if(Ls===null)throw Error(V(308));io=e,Ls.dependencies={lanes:0,firstContext:e}}else io=io.next=e;return t}var mi=null;function bf(e){mi===null?mi=[e]:mi.push(e)}function jg(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,bf(t)):(n.next=i.next,i.next=n),t.interleaved=n,ur(e,r)}function ur(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Lr=!1;function Cf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $g(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ar(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Ee&2)!==0){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ur(e,n)}return i=r.interleaved,i===null?(t.next=t,bf(r)):(t.next=i.next,i.next=t),r.interleaved=t,ur(e,n)}function ls(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,cf(e,n)}}function Sm(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ps(e,t,n,r){var i=e.updateQueue;Lr=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var s=l,u=s.next;s.next=null,a===null?o=u:a.next=u,a=s;var c=e.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==a&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=s))}if(o!==null){var p=i.baseState;a=0,c=u=s=null,l=o;do{var d=l.lane,g=l.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,v=l;switch(d=t,g=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){p=y.call(g,p,d);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,d=typeof y=="function"?y.call(g,p,d):y,d==null)break e;p=Ke({},p,d);break e;case 2:Lr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else g={eventTime:g,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=g,s=p):c=c.next=g,a|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(s=p),i.baseState=s,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);_i|=a,e.lanes=a,e.memoizedState=p}}function xm(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(V(191,i));i.call(r)}}}var Ka={},zn=Wr(Ka),Va=Wr(Ka),Ha=Wr(Ka);function gi(e){if(e===Ka)throw Error(V(174));return e}function If(e,t){switch(Ne(Ha,t),Ne(Va,e),Ne(zn,Ka),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yd(t,e)}He(zn),Ne(zn,t)}function yo(){He(zn),He(Va),He(Ha)}function Yg(e){gi(Ha.current);var t=gi(zn.current),n=yd(t,e.type);t!==n&&(Ne(Va,e),Ne(zn,n))}function Tf(e){Va.current===e&&(He(zn),He(Va))}var Xe=Wr(0);function As(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var td=[];function Lf(){for(var e=0;e<td.length;e++)td[e]._workInProgressVersionPrimary=null;td.length=0}var ss=dr.ReactCurrentDispatcher,nd=dr.ReactCurrentBatchConfig,xi=0,Ze=null,lt=null,pt=null,ks=!1,Ia=!1,Ga=0,p_=0;function Et(){throw Error(V(321))}function Pf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pn(e[n],t[n]))return!1;return!0}function Af(e,t,n,r,i,o){if(xi=o,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ss.current=e===null||e.memoizedState===null?v_:y_,e=n(r,i),Ia){o=0;do{if(Ia=!1,Ga=0,25<=o)throw Error(V(301));o+=1,pt=lt=null,t.updateQueue=null,ss.current=w_,e=n(r,i)}while(Ia)}if(ss.current=Ds,t=lt!==null&&lt.next!==null,xi=0,pt=lt=Ze=null,ks=!1,t)throw Error(V(300));return e}function kf(){var e=Ga!==0;return Ga=0,e}function Nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ze.memoizedState=pt=e:pt=pt.next=e,pt}function mn(){if(lt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=pt===null?Ze.memoizedState:pt.next;if(t!==null)pt=t,lt=e;else{if(e===null)throw Error(V(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},pt===null?Ze.memoizedState=pt=e:pt=pt.next=e}return pt}function Wa(e,t){return typeof t=="function"?t(e):t}function rd(e){var t=mn(),n=t.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=e;var r=lt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=a=null,s=null,u=o;do{var c=u.lane;if((xi&c)===c)s!==null&&(s=s.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};s===null?(l=s=p,a=r):s=s.next=p,Ze.lanes|=c,_i|=c}u=u.next}while(u!==null&&u!==o);s===null?a=r:s.next=l,Pn(r,t.memoizedState)||(zt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Ze.lanes|=o,_i|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function id(e){var t=mn(),n=t.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Pn(o,t.memoizedState)||(zt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Xg(){}function Zg(e,t){var n=Ze,r=mn(),i=t(),o=!Pn(r.memoizedState,i);if(o&&(r.memoizedState=i,zt=!0),r=r.queue,Df(Qg.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,ja(9,qg.bind(null,n,r,i,t),void 0,null),ht===null)throw Error(V(349));(xi&30)!==0||Kg(n,t,i)}return i}function Kg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qg(e,t,n,r){t.value=n,t.getSnapshot=r,Jg(t)&&ev(e)}function Qg(e,t,n){return n(function(){Jg(t)&&ev(e)})}function Jg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pn(e,n)}catch(r){return!0}}function ev(e){var t=ur(e,1);t!==null&&Ln(t,e,1,-1)}function _m(e){var t=Nn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:e},t.queue=e,e=e.dispatch=g_.bind(null,Ze,e),[t.memoizedState,e]}function ja(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function tv(){return mn().memoizedState}function us(e,t,n,r){var i=Nn();Ze.flags|=e,i.memoizedState=ja(1|t,n,void 0,r===void 0?null:r)}function Ws(e,t,n,r){var i=mn();r=r===void 0?null:r;var o=void 0;if(lt!==null){var a=lt.memoizedState;if(o=a.destroy,r!==null&&Pf(r,a.deps)){i.memoizedState=ja(t,n,o,r);return}}Ze.flags|=e,i.memoizedState=ja(1|t,n,o,r)}function Em(e,t){return us(8390656,8,e,t)}function Df(e,t){return Ws(2048,8,e,t)}function nv(e,t){return Ws(4,2,e,t)}function rv(e,t){return Ws(4,4,e,t)}function iv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ov(e,t,n){return n=n!=null?n.concat([e]):null,Ws(4,4,iv.bind(null,t,e),n)}function Mf(){}function av(e,t){var n=mn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function lv(e,t){var n=mn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sv(e,t,n){return(xi&21)===0?(e.baseState&&(e.baseState=!1,zt=!0),e.memoizedState=n):(Pn(n,t)||(n=pg(),Ze.lanes|=n,_i|=n,e.baseState=!0),t)}function h_(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var r=nd.transition;nd.transition={};try{e(!1),t()}finally{Ae=n,nd.transition=r}}function uv(){return mn().memoizedState}function m_(e,t,n){var r=Br(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cv(e))dv(t,n);else if(n=jg(e,t,n,r),n!==null){var i=Dt();Ln(n,e,r,i),fv(n,t,r)}}function g_(e,t,n){var r=Br(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cv(e))dv(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(i.hasEagerState=!0,i.eagerState=l,Pn(l,a)){var s=t.interleaved;s===null?(i.next=i,bf(t)):(i.next=s.next,s.next=i),t.interleaved=i;return}}catch(u){}finally{}n=jg(e,t,i,r),n!==null&&(i=Dt(),Ln(n,e,r,i),fv(n,t,r))}}function cv(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function dv(e,t){Ia=ks=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fv(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,cf(e,n)}}var Ds={readContext:hn,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},v_={readContext:hn,useCallback:function(e,t){return Nn().memoizedState=[e,t===void 0?null:t],e},useContext:hn,useEffect:Em,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,us(4194308,4,iv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return us(4194308,4,e,t)},useInsertionEffect:function(e,t){return us(4,2,e,t)},useMemo:function(e,t){var n=Nn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Nn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=m_.bind(null,Ze,e),[r.memoizedState,e]},useRef:function(e){var t=Nn();return e={current:e},t.memoizedState=e},useState:_m,useDebugValue:Mf,useDeferredValue:function(e){return Nn().memoizedState=e},useTransition:function(){var e=_m(!1),t=e[0];return e=h_.bind(null,e[1]),Nn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ze,i=Nn();if($e){if(n===void 0)throw Error(V(407));n=n()}else{if(n=t(),ht===null)throw Error(V(349));(xi&30)!==0||Kg(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Em(Qg.bind(null,r,o,e),[e]),r.flags|=2048,ja(9,qg.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Nn(),t=ht.identifierPrefix;if($e){var n=or,r=ir;n=(r&~(1<<32-Tn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ga++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=p_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},y_={readContext:hn,useCallback:av,useContext:hn,useEffect:Df,useImperativeHandle:ov,useInsertionEffect:nv,useLayoutEffect:rv,useMemo:lv,useReducer:rd,useRef:tv,useState:function(){return rd(Wa)},useDebugValue:Mf,useDeferredValue:function(e){var t=mn();return sv(t,lt.memoizedState,e)},useTransition:function(){var e=rd(Wa)[0],t=mn().memoizedState;return[e,t]},useMutableSource:Xg,useSyncExternalStore:Zg,useId:uv,unstable_isNewReconciler:!1},w_={readContext:hn,useCallback:av,useContext:hn,useEffect:Df,useImperativeHandle:ov,useInsertionEffect:nv,useLayoutEffect:rv,useMemo:lv,useReducer:id,useRef:tv,useState:function(){return id(Wa)},useDebugValue:Mf,useDeferredValue:function(e){var t=mn();return lt===null?t.memoizedState=e:sv(t,lt.memoizedState,e)},useTransition:function(){var e=id(Wa)[0],t=mn().memoizedState;return[e,t]},useMutableSource:Xg,useSyncExternalStore:Zg,useId:uv,unstable_isNewReconciler:!1};function bn(e,t){if(e&&e.defaultProps){t=Ke({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Bd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ke({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var js={isMounted:function(e){return(e=e._reactInternals)?Ci(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Dt(),i=Br(e),o=ar(r,i);o.payload=t,n!=null&&(o.callback=n),t=Nr(e,o,i),t!==null&&(Ln(t,e,i,r),ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Dt(),i=Br(e),o=ar(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Nr(e,o,i),t!==null&&(Ln(t,e,i,r),ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dt(),r=Br(e),i=ar(n,r);i.tag=2,t!=null&&(i.callback=t),t=Nr(e,i,r),t!==null&&(Ln(t,e,r,n),ls(t,e,r))}};function bm(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Na(n,r)||!Na(i,o):!0}function pv(e,t,n){var r=!1,i=Hr,o=t.contextType;return typeof o=="object"&&o!==null?o=hn(o):(i=Ht(t)?wi:It.current,r=t.contextTypes,o=(r=r!=null)?mo(e,i):Hr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=js,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Cm(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&js.enqueueReplaceState(t,t.state,null)}function zd(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Cf(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=hn(o):(o=Ht(t)?wi:It.current,i.context=mo(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Bd(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&js.enqueueReplaceState(i,i.state,null),Ps(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function wo(e,t){try{var n="",r=t;do n+=ZS(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function od(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function Vd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var S_=typeof WeakMap=="function"?WeakMap:Map;function hv(e,t,n){n=ar(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Rs||(Rs=!0,qd=r),Vd(e,t)},n}function mv(e,t,n){n=ar(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Vd(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Vd(e,t),typeof r!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Im(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new S_;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=R_.bind(null,e,t,n),t.then(e,e))}function Tm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lm(e,t,n,r,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ar(-1,1),t.tag=2,Nr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var x_=dr.ReactCurrentOwner,zt=!1;function kt(e,t,n,r){t.child=e===null?Wg(t,null,n,r):vo(t,e.child,n,r)}function Pm(e,t,n,r,i){n=n.render;var o=t.ref;return fo(t,i),r=Af(e,t,n,r,o,i),n=kf(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cr(e,t,i)):($e&&n&&yf(t),t.flags|=1,kt(e,t,r,i),t.child)}function Am(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Vf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,gv(e,t,o,r,i)):(e=ps(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&i)===0){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Na,n(a,r)&&e.ref===t.ref)return cr(e,t,i)}return t.flags|=1,e=zr(o,r),e.ref=t.ref,e.return=t,t.child=e}function gv(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Na(o,r)&&e.ref===t.ref)if(zt=!1,t.pendingProps=r=o,(e.lanes&i)!==0)(e.flags&131072)!==0&&(zt=!0);else return t.lanes=e.lanes,cr(e,t,i)}return Hd(e,t,n,r,i)}function vv(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(ao,Yt),Yt|=n;else{if((n&1073741824)===0)return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(ao,Yt),Yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ne(ao,Yt),Yt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ne(ao,Yt),Yt|=r;return kt(e,t,i,n),t.child}function yv(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hd(e,t,n,r,i){var o=Ht(n)?wi:It.current;return o=mo(t,o),fo(t,i),n=Af(e,t,n,r,o,i),r=kf(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cr(e,t,i)):($e&&r&&yf(t),t.flags|=1,kt(e,t,n,i),t.child)}function km(e,t,n,r,i){if(Ht(n)){var o=!0;bs(t)}else o=!1;if(fo(t,i),t.stateNode===null)cs(e,t),pv(t,n,r),zd(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var s=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=hn(u):(u=Ht(n)?wi:It.current,u=mo(t,u));var c=n.getDerivedStateFromProps,p=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||s!==u)&&Cm(t,a,r,u),Lr=!1;var d=t.memoizedState;a.state=d,Ps(t,r,a,i),s=t.memoizedState,l!==r||d!==s||Vt.current||Lr?(typeof c=="function"&&(Bd(t,n,c,r),s=t.memoizedState),(l=Lr||bm(t,n,l,r,d,s,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),a.props=r,a.state=s,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,$g(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:bn(t.type,l),a.props=u,p=t.pendingProps,d=a.context,s=n.contextType,typeof s=="object"&&s!==null?s=hn(s):(s=Ht(n)?wi:It.current,s=mo(t,s));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||d!==s)&&Cm(t,a,r,s),Lr=!1,d=t.memoizedState,a.state=d,Ps(t,r,a,i);var y=t.memoizedState;l!==p||d!==y||Vt.current||Lr?(typeof g=="function"&&(Bd(t,n,g,r),y=t.memoizedState),(u=Lr||bm(t,n,u,r,d,y,s)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,s),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,s)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=s,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Gd(e,t,n,r,o,i)}function Gd(e,t,n,r,i,o){yv(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&gm(t,n,!1),cr(e,t,o);r=t.stateNode,x_.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=vo(t,e.child,null,o),t.child=vo(t,null,l,o)):kt(e,t,l,o),t.memoizedState=r.state,i&&gm(t,n,!0),t.child}function wv(e){var t=e.stateNode;t.pendingContext?mm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mm(e,t.context,!1),If(e,t.containerInfo)}function Dm(e,t,n,r,i){return go(),Sf(i),t.flags|=256,kt(e,t,n,r),t.child}var Wd={dehydrated:null,treeContext:null,retryLane:0};function jd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sv(e,t,n){var r=t.pendingProps,i=Xe.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ne(Xe,i&1),e===null)return Nd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},(r&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Xs(a,r,0,null),e=yi(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=jd(n),t.memoizedState=Wd,e):Rf(t,a));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return __(e,t,a,r,l,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,l=i.sibling;var s={mode:"hidden",children:r.children};return(a&1)===0&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=s,t.deletions=null):(r=zr(i,s),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=zr(l,o):(o=yi(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?jd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Wd,r}return o=e.child,e=o.sibling,r=zr(o,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Rf(e,t){return t=Xs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ts(e,t,n,r){return r!==null&&Sf(r),vo(t,e.child,null,n),e=Rf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function __(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=od(Error(V(422))),ts(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Xs({mode:"visible",children:r.children},i,0,null),o=yi(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,(t.mode&1)!==0&&vo(t,e.child,null,a),t.child.memoizedState=jd(a),t.memoizedState=Wd,o);if((t.mode&1)===0)return ts(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(V(419)),r=od(o,r,void 0),ts(e,t,a,r)}if(l=(a&e.childLanes)!==0,zt||l){if(r=ht,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|a))!==0?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ur(e,i),Ln(r,e,i,-1))}return zf(),r=od(Error(V(421))),ts(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=O_.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Xt=Fr(i.nextSibling),Zt=t,$e=!0,In=null,e!==null&&(cn[dn++]=ir,cn[dn++]=or,cn[dn++]=Si,ir=e.id,or=e.overflow,Si=t),t=Rf(t,r.children),t.flags|=4096,t)}function Mm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ud(e.return,t,n)}function ad(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function xv(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(kt(e,t,r.children,n),r=Xe.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mm(e,n,t);else if(e.tag===19)Mm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ne(Xe,r),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&As(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ad(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&As(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ad(t,!0,n,null,o);break;case"together":ad(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cs(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),_i|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,n=zr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function E_(e,t,n){switch(t.tag){case 3:wv(t),go();break;case 5:Yg(t);break;case 1:Ht(t.type)&&bs(t);break;case 4:If(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ne(Ts,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Xe,Xe.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Sv(e,t,n):(Ne(Xe,Xe.current&1),e=cr(e,t,n),e!==null?e.sibling:null);Ne(Xe,Xe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return xv(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ne(Xe,Xe.current),r)break;return null;case 22:case 23:return t.lanes=0,vv(e,t,n)}return cr(e,t,n)}var _v,$d,Ev,bv;_v=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$d=function(){};Ev=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,gi(zn.current);var o=null;switch(n){case"input":i=hd(e,i),r=hd(e,r),o=[];break;case"select":i=Ke({},i,{value:void 0}),r=Ke({},r,{value:void 0}),o=[];break;case"textarea":i=vd(e,i),r=vd(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=_s)}wd(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Aa.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var s=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&s!==l&&(s!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||s&&s.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in s)s.hasOwnProperty(a)&&l[a]!==s[a]&&(n||(n={}),n[a]=s[a])}else n||(o||(o=[]),o.push(u,n)),n=s;else u==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,l=l?l.__html:void 0,s!=null&&l!==s&&(o=o||[]).push(u,s)):u==="children"?typeof s!="string"&&typeof s!="number"||(o=o||[]).push(u,""+s):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Aa.hasOwnProperty(u)?(s!=null&&u==="onScroll"&&Ve("scroll",e),o||l===s||(o=[])):(o=o||[]).push(u,s))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};bv=function(e,t,n,r){n!==r&&(t.flags|=4)};function ha(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function b_(e,t,n){var r=t.pendingProps;switch(wf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(t),null;case 1:return Ht(t.type)&&Es(),bt(t),null;case 3:return r=t.stateNode,yo(),He(Vt),He(It),Lf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Jl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,In!==null&&(ef(In),In=null))),$d(e,t),bt(t),null;case 5:Tf(t);var i=gi(Ha.current);if(n=t.type,e!==null&&t.stateNode!=null)Ev(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(V(166));return bt(t),null}if(e=gi(zn.current),Jl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Un]=t,r[za]=o,e=(t.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(i=0;i<Sa.length;i++)Ve(Sa[i],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Vh(r,o),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ve("invalid",r);break;case"textarea":Gh(r,o),Ve("invalid",r)}wd(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Ql(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Ql(r.textContent,l,e),i=["children",""+l]):Aa.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ve("scroll",r)}switch(n){case"input":zl(r),Hh(r,o,!0);break;case"textarea":zl(r),Wh(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=_s)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Un]=t,e[za]=r,_v(e,t,!1,!1),t.stateNode=e;e:{switch(a=Sd(n,r),n){case"dialog":Ve("cancel",e),Ve("close",e),i=r;break;case"iframe":case"object":case"embed":Ve("load",e),i=r;break;case"video":case"audio":for(i=0;i<Sa.length;i++)Ve(Sa[i],e);i=r;break;case"source":Ve("error",e),i=r;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),i=r;break;case"details":Ve("toggle",e),i=r;break;case"input":Vh(e,r),i=hd(e,r),Ve("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ke({},r,{value:void 0}),Ve("invalid",e);break;case"textarea":Gh(e,r),i=vd(e,r),Ve("invalid",e);break;default:i=r}wd(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var s=l[o];o==="style"?tg(e,s):o==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&Jm(e,s)):o==="children"?typeof s=="string"?(n!=="textarea"||s!=="")&&ka(e,s):typeof s=="number"&&ka(e,""+s):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Aa.hasOwnProperty(o)?s!=null&&o==="onScroll"&&Ve("scroll",e):s!=null&&rf(e,o,s,a))}switch(n){case"input":zl(e),Hh(e,r,!1);break;case"textarea":zl(e),Wh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Vr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?lo(e,!!r.multiple,o,!1):r.defaultValue!=null&&lo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=_s)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bt(t),null;case 6:if(e&&t.stateNode!=null)bv(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(V(166));if(n=gi(Ha.current),gi(zn.current),Jl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Un]=t,(o=r.nodeValue!==n)&&(e=Zt,e!==null))switch(e.tag){case 3:Ql(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ql(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Un]=t,t.stateNode=r}return bt(t),null;case 13:if(He(Xe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Xt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Hg(),go(),t.flags|=98560,o=!1;else if(o=Jl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(V(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(V(317));o[Un]=t}else go(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;bt(t),o=!1}else In!==null&&(ef(In),In=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Xe.current&1)!==0?st===0&&(st=3):zf())),t.updateQueue!==null&&(t.flags|=4),bt(t),null);case 4:return yo(),$d(e,t),e===null&&Ua(t.stateNode.containerInfo),bt(t),null;case 10:return Ef(t.type._context),bt(t),null;case 17:return Ht(t.type)&&Es(),bt(t),null;case 19:if(He(Xe),o=t.memoizedState,o===null)return bt(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)ha(o,!1);else{if(st!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(a=As(e),a!==null){for(t.flags|=128,ha(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ne(Xe,Xe.current&1|2),t.child}e=e.sibling}o.tail!==null&&et()>So&&(t.flags|=128,r=!0,ha(o,!1),t.lanes=4194304)}else{if(!r)if(e=As(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ha(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!$e)return bt(t),null}else 2*et()-o.renderingStartTime>So&&n!==1073741824&&(t.flags|=128,r=!0,ha(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=et(),t.sibling=null,n=Xe.current,Ne(Xe,r?n&1|2:n&1),t):(bt(t),null);case 22:case 23:return Bf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Yt&1073741824)!==0&&(bt(t),t.subtreeFlags&6&&(t.flags|=8192)):bt(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function C_(e,t){switch(wf(t),t.tag){case 1:return Ht(t.type)&&Es(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yo(),He(Vt),He(It),Lf(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Tf(t),null;case 13:if(He(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));go()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return He(Xe),null;case 4:return yo(),null;case 10:return Ef(t.type._context),null;case 22:case 23:return Bf(),null;case 24:return null;default:return null}}var ns=!1,Ct=!1,I_=typeof WeakSet=="function"?WeakSet:Set,X=null;function oo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(e,t,r)}else n.current=null}function Yd(e,t,n){try{n()}catch(r){qe(e,t,r)}}var Rm=!1;function T_(e,t){if(Ad=ws,e=Pg(),vf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,s=-1,u=0,c=0,p=e,d=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(l=a+i),p!==o||r!==0&&p.nodeType!==3||(s=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(g=p.firstChild)!==null;)d=p,p=g;for(;;){if(p===e)break t;if(d===n&&++u===i&&(l=a),d===o&&++c===r&&(s=a),(g=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=g}n=l===-1||s===-1?null:{start:l,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(kd={focusedElem:e,selectionRange:n},ws=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var y=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,S=y.memoizedState,m=t.stateNode,f=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:bn(t.type,v),S);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(w){qe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return y=Rm,Rm=!1,y}function Ta(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Yd(t,n,o)}i=i.next}while(i!==r)}}function $s(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Xd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Cv(e){var t=e.alternate;t!==null&&(e.alternate=null,Cv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Un],delete t[za],delete t[Rd],delete t[u_],delete t[c_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Iv(e){return e.tag===5||e.tag===3||e.tag===4}function Om(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Iv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_s));else if(r!==4&&(e=e.child,e!==null))for(Zd(e,t,n),e=e.sibling;e!==null;)Zd(e,t,n),e=e.sibling}function Kd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Kd(e,t,n),e=e.sibling;e!==null;)Kd(e,t,n),e=e.sibling}var gt=null,Cn=!1;function Ir(e,t,n){for(n=n.child;n!==null;)Tv(e,t,n),n=n.sibling}function Tv(e,t,n){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Us,n)}catch(l){}switch(n.tag){case 5:Ct||oo(n,t);case 6:var r=gt,i=Cn;gt=null,Ir(e,t,n),gt=r,Cn=i,gt!==null&&(Cn?(e=gt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Cn?(e=gt,n=n.stateNode,e.nodeType===8?Jc(e.parentNode,n):e.nodeType===1&&Jc(e,n),Oa(e)):Jc(gt,n.stateNode));break;case 4:r=gt,i=Cn,gt=n.stateNode.containerInfo,Cn=!0,Ir(e,t,n),gt=r,Cn=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&((o&2)!==0||(o&4)!==0)&&Yd(n,t,a),i=i.next}while(i!==r)}Ir(e,t,n);break;case 1:if(!Ct&&(oo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){qe(n,t,l)}Ir(e,t,n);break;case 21:Ir(e,t,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,Ir(e,t,n),Ct=r):Ir(e,t,n);break;default:Ir(e,t,n)}}function Fm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new I_),t.forEach(function(r){var i=F_.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function En(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:gt=l.stateNode,Cn=!1;break e;case 3:gt=l.stateNode.containerInfo,Cn=!0;break e;case 4:gt=l.stateNode.containerInfo,Cn=!0;break e}l=l.return}if(gt===null)throw Error(V(160));Tv(o,a,i),gt=null,Cn=!1;var s=i.alternate;s!==null&&(s.return=null),i.return=null}catch(u){qe(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Lv(t,e),t=t.sibling}function Lv(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(En(t,e),Fn(e),r&4){try{Ta(3,e,e.return),$s(3,e)}catch(v){qe(e,e.return,v)}try{Ta(5,e,e.return)}catch(v){qe(e,e.return,v)}}break;case 1:En(t,e),Fn(e),r&512&&n!==null&&oo(n,n.return);break;case 5:if(En(t,e),Fn(e),r&512&&n!==null&&oo(n,n.return),e.flags&32){var i=e.stateNode;try{ka(i,"")}catch(v){qe(e,e.return,v)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,l=e.type,s=e.updateQueue;if(e.updateQueue=null,s!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Km(i,o),Sd(l,a);var u=Sd(l,o);for(a=0;a<s.length;a+=2){var c=s[a],p=s[a+1];c==="style"?tg(i,p):c==="dangerouslySetInnerHTML"?Jm(i,p):c==="children"?ka(i,p):rf(i,c,p,u)}switch(l){case"input":md(i,o);break;case"textarea":qm(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?lo(i,!!o.multiple,g,!1):d!==!!o.multiple&&(o.defaultValue!=null?lo(i,!!o.multiple,o.defaultValue,!0):lo(i,!!o.multiple,o.multiple?[]:"",!1))}i[za]=o}catch(v){qe(e,e.return,v)}}break;case 6:if(En(t,e),Fn(e),r&4){if(e.stateNode===null)throw Error(V(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(v){qe(e,e.return,v)}}break;case 3:if(En(t,e),Fn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Oa(t.containerInfo)}catch(v){qe(e,e.return,v)}break;case 4:En(t,e),Fn(e);break;case 13:En(t,e),Fn(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Nf=et())),r&4&&Fm(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Ct=(u=Ct)||c,En(t,e),Ct=u):En(t,e),Fn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&(e.mode&1)!==0)for(X=e,c=e.child;c!==null;){for(p=X=c;X!==null;){switch(d=X,g=d.child,d.tag){case 0:case 11:case 14:case 15:Ta(4,d,d.return);break;case 1:oo(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){qe(r,n,v)}}break;case 5:oo(d,d.return);break;case 22:if(d.memoizedState!==null){Um(p);continue}}g!==null?(g.return=d,X=g):Um(p)}c=c.sibling}e:for(c=null,p=e;;){if(p.tag===5){if(c===null){c=p;try{i=p.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,s=p.memoizedProps.style,a=s!=null&&s.hasOwnProperty("display")?s.display:null,l.style.display=eg("display",a))}catch(v){qe(e,e.return,v)}}}else if(p.tag===6){if(c===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(v){qe(e,e.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;c===p&&(c=null),p=p.return}c===p&&(c=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:En(t,e),Fn(e),r&4&&Fm(e);break;case 21:break;default:En(t,e),Fn(e)}}function Fn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Iv(n)){var r=n;break e}n=n.return}throw Error(V(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ka(i,""),r.flags&=-33);var o=Om(e);Kd(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Om(e);Zd(e,l,a);break;default:throw Error(V(161))}}catch(s){qe(e,e.return,s)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function L_(e,t,n){X=e,Pv(e,t,n)}function Pv(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var i=X,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ns;if(!a){var l=i.alternate,s=l!==null&&l.memoizedState!==null||Ct;l=ns;var u=Ct;if(ns=a,(Ct=s)&&!u)for(X=i;X!==null;)a=X,s=a.child,a.tag===22&&a.memoizedState!==null?Bm(i):s!==null?(s.return=a,X=s):Bm(i);for(;o!==null;)X=o,Pv(o,t,n),o=o.sibling;X=i,ns=l,Ct=u}Nm(e,t,n)}else(i.subtreeFlags&8772)!==0&&o!==null?(o.return=i,X=o):Nm(e,t,n)}}function Nm(e){for(;X!==null;){var t=X;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ct||$s(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:bn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&xm(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xm(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var p=c.dehydrated;p!==null&&Oa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}Ct||t.flags&512&&Xd(t)}catch(d){qe(t,t.return,d)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function Um(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function Bm(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$s(4,t)}catch(s){qe(t,n,s)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(s){qe(t,i,s)}}var o=t.return;try{Xd(t)}catch(s){qe(t,o,s)}break;case 5:var a=t.return;try{Xd(t)}catch(s){qe(t,a,s)}}}catch(s){qe(t,t.return,s)}if(t===e){X=null;break}var l=t.sibling;if(l!==null){l.return=t.return,X=l;break}X=t.return}}var P_=Math.ceil,Ms=dr.ReactCurrentDispatcher,Of=dr.ReactCurrentOwner,pn=dr.ReactCurrentBatchConfig,Ee=0,ht=null,ot=null,vt=0,Yt=0,ao=Wr(0),st=0,$a=null,_i=0,Ys=0,Ff=0,La=null,Bt=null,Nf=0,So=1/0,nr=null,Rs=!1,qd=null,Ur=null,rs=!1,Dr=null,Os=0,Pa=0,Qd=null,ds=-1,fs=0;function Dt(){return(Ee&6)!==0?et():ds!==-1?ds:ds=et()}function Br(e){return(e.mode&1)===0?1:(Ee&2)!==0&&vt!==0?vt&-vt:f_.transition!==null?(fs===0&&(fs=pg()),fs):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:Sg(e.type)),e)}function Ln(e,t,n,r){if(50<Pa)throw Pa=0,Qd=null,Error(V(185));Ya(e,n,r),((Ee&2)===0||e!==ht)&&(e===ht&&((Ee&2)===0&&(Ys|=n),st===4&&Ar(e,vt)),Gt(e,r),n===1&&Ee===0&&(t.mode&1)===0&&(So=et()+500,Gs&&jr()))}function Gt(e,t){var n=e.callbackNode;hx(e,t);var r=ys(e,e===ht?vt:0);if(r===0)n!==null&&Yh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Yh(n),t===1)e.tag===0?d_(zm.bind(null,e)):Bg(zm.bind(null,e)),l_(function(){(Ee&6)===0&&jr()}),n=null;else{switch(hg(r)){case 1:n=uf;break;case 4:n=dg;break;case 16:n=vs;break;case 536870912:n=fg;break;default:n=vs}n=Nv(n,Av.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Av(e,t){if(ds=-1,fs=0,(Ee&6)!==0)throw Error(V(327));var n=e.callbackNode;if(po()&&e.callbackNode!==n)return null;var r=ys(e,e===ht?vt:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Fs(e,r);else{t=r;var i=Ee;Ee|=2;var o=Dv();(ht!==e||vt!==t)&&(nr=null,So=et()+500,vi(e,t));do try{D_();break}catch(l){kv(e,l)}while(!0);_f(),Ms.current=o,Ee=i,ot!==null?t=0:(ht=null,vt=0,t=st)}if(t!==0){if(t===2&&(i=Cd(e),i!==0&&(r=i,t=Jd(e,i))),t===1)throw n=$a,vi(e,0),Ar(e,r),Gt(e,et()),n;if(t===6)Ar(e,r);else{if(i=e.current.alternate,(r&30)===0&&!A_(i)&&(t=Fs(e,r),t===2&&(o=Cd(e),o!==0&&(r=o,t=Jd(e,o))),t===1))throw n=$a,vi(e,0),Ar(e,r),Gt(e,et()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(V(345));case 2:pi(e,Bt,nr);break;case 3:if(Ar(e,r),(r&130023424)===r&&(t=Nf+500-et(),10<t)){if(ys(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Dt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Md(pi.bind(null,e,Bt,nr),t);break}pi(e,Bt,nr);break;case 4:if(Ar(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Tn(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*P_(r/1960))-r,10<r){e.timeoutHandle=Md(pi.bind(null,e,Bt,nr),r);break}pi(e,Bt,nr);break;case 5:pi(e,Bt,nr);break;default:throw Error(V(329))}}}return Gt(e,et()),e.callbackNode===n?Av.bind(null,e):null}function Jd(e,t){var n=La;return e.current.memoizedState.isDehydrated&&(vi(e,t).flags|=256),e=Fs(e,t),e!==2&&(t=Bt,Bt=n,t!==null&&ef(t)),e}function ef(e){Bt===null?Bt=e:Bt.push.apply(Bt,e)}function A_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Pn(o(),i))return!1}catch(a){return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ar(e,t){for(t&=~Ff,t&=~Ys,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Tn(t),r=1<<n;e[n]=-1,t&=~r}}function zm(e){if((Ee&6)!==0)throw Error(V(327));po();var t=ys(e,0);if((t&1)===0)return Gt(e,et()),null;var n=Fs(e,t);if(e.tag!==0&&n===2){var r=Cd(e);r!==0&&(t=r,n=Jd(e,r))}if(n===1)throw n=$a,vi(e,0),Ar(e,t),Gt(e,et()),n;if(n===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pi(e,Bt,nr),Gt(e,et()),null}function Uf(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(So=et()+500,Gs&&jr())}}function Ei(e){Dr!==null&&Dr.tag===0&&(Ee&6)===0&&po();var t=Ee;Ee|=1;var n=pn.transition,r=Ae;try{if(pn.transition=null,Ae=1,e)return e()}finally{Ae=r,pn.transition=n,Ee=t,(Ee&6)===0&&jr()}}function Bf(){Yt=ao.current,He(ao)}function vi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,a_(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(wf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Es();break;case 3:yo(),He(Vt),He(It),Lf();break;case 5:Tf(r);break;case 4:yo();break;case 13:He(Xe);break;case 19:He(Xe);break;case 10:Ef(r.type._context);break;case 22:case 23:Bf()}n=n.return}if(ht=e,ot=e=zr(e.current,null),vt=Yt=t,st=0,$a=null,Ff=Ys=_i=0,Bt=La=null,mi!==null){for(t=0;t<mi.length;t++)if(n=mi[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}mi=null}return e}function kv(e,t){do{var n=ot;try{if(_f(),ss.current=Ds,ks){for(var r=Ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ks=!1}if(xi=0,pt=lt=Ze=null,Ia=!1,Ga=0,Of.current=null,n===null||n.return===null){st=1,$a=t,ot=null;break}e:{var o=e,a=n.return,l=n,s=t;if(t=vt,l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var u=s,c=l,p=c.tag;if((c.mode&1)===0&&(p===0||p===11||p===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Tm(a);if(g!==null){g.flags&=-257,Lm(g,a,l,o,t),g.mode&1&&Im(o,u,t),t=g,s=u;var y=t.updateQueue;if(y===null){var v=new Set;v.add(s),t.updateQueue=v}else y.add(s);break e}else{if((t&1)===0){Im(o,u,t),zf();break e}s=Error(V(426))}}else if($e&&l.mode&1){var S=Tm(a);if(S!==null){(S.flags&65536)===0&&(S.flags|=256),Lm(S,a,l,o,t),Sf(wo(s,l));break e}}o=s=wo(s,l),st!==4&&(st=2),La===null?La=[o]:La.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=hv(o,s,t);Sm(o,m);break e;case 1:l=s;var f=o.type,h=o.stateNode;if((o.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Ur===null||!Ur.has(h)))){o.flags|=65536,t&=-t,o.lanes|=t;var w=mv(o,l,t);Sm(o,w);break e}}o=o.return}while(o!==null)}Rv(n)}catch(I){t=I,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function Dv(){var e=Ms.current;return Ms.current=Ds,e===null?Ds:e}function zf(){(st===0||st===3||st===2)&&(st=4),ht===null||(_i&268435455)===0&&(Ys&268435455)===0||Ar(ht,vt)}function Fs(e,t){var n=Ee;Ee|=2;var r=Dv();(ht!==e||vt!==t)&&(nr=null,vi(e,t));do try{k_();break}catch(i){kv(e,i)}while(!0);if(_f(),Ee=n,Ms.current=r,ot!==null)throw Error(V(261));return ht=null,vt=0,st}function k_(){for(;ot!==null;)Mv(ot)}function D_(){for(;ot!==null&&!ox();)Mv(ot)}function Mv(e){var t=Fv(e.alternate,e,Yt);e.memoizedProps=e.pendingProps,t===null?Rv(e):ot=t,Of.current=null}function Rv(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=b_(n,t,Yt),n!==null){ot=n;return}}else{if(n=C_(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,ot=null;return}}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);st===0&&(st=5)}function pi(e,t,n){var r=Ae,i=pn.transition;try{pn.transition=null,Ae=1,M_(e,t,n,r)}finally{pn.transition=i,Ae=r}return null}function M_(e,t,n,r){do po();while(Dr!==null);if((Ee&6)!==0)throw Error(V(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(mx(e,o),e===ht&&(ot=ht=null,vt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||rs||(rs=!0,Nv(vs,function(){return po(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=pn.transition,pn.transition=null;var a=Ae;Ae=1;var l=Ee;Ee|=4,Of.current=null,T_(e,n),Lv(n,e),t_(kd),ws=!!Ad,kd=Ad=null,e.current=n,L_(n,e,i),ax(),Ee=l,Ae=a,pn.transition=o}else e.current=n;if(rs&&(rs=!1,Dr=e,Os=i),o=e.pendingLanes,o===0&&(Ur=null),ux(n.stateNode,r),Gt(e,et()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Rs)throw Rs=!1,e=qd,qd=null,e;return(Os&1)!==0&&e.tag!==0&&po(),o=e.pendingLanes,(o&1)!==0?e===Qd?Pa++:(Pa=0,Qd=e):Pa=0,jr(),null}function po(){if(Dr!==null){var e=hg(Os),t=pn.transition,n=Ae;try{if(pn.transition=null,Ae=16>e?16:e,Dr===null)var r=!1;else{if(e=Dr,Dr=null,Os=0,(Ee&6)!==0)throw Error(V(331));var i=Ee;for(Ee|=4,X=e.current;X!==null;){var o=X,a=o.child;if((X.flags&16)!==0){var l=o.deletions;if(l!==null){for(var s=0;s<l.length;s++){var u=l[s];for(X=u;X!==null;){var c=X;switch(c.tag){case 0:case 11:case 15:Ta(8,c,o)}var p=c.child;if(p!==null)p.return=c,X=p;else for(;X!==null;){c=X;var d=c.sibling,g=c.return;if(Cv(c),c===u){X=null;break}if(d!==null){d.return=g,X=d;break}X=g}}}var y=o.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}X=o}}if((o.subtreeFlags&2064)!==0&&a!==null)a.return=o,X=a;else e:for(;X!==null;){if(o=X,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Ta(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,X=m;break e}X=o.return}}var f=e.current;for(X=f;X!==null;){a=X;var h=a.child;if((a.subtreeFlags&2064)!==0&&h!==null)h.return=a,X=h;else e:for(a=f;X!==null;){if(l=X,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:$s(9,l)}}catch(I){qe(l,l.return,I)}if(l===a){X=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,X=w;break e}X=l.return}}if(Ee=i,jr(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Us,e)}catch(I){}r=!0}return r}finally{Ae=n,pn.transition=t}}return!1}function Vm(e,t,n){t=wo(n,t),t=hv(e,t,1),e=Nr(e,t,1),t=Dt(),e!==null&&(Ya(e,1,t),Gt(e,t))}function qe(e,t,n){if(e.tag===3)Vm(e,e,n);else for(;t!==null;){if(t.tag===3){Vm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ur===null||!Ur.has(r))){e=wo(n,e),e=mv(t,e,1),t=Nr(t,e,1),e=Dt(),t!==null&&(Ya(t,1,e),Gt(t,e));break}}t=t.return}}function R_(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Dt(),e.pingedLanes|=e.suspendedLanes&n,ht===e&&(vt&n)===n&&(st===4||st===3&&(vt&130023424)===vt&&500>et()-Nf?vi(e,0):Ff|=n),Gt(e,t)}function Ov(e,t){t===0&&((e.mode&1)===0?t=1:(t=Gl,Gl<<=1,(Gl&130023424)===0&&(Gl=4194304)));var n=Dt();e=ur(e,t),e!==null&&(Ya(e,t,n),Gt(e,n))}function O_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ov(e,n)}function F_(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(V(314))}r!==null&&r.delete(t),Ov(e,n)}var Fv;Fv=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vt.current)zt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return zt=!1,E_(e,t,n);zt=(e.flags&131072)!==0}else zt=!1,$e&&(t.flags&1048576)!==0&&zg(t,Is,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;cs(e,t),e=t.pendingProps;var i=mo(t,It.current);fo(t,n),i=Af(null,t,r,e,i,n);var o=kf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ht(r)?(o=!0,bs(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cf(t),i.updater=js,t.stateNode=i,i._reactInternals=t,zd(t,r,e,n),t=Gd(null,t,r,!0,o,n)):(t.tag=0,$e&&o&&yf(t),kt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(cs(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=U_(r),e=bn(r,e),i){case 0:t=Hd(null,t,r,e,n);break e;case 1:t=km(null,t,r,e,n);break e;case 11:t=Pm(null,t,r,e,n);break e;case 14:t=Am(null,t,r,bn(r.type,e),n);break e}throw Error(V(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bn(r,i),Hd(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bn(r,i),km(e,t,r,i,n);case 3:e:{if(wv(t),e===null)throw Error(V(387));r=t.pendingProps,o=t.memoizedState,i=o.element,$g(e,t),Ps(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=wo(Error(V(423)),t),t=Dm(e,t,r,n,i);break e}else if(r!==i){i=wo(Error(V(424)),t),t=Dm(e,t,r,n,i);break e}else for(Xt=Fr(t.stateNode.containerInfo.firstChild),Zt=t,$e=!0,In=null,n=Wg(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(go(),r===i){t=cr(e,t,n);break e}kt(e,t,r,n)}t=t.child}return t;case 5:return Yg(t),e===null&&Nd(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,Dd(r,i)?a=null:o!==null&&Dd(r,o)&&(t.flags|=32),yv(e,t),kt(e,t,a,n),t.child;case 6:return e===null&&Nd(t),null;case 13:return Sv(e,t,n);case 4:return If(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=vo(t,null,r,n):kt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bn(r,i),Pm(e,t,r,i,n);case 7:return kt(e,t,t.pendingProps,n),t.child;case 8:return kt(e,t,t.pendingProps.children,n),t.child;case 12:return kt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ne(Ts,r._currentValue),r._currentValue=a,o!==null)if(Pn(o.value,a)){if(o.children===i.children&&!Vt.current){t=cr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var s=l.firstContext;s!==null;){if(s.context===r){if(o.tag===1){s=ar(-1,n&-n),s.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?s.next=s:(s.next=c.next,c.next=s),u.pending=s}}o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),Ud(o.return,n,t),l.lanes|=n;break}s=s.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(V(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ud(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}kt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,fo(t,n),i=hn(i),r=r(i),t.flags|=1,kt(e,t,r,n),t.child;case 14:return r=t.type,i=bn(r,t.pendingProps),i=bn(r.type,i),Am(e,t,r,i,n);case 15:return gv(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bn(r,i),cs(e,t),t.tag=1,Ht(r)?(e=!0,bs(t)):e=!1,fo(t,n),pv(t,r,i),zd(t,r,i,n),Gd(null,t,r,!0,e,n);case 19:return xv(e,t,n);case 22:return vv(e,t,n)}throw Error(V(156,t.tag))};function Nv(e,t){return cg(e,t)}function N_(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(e,t,n,r){return new N_(e,t,n,r)}function Vf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function U_(e){if(typeof e=="function")return Vf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===af)return 11;if(e===lf)return 14}return 2}function zr(e,t){var n=e.alternate;return n===null?(n=fn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ps(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")Vf(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ki:return yi(n.children,i,o,t);case of:a=8,i|=8;break;case cd:return e=fn(12,n,t,i|2),e.elementType=cd,e.lanes=o,e;case dd:return e=fn(13,n,t,i),e.elementType=dd,e.lanes=o,e;case fd:return e=fn(19,n,t,i),e.elementType=fd,e.lanes=o,e;case Ym:return Xs(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jm:a=10;break e;case $m:a=9;break e;case af:a=11;break e;case lf:a=14;break e;case Tr:a=16,r=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=fn(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function yi(e,t,n,r){return e=fn(7,e,r,t),e.lanes=n,e}function Xs(e,t,n,r){return e=fn(22,e,r,t),e.elementType=Ym,e.lanes=n,e.stateNode={isHidden:!1},e}function ld(e,t,n){return e=fn(6,e,null,t),e.lanes=n,e}function sd(e,t,n){return t=fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function B_(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jc(0),this.expirationTimes=jc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hf(e,t,n,r,i,o,a,l,s){return e=new B_(e,t,n,l,s),t===1?(t=1,o===!0&&(t|=8)):t=0,o=fn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cf(o),e}function z_(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Uv(e){if(!e)return Hr;e=e._reactInternals;e:{if(Ci(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var n=e.type;if(Ht(n))return Ug(e,n,t)}return t}function Bv(e,t,n,r,i,o,a,l,s){return e=Hf(n,r,!0,e,i,o,a,l,s),e.context=Uv(null),n=e.current,r=Dt(),i=Br(n),o=ar(r,i),o.callback=t!=null?t:null,Nr(n,o,i),e.current.lanes=i,Ya(e,i,r),Gt(e,r),e}function Zs(e,t,n,r){var i=t.current,o=Dt(),a=Br(i);return n=Uv(n),t.context===null?t.context=n:t.pendingContext=n,t=ar(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Nr(i,t,a),e!==null&&(Ln(e,i,a,o),ls(e,i,a)),a}function Ns(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Gf(e,t){Hm(e,t),(e=e.alternate)&&Hm(e,t)}function V_(){return null}var zv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wf(e){this._internalRoot=e}Ks.prototype.render=Wf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));Zs(e,t,null,null)};Ks.prototype.unmount=Wf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ei(function(){Zs(null,e,null,null)}),t[sr]=null}};function Ks(e){this._internalRoot=e}Ks.prototype.unstable_scheduleHydration=function(e){if(e){var t=vg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pr.length&&t!==0&&t<Pr[n].priority;n++);Pr.splice(n,0,e),n===0&&wg(e)}};function jf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gm(){}function H_(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Ns(a);o.call(u)}}var a=Bv(t,r,e,0,null,!1,!1,"",Gm);return e._reactRootContainer=a,e[sr]=a.current,Ua(e.nodeType===8?e.parentNode:e),Ei(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Ns(s);l.call(u)}}var s=Hf(e,0,!1,null,null,!1,!1,"",Gm);return e._reactRootContainer=s,e[sr]=s.current,Ua(e.nodeType===8?e.parentNode:e),Ei(function(){Zs(t,s,n,r)}),s}function Qs(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var l=i;i=function(){var s=Ns(a);l.call(s)}}Zs(t,a,e,i)}else a=H_(n,t,e,i,r);return Ns(a)}mg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=wa(t.pendingLanes);n!==0&&(cf(t,n|1),Gt(t,et()),(Ee&6)===0&&(So=et()+500,jr()))}break;case 13:Ei(function(){var r=ur(e,1);if(r!==null){var i=Dt();Ln(r,e,1,i)}}),Gf(e,1)}};df=function(e){if(e.tag===13){var t=ur(e,134217728);if(t!==null){var n=Dt();Ln(t,e,134217728,n)}Gf(e,134217728)}};gg=function(e){if(e.tag===13){var t=Br(e),n=ur(e,t);if(n!==null){var r=Dt();Ln(n,e,t,r)}Gf(e,t)}};vg=function(){return Ae};yg=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}};_d=function(e,t,n){switch(t){case"input":if(md(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Hs(r);if(!i)throw Error(V(90));Zm(r),md(r,i)}}}break;case"textarea":qm(e,n);break;case"select":t=n.value,t!=null&&lo(e,!!n.multiple,t,!1)}};ig=Uf;og=Ei;var G_={usingClientEntryPoint:!1,Events:[Za,eo,Hs,ng,rg,Uf]},ma={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W_={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sg(e),e===null?null:e.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||V_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(ga=__REACT_DEVTOOLS_GLOBAL_HOOK__,!ga.isDisabled&&ga.supportsFiber))try{Us=ga.inject(W_),Bn=ga}catch(e){}var ga;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G_;Qt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jf(t))throw Error(V(200));return z_(e,t,null,n)};Qt.createRoot=function(e,t){if(!jf(e))throw Error(V(299));var n=!1,r="",i=zv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Hf(e,1,!1,null,null,n,!1,r,i),e[sr]=t.current,Ua(e.nodeType===8?e.parentNode:e),new Wf(t)};Qt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=sg(t),e=e===null?null:e.stateNode,e};Qt.flushSync=function(e){return Ei(e)};Qt.hydrate=function(e,t,n){if(!qs(t))throw Error(V(200));return Qs(null,e,t,!0,n)};Qt.hydrateRoot=function(e,t,n){if(!jf(e))throw Error(V(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=zv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Bv(t,null,e,1,n!=null?n:null,i,!1,o,a),e[sr]=t.current,Ua(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ks(t)};Qt.render=function(e,t,n){if(!qs(t))throw Error(V(200));return Qs(null,e,t,!1,n)};Qt.unmountComponentAtNode=function(e){if(!qs(e))throw Error(V(40));return e._reactRootContainer?(Ei(function(){Qs(null,null,e,!1,function(){e._reactRootContainer=null,e[sr]=null})}),!0):!1};Qt.unstable_batchedUpdates=Uf;Qt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qs(n))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return Qs(e,t,n,!1,r)};Qt.version="18.3.1-next-f1338f8080-20240426"});var Wv=de((nT,Gv)=>{"use strict";function Hv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hv)}catch(e){console.error(e)}}Hv(),Gv.exports=Vv()});var Yf=de($f=>{"use strict";var jv=Wv();$f.createRoot=jv.createRoot,$f.hydrateRoot=jv.hydrateRoot;var rT});var qa=de(Js=>{"use strict";Js.byteLength=X_;Js.toByteArray=K_;Js.fromByteArray=J_;var Vn=[],gn=[],Y_=typeof Uint8Array!="undefined"?Uint8Array:Array,Xf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ii=0,Jv=Xf.length;Ii<Jv;++Ii)Vn[Ii]=Xf[Ii],gn[Xf.charCodeAt(Ii)]=Ii;var Ii,Jv;gn[45]=62;gn[95]=63;function e1(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function X_(e){var t=e1(e),n=t[0],r=t[1];return(n+r)*3/4-r}function Z_(e,t,n){return(t+n)*3/4-n}function K_(e){var t,n=e1(e),r=n[0],i=n[1],o=new Y_(Z_(e,r,i)),a=0,l=i>0?r-4:r,s;for(s=0;s<l;s+=4)t=gn[e.charCodeAt(s)]<<18|gn[e.charCodeAt(s+1)]<<12|gn[e.charCodeAt(s+2)]<<6|gn[e.charCodeAt(s+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=t&255;return i===2&&(t=gn[e.charCodeAt(s)]<<2|gn[e.charCodeAt(s+1)]>>4,o[a++]=t&255),i===1&&(t=gn[e.charCodeAt(s)]<<10|gn[e.charCodeAt(s+1)]<<4|gn[e.charCodeAt(s+2)]>>2,o[a++]=t>>8&255,o[a++]=t&255),o}function q_(e){return Vn[e>>18&63]+Vn[e>>12&63]+Vn[e>>6&63]+Vn[e&63]}function Q_(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(q_(r));return i.join("")}function J_(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,l=n-r;a<l;a+=o)i.push(Q_(e,a,a+o>l?l:a+o));return r===1?(t=e[n-1],i.push(Vn[t>>2]+Vn[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(Vn[t>>10]+Vn[t>>4&63]+Vn[t<<2&63]+"=")),i.join("")}});var x1=de((hT,Co)=>{"use strict";function bo(e){let t=e.length;for(;--t>=0;)e[t]=0}var eE=0,a1=1,tE=2,nE=3,rE=258,t0=29,rl=256,Ja=rl+1+t0,Eo=30,n0=19,l1=2*Ja+1,Ti=15,Zf=16,iE=7,r0=256,s1=16,u1=17,c1=18,Jf=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),eu=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),oE=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),d1=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aE=512,fr=new Array((Ja+2)*2);bo(fr);var Qa=new Array(Eo*2);bo(Qa);var el=new Array(aE);bo(el);var tl=new Array(rE-nE+1);bo(tl);var i0=new Array(t0);bo(i0);var tu=new Array(Eo);bo(tu);function Kf(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}var f1,p1,h1;function qf(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}var m1=e=>e<256?el[e]:el[256+(e>>>7)],nl=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Wt=(e,t,n)=>{e.bi_valid>Zf-n?(e.bi_buf|=t<<e.bi_valid&65535,nl(e,e.bi_buf),e.bi_buf=t>>Zf-e.bi_valid,e.bi_valid+=n-Zf):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Hn=(e,t,n)=>{Wt(e,n[t*2],n[t*2+1])},g1=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},lE=e=>{e.bi_valid===16?(nl(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},sE=(e,t)=>{let n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,s=t.stat_desc.max_length,u,c,p,d,g,y,v=0;for(d=0;d<=Ti;d++)e.bl_count[d]=0;for(n[e.heap[e.heap_max]*2+1]=0,u=e.heap_max+1;u<l1;u++)c=e.heap[u],d=n[n[c*2+1]*2+1]+1,d>s&&(d=s,v++),n[c*2+1]=d,!(c>r)&&(e.bl_count[d]++,g=0,c>=l&&(g=a[c-l]),y=n[c*2],e.opt_len+=y*(d+g),o&&(e.static_len+=y*(i[c*2+1]+g)));if(v!==0){do{for(d=s-1;e.bl_count[d]===0;)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[s]--,v-=2}while(v>0);for(d=s;d!==0;d--)for(c=e.bl_count[d];c!==0;)p=e.heap[--u],!(p>r)&&(n[p*2+1]!==d&&(e.opt_len+=(d-n[p*2+1])*n[p*2],n[p*2+1]=d),c--)}},v1=(e,t,n)=>{let r=new Array(Ti+1),i=0,o,a;for(o=1;o<=Ti;o++)i=i+n[o-1]<<1,r[o]=i;for(a=0;a<=t;a++){let l=e[a*2+1];l!==0&&(e[a*2]=g1(r[l]++,l))}},uE=()=>{let e,t,n,r,i,o=new Array(Ti+1);for(n=0,r=0;r<t0-1;r++)for(i0[r]=n,e=0;e<1<<Jf[r];e++)tl[n++]=r;for(tl[n-1]=r,i=0,r=0;r<16;r++)for(tu[r]=i,e=0;e<1<<eu[r];e++)el[i++]=r;for(i>>=7;r<Eo;r++)for(tu[r]=i<<7,e=0;e<1<<eu[r]-7;e++)el[256+i++]=r;for(t=0;t<=Ti;t++)o[t]=0;for(e=0;e<=143;)fr[e*2+1]=8,e++,o[8]++;for(;e<=255;)fr[e*2+1]=9,e++,o[9]++;for(;e<=279;)fr[e*2+1]=7,e++,o[7]++;for(;e<=287;)fr[e*2+1]=8,e++,o[8]++;for(v1(fr,Ja+1,o),e=0;e<Eo;e++)Qa[e*2+1]=5,Qa[e*2]=g1(e,5);f1=new Kf(fr,Jf,rl+1,Ja,Ti),p1=new Kf(Qa,eu,0,Eo,Ti),h1=new Kf(new Array(0),oE,0,n0,iE)},y1=e=>{let t;for(t=0;t<Ja;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Eo;t++)e.dyn_dtree[t*2]=0;for(t=0;t<n0;t++)e.bl_tree[t*2]=0;e.dyn_ltree[r0*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},w1=e=>{e.bi_valid>8?nl(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},t1=(e,t,n,r)=>{let i=t*2,o=n*2;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},Qf=(e,t,n)=>{let r=e.heap[n],i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&t1(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!t1(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},n1=(e,t,n)=>{let r,i,o=0,a,l;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+o++]&255,r+=(e.pending_buf[e.sym_buf+o++]&255)<<8,i=e.pending_buf[e.sym_buf+o++],r===0?Hn(e,i,t):(a=tl[i],Hn(e,a+rl+1,t),l=Jf[a],l!==0&&(i-=i0[a],Wt(e,i,l)),r--,a=m1(r),Hn(e,a,n),l=eu[a],l!==0&&(r-=tu[a],Wt(e,r,l)));while(o<e.sym_next);Hn(e,r0,t)},e0=(e,t)=>{let n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,l,s=-1,u;for(e.heap_len=0,e.heap_max=l1,a=0;a<o;a++)n[a*2]!==0?(e.heap[++e.heap_len]=s=a,e.depth[a]=0):n[a*2+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=s<2?++s:0,n[u*2]=1,e.depth[u]=0,e.opt_len--,i&&(e.static_len-=r[u*2+1]);for(t.max_code=s,a=e.heap_len>>1;a>=1;a--)Qf(e,n,a);u=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Qf(e,n,1),l=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=l,n[u*2]=n[a*2]+n[l*2],e.depth[u]=(e.depth[a]>=e.depth[l]?e.depth[a]:e.depth[l])+1,n[a*2+1]=n[l*2+1]=u,e.heap[1]=u++,Qf(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],sE(e,t),v1(n,s,e.bl_count)},r1=(e,t,n)=>{let r,i=-1,o,a=t[0*2+1],l=0,s=7,u=4;for(a===0&&(s=138,u=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)o=a,a=t[(r+1)*2+1],!(++l<s&&o===a)&&(l<u?e.bl_tree[o*2]+=l:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[s1*2]++):l<=10?e.bl_tree[u1*2]++:e.bl_tree[c1*2]++,l=0,i=o,a===0?(s=138,u=3):o===a?(s=6,u=3):(s=7,u=4))},i1=(e,t,n)=>{let r,i=-1,o,a=t[0*2+1],l=0,s=7,u=4;for(a===0&&(s=138,u=3),r=0;r<=n;r++)if(o=a,a=t[(r+1)*2+1],!(++l<s&&o===a)){if(l<u)do Hn(e,o,e.bl_tree);while(--l!==0);else o!==0?(o!==i&&(Hn(e,o,e.bl_tree),l--),Hn(e,s1,e.bl_tree),Wt(e,l-3,2)):l<=10?(Hn(e,u1,e.bl_tree),Wt(e,l-3,3)):(Hn(e,c1,e.bl_tree),Wt(e,l-11,7));l=0,i=o,a===0?(s=138,u=3):o===a?(s=6,u=3):(s=7,u=4)}},cE=e=>{let t;for(r1(e,e.dyn_ltree,e.l_desc.max_code),r1(e,e.dyn_dtree,e.d_desc.max_code),e0(e,e.bl_desc),t=n0-1;t>=3&&e.bl_tree[d1[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},dE=(e,t,n,r)=>{let i;for(Wt(e,t-257,5),Wt(e,n-1,5),Wt(e,r-4,4),i=0;i<r;i++)Wt(e,e.bl_tree[d1[i]*2+1],3);i1(e,e.dyn_ltree,t-1),i1(e,e.dyn_dtree,n-1)},fE=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(n=32;n<rl;n++)if(e.dyn_ltree[n*2]!==0)return 1;return 0},o1=!1,pE=e=>{o1||(uE(),o1=!0),e.l_desc=new qf(e.dyn_ltree,f1),e.d_desc=new qf(e.dyn_dtree,p1),e.bl_desc=new qf(e.bl_tree,h1),e.bi_buf=0,e.bi_valid=0,y1(e)},S1=(e,t,n,r)=>{Wt(e,(eE<<1)+(r?1:0),3),w1(e),nl(e,n),nl(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},hE=e=>{Wt(e,a1<<1,3),Hn(e,r0,fr),lE(e)},mE=(e,t,n,r)=>{let i,o,a=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=fE(e)),e0(e,e.l_desc),e0(e,e.d_desc),a=cE(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&t!==-1?S1(e,t,n,r):e.strategy===4||o===i?(Wt(e,(a1<<1)+(r?1:0),3),n1(e,fr,Qa)):(Wt(e,(tE<<1)+(r?1:0),3),dE(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),n1(e,e.dyn_ltree,e.dyn_dtree)),y1(e),r&&w1(e)},gE=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(tl[n]+rl+1)*2]++,e.dyn_dtree[m1(t)*2]++),e.sym_next===e.sym_end);Co.exports._tr_init=pE;Co.exports._tr_stored_block=S1;Co.exports._tr_flush_block=mE;Co.exports._tr_tally=gE;Co.exports._tr_align=hE});var o0=de((mT,_1)=>{"use strict";var vE=(e,t,n,r)=>{let i=e&65535|0,o=e>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0};_1.exports=vE});var a0=de((gT,E1)=>{"use strict";var yE=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},wE=new Uint32Array(yE()),SE=(e,t,n,r)=>{let i=wE,o=r+n;e^=-1;for(let a=r;a<o;a++)e=e>>>8^i[(e^t[a])&255];return e^-1};E1.exports=SE});var nu=de((vT,b1)=>{"use strict";b1.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var Xr=de((yT,C1)=>{"use strict";C1.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var O1=de((wT,$n)=>{"use strict";var{_tr_init:xE,_tr_stored_block:u0,_tr_flush_block:_E,_tr_tally:Qr,_tr_align:EE}=x1(),P1=o0(),Zr=a0(),bE=nu(),{Z_NO_FLUSH:Jr,Z_PARTIAL_FLUSH:CE,Z_FULL_FLUSH:IE,Z_FINISH:vn,Z_BLOCK:I1,Z_OK:St,Z_STREAM_END:T1,Z_STREAM_ERROR:Wn,Z_DATA_ERROR:TE,Z_BUF_ERROR:l0,Z_DEFAULT_COMPRESSION:LE,Z_FILTERED:PE,Z_HUFFMAN_ONLY:ru,Z_RLE:AE,Z_FIXED:kE,Z_DEFAULT_STRATEGY:DE,Z_UNKNOWN:ME,Z_DEFLATED:iu}=Xr(),RE=9,OE=15,FE=8,NE=29,UE=256,c0=UE+1+NE,BE=30,zE=19,VE=2*c0+1,HE=15,xe=3,qr=258,jn=qr+xe+1,GE=32,To=42,g0=57,d0=69,f0=73,p0=91,h0=103,Li=113,ol=666,Ot=1,Po=2,Ai=3,Ao=4,WE=3,Pi=(e,t)=>(e.msg=bE[t],t),L1=e=>e*2-(e>4?9:0),Kr=e=>{let t=e.length;for(;--t>=0;)e[t]=0},jE=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)},$E=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,ei=$E,Jt=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},en=(e,t)=>{_E(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Jt(e.strm)},Te=(e,t)=>{e.pending_buf[e.pending++]=t},il=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},m0=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=P1(e.adler,t,i,n):e.state.wrap===2&&(e.adler=Zr(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},A1=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,o,a=e.prev_length,l=e.nice_match,s=e.strstart>e.w_size-jn?e.strstart-(e.w_size-jn):0,u=e.window,c=e.w_mask,p=e.prev,d=e.strstart+qr,g=u[r+a-1],y=u[r+a];e.prev_length>=e.good_match&&(n>>=2),l>e.lookahead&&(l=e.lookahead);do if(i=t,!(u[i+a]!==y||u[i+a-1]!==g||u[i]!==u[r]||u[++i]!==u[r+1])){r+=2,i++;do;while(u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&r<d);if(o=qr-(d-r),r=d-qr,o>a){if(e.match_start=t,a=o,o>=l)break;g=u[r+a-1],y=u[r+a]}}while((t=p[t&c])>s&&--n!==0);return a<=e.lookahead?a:e.lookahead},Lo=e=>{let t=e.w_size,n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-jn)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),jE(e),r+=t),e.strm.avail_in===0)break;if(n=m0(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=xe)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=ei(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=ei(e,e.ins_h,e.window[i+xe-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<xe)););}while(e.lookahead<jn&&e.strm.avail_in!==0)},k1=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,o,a=0,l=e.strm.avail_in;do{if(r=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>o&&(r=o),r<n&&(r===0&&t!==vn||t===Jr||r!==i+e.strm.avail_in)))break;a=t===vn&&r===i+e.strm.avail_in?1:0,u0(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,Jt(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(m0(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(a===0);return l-=e.strm.avail_in,l&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?Ao:t!==Jr&&t!==vn&&e.strm.avail_in===0&&e.strstart===e.block_start?Po:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(m0(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,n=o>e.w_size?e.w_size:o,i=e.strstart-e.block_start,(i>=n||(i||t===vn)&&t!==Jr&&e.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,a=t===vn&&e.strm.avail_in===0&&r===i?1:0,u0(e,e.block_start,r,a),e.block_start+=r,Jt(e.strm)),a?Ai:Ot)},s0=(e,t)=>{let n,r;for(;;){if(e.lookahead<jn){if(Lo(e),e.lookahead<jn&&t===Jr)return Ot;if(e.lookahead===0)break}if(n=0,e.lookahead>=xe&&(e.ins_h=ei(e,e.ins_h,e.window[e.strstart+xe-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-jn&&(e.match_length=A1(e,n)),e.match_length>=xe)if(r=Qr(e,e.strstart-e.match_start,e.match_length-xe),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=xe){e.match_length--;do e.strstart++,e.ins_h=ei(e,e.ins_h,e.window[e.strstart+xe-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ei(e,e.ins_h,e.window[e.strstart+1]);else r=Qr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(en(e,!1),e.strm.avail_out===0))return Ot}return e.insert=e.strstart<xe-1?e.strstart:xe-1,t===vn?(en(e,!0),e.strm.avail_out===0?Ai:Ao):e.sym_next&&(en(e,!1),e.strm.avail_out===0)?Ot:Po},Io=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<jn){if(Lo(e),e.lookahead<jn&&t===Jr)return Ot;if(e.lookahead===0)break}if(n=0,e.lookahead>=xe&&(e.ins_h=ei(e,e.ins_h,e.window[e.strstart+xe-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=xe-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-jn&&(e.match_length=A1(e,n),e.match_length<=5&&(e.strategy===PE||e.match_length===xe&&e.strstart-e.match_start>4096)&&(e.match_length=xe-1)),e.prev_length>=xe&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-xe,r=Qr(e,e.strstart-1-e.prev_match,e.prev_length-xe),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=ei(e,e.ins_h,e.window[e.strstart+xe-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=xe-1,e.strstart++,r&&(en(e,!1),e.strm.avail_out===0))return Ot}else if(e.match_available){if(r=Qr(e,0,e.window[e.strstart-1]),r&&en(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ot}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Qr(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<xe-1?e.strstart:xe-1,t===vn?(en(e,!0),e.strm.avail_out===0?Ai:Ao):e.sym_next&&(en(e,!1),e.strm.avail_out===0)?Ot:Po},YE=(e,t)=>{let n,r,i,o,a=e.window;for(;;){if(e.lookahead<=qr){if(Lo(e),e.lookahead<=qr&&t===Jr)return Ot;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=xe&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+qr;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=qr-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=xe?(n=Qr(e,1,e.match_length-xe),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Qr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(en(e,!1),e.strm.avail_out===0))return Ot}return e.insert=0,t===vn?(en(e,!0),e.strm.avail_out===0?Ai:Ao):e.sym_next&&(en(e,!1),e.strm.avail_out===0)?Ot:Po},XE=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(Lo(e),e.lookahead===0)){if(t===Jr)return Ot;break}if(e.match_length=0,n=Qr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(en(e,!1),e.strm.avail_out===0))return Ot}return e.insert=0,t===vn?(en(e,!0),e.strm.avail_out===0?Ai:Ao):e.sym_next&&(en(e,!1),e.strm.avail_out===0)?Ot:Po};function Gn(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var al=[new Gn(0,0,0,0,k1),new Gn(4,4,8,4,s0),new Gn(4,5,16,8,s0),new Gn(4,6,32,32,s0),new Gn(4,4,16,16,Io),new Gn(8,16,32,32,Io),new Gn(8,16,128,128,Io),new Gn(8,32,128,256,Io),new Gn(32,128,258,1024,Io),new Gn(32,258,258,4096,Io)],ZE=e=>{e.window_size=2*e.w_size,Kr(e.head),e.max_lazy_match=al[e.level].max_lazy,e.good_match=al[e.level].good_length,e.nice_match=al[e.level].nice_length,e.max_chain_length=al[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=xe-1,e.match_available=0,e.ins_h=0};function KE(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=iu,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(VE*2),this.dyn_dtree=new Uint16Array((2*BE+1)*2),this.bl_tree=new Uint16Array((2*zE+1)*2),Kr(this.dyn_ltree),Kr(this.dyn_dtree),Kr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(HE+1),this.heap=new Uint16Array(2*c0+1),Kr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*c0+1),Kr(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var ll=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.status!==To&&t.status!==g0&&t.status!==d0&&t.status!==f0&&t.status!==p0&&t.status!==h0&&t.status!==Li&&t.status!==ol?1:0},D1=e=>{if(ll(e))return Pi(e,Wn);e.total_in=e.total_out=0,e.data_type=ME;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?g0:t.wrap?To:Li,e.adler=t.wrap===2?0:1,t.last_flush=-2,xE(t),St},M1=e=>{let t=D1(e);return t===St&&ZE(e.state),t},qE=(e,t)=>ll(e)||e.state.wrap!==2?Wn:(e.state.gzhead=t,St),R1=(e,t,n,r,i,o)=>{if(!e)return Wn;let a=1;if(t===LE&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>RE||n!==iu||r<8||r>15||t<0||t>9||o<0||o>kE||r===8&&a!==1)return Pi(e,Wn);r===8&&(r=9);let l=new KE;return e.state=l,l.strm=e,l.status=To,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+xe-1)/xe),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=t,l.strategy=o,l.method=n,M1(e)},QE=(e,t)=>R1(e,t,iu,OE,FE,DE),JE=(e,t)=>{if(ll(e)||t>I1||t<0)return e?Pi(e,Wn):Wn;let n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===ol&&t!==vn)return Pi(e,e.avail_out===0?l0:Wn);let r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(Jt(e),e.avail_out===0)return n.last_flush=-1,St}else if(e.avail_in===0&&L1(t)<=L1(r)&&t!==vn)return Pi(e,l0);if(n.status===ol&&e.avail_in!==0)return Pi(e,l0);if(n.status===To&&n.wrap===0&&(n.status=Li),n.status===To){let i=iu+(n.w_bits-8<<4)<<8,o=-1;if(n.strategy>=ru||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,i|=o<<6,n.strstart!==0&&(i|=GE),i+=31-i%31,il(n,i),n.strstart!==0&&(il(n,e.adler>>>16),il(n,e.adler&65535)),e.adler=1,n.status=Li,Jt(e),n.pending!==0)return n.last_flush=-1,St}if(n.status===g0){if(e.adler=0,Te(n,31),Te(n,139),Te(n,8),n.gzhead)Te(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Te(n,n.gzhead.time&255),Te(n,n.gzhead.time>>8&255),Te(n,n.gzhead.time>>16&255),Te(n,n.gzhead.time>>24&255),Te(n,n.level===9?2:n.strategy>=ru||n.level<2?4:0),Te(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Te(n,n.gzhead.extra.length&255),Te(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Zr(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=d0;else if(Te(n,0),Te(n,0),Te(n,0),Te(n,0),Te(n,0),Te(n,n.level===9?2:n.strategy>=ru||n.level<2?4:0),Te(n,WE),n.status=Li,Jt(e),n.pending!==0)return n.last_flush=-1,St}if(n.status===d0){if(n.gzhead.extra){let i=n.pending,o=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+o>n.pending_buf_size;){let l=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+l),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=Zr(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=l,Jt(e),n.pending!==0)return n.last_flush=-1,St;i=0,o-=l}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>i&&(e.adler=Zr(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=f0}if(n.status===f0){if(n.gzhead.name){let i=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Zr(e.adler,n.pending_buf,n.pending-i,i)),Jt(e),n.pending!==0)return n.last_flush=-1,St;i=0}n.gzindex<n.gzhead.name.length?o=n.gzhead.name.charCodeAt(n.gzindex++)&255:o=0,Te(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Zr(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=p0}if(n.status===p0){if(n.gzhead.comment){let i=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Zr(e.adler,n.pending_buf,n.pending-i,i)),Jt(e),n.pending!==0)return n.last_flush=-1,St;i=0}n.gzindex<n.gzhead.comment.length?o=n.gzhead.comment.charCodeAt(n.gzindex++)&255:o=0,Te(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Zr(e.adler,n.pending_buf,n.pending-i,i))}n.status=h0}if(n.status===h0){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Jt(e),n.pending!==0))return n.last_flush=-1,St;Te(n,e.adler&255),Te(n,e.adler>>8&255),e.adler=0}if(n.status=Li,Jt(e),n.pending!==0)return n.last_flush=-1,St}if(e.avail_in!==0||n.lookahead!==0||t!==Jr&&n.status!==ol){let i=n.level===0?k1(n,t):n.strategy===ru?XE(n,t):n.strategy===AE?YE(n,t):al[n.level].func(n,t);if((i===Ai||i===Ao)&&(n.status=ol),i===Ot||i===Ai)return e.avail_out===0&&(n.last_flush=-1),St;if(i===Po&&(t===CE?EE(n):t!==I1&&(u0(n,0,0,!1),t===IE&&(Kr(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Jt(e),e.avail_out===0))return n.last_flush=-1,St}return t!==vn?St:n.wrap<=0?T1:(n.wrap===2?(Te(n,e.adler&255),Te(n,e.adler>>8&255),Te(n,e.adler>>16&255),Te(n,e.adler>>24&255),Te(n,e.total_in&255),Te(n,e.total_in>>8&255),Te(n,e.total_in>>16&255),Te(n,e.total_in>>24&255)):(il(n,e.adler>>>16),il(n,e.adler&65535)),Jt(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?St:T1)},eb=e=>{if(ll(e))return Wn;let t=e.state.status;return e.state=null,t===Li?Pi(e,TE):St},tb=(e,t)=>{let n=t.length;if(ll(e))return Wn;let r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==To||r.lookahead)return Wn;if(i===1&&(e.adler=P1(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(Kr(r.head),r.strstart=0,r.block_start=0,r.insert=0);let s=new Uint8Array(r.w_size);s.set(t.subarray(n-r.w_size,n),0),t=s,n=r.w_size}let o=e.avail_in,a=e.next_in,l=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Lo(r);r.lookahead>=xe;){let s=r.strstart,u=r.lookahead-(xe-1);do r.ins_h=ei(r,r.ins_h,r.window[s+xe-1]),r.prev[s&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=s,s++;while(--u);r.strstart=s,r.lookahead=xe-1,Lo(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=xe-1,r.match_available=0,e.next_in=a,e.input=l,e.avail_in=o,r.wrap=i,St};$n.exports.deflateInit=QE;$n.exports.deflateInit2=R1;$n.exports.deflateReset=M1;$n.exports.deflateResetKeep=D1;$n.exports.deflateSetHeader=qE;$n.exports.deflate=JE;$n.exports.deflateEnd=eb;$n.exports.deflateSetDictionary=tb;$n.exports.deflateInfo="pako deflate (from Nodeca project)"});var y0=de((ST,v0)=>{"use strict";var nb=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);v0.exports.assign=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(let r in n)nb(n,r)&&(e[r]=n[r])}}return e};v0.exports.flattenChunks=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;let n=new Uint8Array(t);for(let r=0,i=0,o=e.length;r<o;r++){let a=e[r];n.set(a,i),i+=a.length}return n}});var w0=de((xT,ou)=>{"use strict";var F1=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){F1=!1}var sl=new Uint8Array(256);for(let e=0;e<256;e++)sl[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;sl[254]=sl[254]=1;ou.exports.string2buf=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,o,a=e.length,l=0;for(i=0;i<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(l),o=0,i=0;o<l;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t};var rb=(e,t)=>{if(t<65534&&e.subarray&&F1)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};ou.exports.buf2string=(e,t)=>{let n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i,o=new Array(n*2);for(i=0,r=0;r<n;){let a=e[r++];if(a<128){o[i++]=a;continue}let l=sl[a];if(l>4){o[i++]=65533,r+=l-1;continue}for(a&=l===2?31:l===3?15:7;l>1&&r<n;)a=a<<6|e[r++]&63,l--;if(l>1){o[i++]=65533;continue}a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|a&1023)}return rb(o,i)};ou.exports.utf8border=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+sl[e[n]]>t?n:t}});var S0=de((_T,N1)=>{"use strict";function ib(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}N1.exports=ib});var V1=de((ET,ko)=>{"use strict";var ul=O1(),U1=y0(),B1=w0(),x0=nu(),ob=S0(),z1=Object.prototype.toString,{Z_NO_FLUSH:ab,Z_SYNC_FLUSH:lb,Z_FULL_FLUSH:sb,Z_FINISH:ub,Z_OK:au,Z_STREAM_END:cb,Z_DEFAULT_COMPRESSION:db,Z_DEFAULT_STRATEGY:fb,Z_DEFLATED:pb}=Xr();function cl(e){this.options=U1.assign({level:db,method:pb,chunkSize:16384,windowBits:15,memLevel:8,strategy:fb},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ob,this.strm.avail_out=0;let n=ul.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==au)throw new Error(x0[n]);if(t.header&&ul.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=B1.string2buf(t.dictionary):z1.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=ul.deflateSetDictionary(this.strm,r),n!==au)throw new Error(x0[n]);this._dict_set=!0}}cl.prototype.push=function(e,t){let n=this.strm,r=this.options.chunkSize,i,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?ub:ab,typeof e=="string"?n.input=B1.string2buf(e):z1.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===lb||o===sb)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=ul.deflate(n,o),i===cb)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=ul.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===au;if(n.avail_out===0){this.onData(n.output);continue}if(o>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};cl.prototype.onData=function(e){this.chunks.push(e)};cl.prototype.onEnd=function(e){e===au&&(this.result=U1.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function _0(e,t){let n=new cl(t);if(n.push(e,!0),n.err)throw n.msg||x0[n.err];return n.result}function hb(e,t){return t=t||{},t.raw=!0,_0(e,t)}function mb(e,t){return t=t||{},t.gzip=!0,_0(e,t)}ko.exports.Deflate=cl;ko.exports.deflate=_0;ko.exports.deflateRaw=hb;ko.exports.gzip=mb;ko.exports.constants=Xr()});var G1=de((bT,H1)=>{"use strict";H1.exports=function(t,n){let r,i,o,a,l,s,u,c,p,d,g,y,v,S,m,f,h,w,I,T,L,A,O,R,F=t.state;r=t.next_in,O=t.input,i=r+(t.avail_in-5),o=t.next_out,R=t.output,a=o-(n-t.avail_out),l=o+(t.avail_out-257),s=F.dmax,u=F.wsize,c=F.whave,p=F.wnext,d=F.window,g=F.hold,y=F.bits,v=F.lencode,S=F.distcode,m=(1<<F.lenbits)-1,f=(1<<F.distbits)-1;e:do{y<15&&(g+=O[r++]<<y,y+=8,g+=O[r++]<<y,y+=8),h=v[g&m];t:for(;;){if(w=h>>>24,g>>>=w,y-=w,w=h>>>16&255,w===0)R[o++]=h&65535;else if(w&16){I=h&65535,w&=15,w&&(y<w&&(g+=O[r++]<<y,y+=8),I+=g&(1<<w)-1,g>>>=w,y-=w),y<15&&(g+=O[r++]<<y,y+=8,g+=O[r++]<<y,y+=8),h=S[g&f];n:for(;;){if(w=h>>>24,g>>>=w,y-=w,w=h>>>16&255,w&16){if(T=h&65535,w&=15,y<w&&(g+=O[r++]<<y,y+=8,y<w&&(g+=O[r++]<<y,y+=8)),T+=g&(1<<w)-1,T>s){t.msg="invalid distance too far back",F.mode=16209;break e}if(g>>>=w,y-=w,w=o-a,T>w){if(w=T-w,w>c&&F.sane){t.msg="invalid distance too far back",F.mode=16209;break e}if(L=0,A=d,p===0){if(L+=u-w,w<I){I-=w;do R[o++]=d[L++];while(--w);L=o-T,A=R}}else if(p<w){if(L+=u+p-w,w-=p,w<I){I-=w;do R[o++]=d[L++];while(--w);if(L=0,p<I){w=p,I-=w;do R[o++]=d[L++];while(--w);L=o-T,A=R}}}else if(L+=p-w,w<I){I-=w;do R[o++]=d[L++];while(--w);L=o-T,A=R}for(;I>2;)R[o++]=A[L++],R[o++]=A[L++],R[o++]=A[L++],I-=3;I&&(R[o++]=A[L++],I>1&&(R[o++]=A[L++]))}else{L=o-T;do R[o++]=R[L++],R[o++]=R[L++],R[o++]=R[L++],I-=3;while(I>2);I&&(R[o++]=R[L++],I>1&&(R[o++]=R[L++]))}}else if((w&64)===0){h=S[(h&65535)+(g&(1<<w)-1)];continue n}else{t.msg="invalid distance code",F.mode=16209;break e}break}}else if((w&64)===0){h=v[(h&65535)+(g&(1<<w)-1)];continue t}else if(w&32){F.mode=16191;break e}else{t.msg="invalid literal/length code",F.mode=16209;break e}break}}while(r<i&&o<l);I=y>>3,r-=I,y-=I<<3,g&=(1<<y)-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=o<l?257+(l-o):257-(o-l),F.hold=g,F.bits=y}});var j1=de((CT,W1)=>{"use strict";var gb=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),vb=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),yb=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),wb=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Sb=(e,t,n,r,i,o,a,l)=>{let s=l.bits,u=0,c=0,p=0,d=0,g=0,y=0,v=0,S=0,m=0,f=0,h,w,I,T,L,A=null,O,R=new Uint16Array(16),F=new Uint16Array(16),q=null,D,b,k;for(u=0;u<=15;u++)R[u]=0;for(c=0;c<r;c++)R[t[n+c]]++;for(g=s,d=15;d>=1&&R[d]===0;d--);if(g>d&&(g=d),d===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,l.bits=1,0;for(p=1;p<d&&R[p]===0;p++);for(g<p&&(g=p),S=1,u=1;u<=15;u++)if(S<<=1,S-=R[u],S<0)return-1;if(S>0&&(e===0||d!==1))return-1;for(F[1]=0,u=1;u<15;u++)F[u+1]=F[u]+R[u];for(c=0;c<r;c++)t[n+c]!==0&&(a[F[t[n+c]]++]=c);if(e===0?(A=q=a,O=20):e===1?(A=gb,q=vb,O=257):(A=yb,q=wb,O=0),f=0,c=0,u=p,L=o,y=g,v=0,I=-1,m=1<<g,T=m-1,e===1&&m>852||e===2&&m>592)return 1;for(;;){D=u-v,a[c]+1<O?(b=0,k=a[c]):a[c]>=O?(b=q[a[c]-O],k=A[a[c]-O]):(b=96,k=0),h=1<<u-v,w=1<<y,p=w;do w-=h,i[L+(f>>v)+w]=D<<24|b<<16|k|0;while(w!==0);for(h=1<<u-1;f&h;)h>>=1;if(h!==0?(f&=h-1,f+=h):f=0,c++,--R[u]===0){if(u===d)break;u=t[n+a[c]]}if(u>g&&(f&T)!==I){for(v===0&&(v=g),L+=p,y=u-v,S=1<<y;y+v<d&&(S-=R[y+v],!(S<=0));)y++,S<<=1;if(m+=1<<y,e===1&&m>852||e===2&&m>592)return 1;I=f&T,i[I]=g<<24|y<<16|L-o|0}}return f!==0&&(i[L+f]=u-v<<24|64<<16|0),l.bits=g,0};W1.exports=Sb});var Iy=de((IT,An)=>{"use strict";var L0=o0(),Yn=a0(),xb=G1(),dl=j1(),_b=0,vy=1,yy=2,{Z_FINISH:$1,Z_BLOCK:Eb,Z_TREES:lu,Z_OK:ki,Z_STREAM_END:bb,Z_NEED_DICT:Cb,Z_STREAM_ERROR:yn,Z_DATA_ERROR:wy,Z_MEM_ERROR:P0,Z_BUF_ERROR:Ib,Z_DEFLATED:Y1}=Xr(),du=16180,X1=16181,Z1=16182,K1=16183,q1=16184,Q1=16185,J1=16186,ey=16187,ty=16188,ny=16189,cu=16190,pr=16191,E0=16192,ry=16193,b0=16194,iy=16195,oy=16196,ay=16197,ly=16198,su=16199,uu=16200,sy=16201,uy=16202,cy=16203,dy=16204,fy=16205,C0=16206,py=16207,hy=16208,Ye=16209,A0=16210,Sy=16211,Tb=852,Lb=592,Pb=15,Ab=Pb,my=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function kb(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Di=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<du||t.mode>Sy?1:0},xy=e=>{if(Di(e))return yn;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=du,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Tb),t.distcode=t.distdyn=new Int32Array(Lb),t.sane=1,t.back=-1,ki},_y=e=>{if(Di(e))return yn;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,xy(e)},Ey=(e,t)=>{let n;if(Di(e))return yn;let r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?yn:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,_y(e))},by=(e,t)=>{if(!e)return yn;let n=new kb;e.state=n,n.strm=e,n.window=null,n.mode=du;let r=Ey(e,t);return r!==ki&&(e.state=null),r},Db=e=>by(e,Ab),gy=!0,I0,T0,Mb=e=>{if(gy){I0=new Int32Array(512),T0=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(dl(vy,e.lens,0,288,I0,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;dl(yy,e.lens,0,32,T0,0,e.work,{bits:5}),gy=!1}e.lencode=I0,e.lenbits=9,e.distcode=T0,e.distbits=5},Cy=(e,t,n,r)=>{let i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),r-=i,r?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Rb=(e,t)=>{let n,r,i,o,a,l,s,u,c,p,d,g,y,v,S=0,m,f,h,w,I,T,L,A,O=new Uint8Array(4),R,F,q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Di(e)||!e.output||!e.input&&e.avail_in!==0)return yn;n=e.state,n.mode===pr&&(n.mode=E0),a=e.next_out,i=e.output,s=e.avail_out,o=e.next_in,r=e.input,l=e.avail_in,u=n.hold,c=n.bits,p=l,d=s,A=ki;e:for(;;)switch(n.mode){case du:if(n.wrap===0){n.mode=E0;break}for(;c<16;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,O[0]=u&255,O[1]=u>>>8&255,n.check=Yn(n.check,O,2,0),u=0,c=0,n.mode=X1;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=Ye;break}if((u&15)!==Y1){e.msg="unknown compression method",n.mode=Ye;break}if(u>>>=4,c-=4,L=(u&15)+8,n.wbits===0&&(n.wbits=L),L>15||L>n.wbits){e.msg="invalid window size",n.mode=Ye;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=u&512?ny:pr,u=0,c=0;break;case X1:for(;c<16;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}if(n.flags=u,(n.flags&255)!==Y1){e.msg="unknown compression method",n.mode=Ye;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Ye;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(O[0]=u&255,O[1]=u>>>8&255,n.check=Yn(n.check,O,2,0)),u=0,c=0,n.mode=Z1;case Z1:for(;c<32;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(O[0]=u&255,O[1]=u>>>8&255,O[2]=u>>>16&255,O[3]=u>>>24&255,n.check=Yn(n.check,O,4,0)),u=0,c=0,n.mode=K1;case K1:for(;c<16;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(O[0]=u&255,O[1]=u>>>8&255,n.check=Yn(n.check,O,2,0)),u=0,c=0,n.mode=q1;case q1:if(n.flags&1024){for(;c<16;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(O[0]=u&255,O[1]=u>>>8&255,n.check=Yn(n.check,O,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=Q1;case Q1:if(n.flags&1024&&(g=n.length,g>l&&(g=l),g&&(n.head&&(L=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+g),L)),n.flags&512&&n.wrap&4&&(n.check=Yn(n.check,r,g,o)),l-=g,o+=g,n.length-=g),n.length))break e;n.length=0,n.mode=J1;case J1:if(n.flags&2048){if(l===0)break e;g=0;do L=r[o+g++],n.head&&L&&n.length<65536&&(n.head.name+=String.fromCharCode(L));while(L&&g<l);if(n.flags&512&&n.wrap&4&&(n.check=Yn(n.check,r,g,o)),l-=g,o+=g,L)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=ey;case ey:if(n.flags&4096){if(l===0)break e;g=0;do L=r[o+g++],n.head&&L&&n.length<65536&&(n.head.comment+=String.fromCharCode(L));while(L&&g<l);if(n.flags&512&&n.wrap&4&&(n.check=Yn(n.check,r,g,o)),l-=g,o+=g,L)break e}else n.head&&(n.head.comment=null);n.mode=ty;case ty:if(n.flags&512){for(;c<16;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}if(n.wrap&4&&u!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Ye;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=pr;break;case ny:for(;c<32;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}e.adler=n.check=my(u),u=0,c=0,n.mode=cu;case cu:if(n.havedict===0)return e.next_out=a,e.avail_out=s,e.next_in=o,e.avail_in=l,n.hold=u,n.bits=c,Cb;e.adler=n.check=1,n.mode=pr;case pr:if(t===Eb||t===lu)break e;case E0:if(n.last){u>>>=c&7,c-=c&7,n.mode=C0;break}for(;c<3;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}switch(n.last=u&1,u>>>=1,c-=1,u&3){case 0:n.mode=ry;break;case 1:if(Mb(n),n.mode=su,t===lu){u>>>=2,c-=2;break e}break;case 2:n.mode=oy;break;case 3:e.msg="invalid block type",n.mode=Ye}u>>>=2,c-=2;break;case ry:for(u>>>=c&7,c-=c&7;c<32;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Ye;break}if(n.length=u&65535,u=0,c=0,n.mode=b0,t===lu)break e;case b0:n.mode=iy;case iy:if(g=n.length,g){if(g>l&&(g=l),g>s&&(g=s),g===0)break e;i.set(r.subarray(o,o+g),a),l-=g,o+=g,s-=g,a+=g,n.length-=g;break}n.mode=pr;break;case oy:for(;c<14;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}if(n.nlen=(u&31)+257,u>>>=5,c-=5,n.ndist=(u&31)+1,u>>>=5,c-=5,n.ncode=(u&15)+4,u>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Ye;break}n.have=0,n.mode=ay;case ay:for(;n.have<n.ncode;){for(;c<3;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}n.lens[q[n.have++]]=u&7,u>>>=3,c-=3}for(;n.have<19;)n.lens[q[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},A=dl(_b,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,A){e.msg="invalid code lengths set",n.mode=Ye;break}n.have=0,n.mode=ly;case ly:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[u&(1<<n.lenbits)-1],m=S>>>24,f=S>>>16&255,h=S&65535,!(m<=c);){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}if(h<16)u>>>=m,c-=m,n.lens[n.have++]=h;else{if(h===16){for(F=m+2;c<F;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}if(u>>>=m,c-=m,n.have===0){e.msg="invalid bit length repeat",n.mode=Ye;break}L=n.lens[n.have-1],g=3+(u&3),u>>>=2,c-=2}else if(h===17){for(F=m+3;c<F;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}u>>>=m,c-=m,L=0,g=3+(u&7),u>>>=3,c-=3}else{for(F=m+7;c<F;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}u>>>=m,c-=m,L=0,g=11+(u&127),u>>>=7,c-=7}if(n.have+g>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Ye;break}for(;g--;)n.lens[n.have++]=L}}if(n.mode===Ye)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Ye;break}if(n.lenbits=9,R={bits:n.lenbits},A=dl(vy,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,A){e.msg="invalid literal/lengths set",n.mode=Ye;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},A=dl(yy,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,A){e.msg="invalid distances set",n.mode=Ye;break}if(n.mode=su,t===lu)break e;case su:n.mode=uu;case uu:if(l>=6&&s>=258){e.next_out=a,e.avail_out=s,e.next_in=o,e.avail_in=l,n.hold=u,n.bits=c,xb(e,d),a=e.next_out,i=e.output,s=e.avail_out,o=e.next_in,r=e.input,l=e.avail_in,u=n.hold,c=n.bits,n.mode===pr&&(n.back=-1);break}for(n.back=0;S=n.lencode[u&(1<<n.lenbits)-1],m=S>>>24,f=S>>>16&255,h=S&65535,!(m<=c);){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}if(f&&(f&240)===0){for(w=m,I=f,T=h;S=n.lencode[T+((u&(1<<w+I)-1)>>w)],m=S>>>24,f=S>>>16&255,h=S&65535,!(w+m<=c);){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}u>>>=w,c-=w,n.back+=w}if(u>>>=m,c-=m,n.back+=m,n.length=h,f===0){n.mode=fy;break}if(f&32){n.back=-1,n.mode=pr;break}if(f&64){e.msg="invalid literal/length code",n.mode=Ye;break}n.extra=f&15,n.mode=sy;case sy:if(n.extra){for(F=n.extra;c<F;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=uy;case uy:for(;S=n.distcode[u&(1<<n.distbits)-1],m=S>>>24,f=S>>>16&255,h=S&65535,!(m<=c);){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}if((f&240)===0){for(w=m,I=f,T=h;S=n.distcode[T+((u&(1<<w+I)-1)>>w)],m=S>>>24,f=S>>>16&255,h=S&65535,!(w+m<=c);){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}u>>>=w,c-=w,n.back+=w}if(u>>>=m,c-=m,n.back+=m,f&64){e.msg="invalid distance code",n.mode=Ye;break}n.offset=h,n.extra=f&15,n.mode=cy;case cy:if(n.extra){for(F=n.extra;c<F;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Ye;break}n.mode=dy;case dy:if(s===0)break e;if(g=d-s,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Ye;break}g>n.wnext?(g-=n.wnext,y=n.wsize-g):y=n.wnext-g,g>n.length&&(g=n.length),v=n.window}else v=i,y=a-n.offset,g=n.length;g>s&&(g=s),s-=g,n.length-=g;do i[a++]=v[y++];while(--g);n.length===0&&(n.mode=uu);break;case fy:if(s===0)break e;i[a++]=n.length,s--,n.mode=uu;break;case C0:if(n.wrap){for(;c<32;){if(l===0)break e;l--,u|=r[o++]<<c,c+=8}if(d-=s,e.total_out+=d,n.total+=d,n.wrap&4&&d&&(e.adler=n.check=n.flags?Yn(n.check,i,d,a-d):L0(n.check,i,d,a-d)),d=s,n.wrap&4&&(n.flags?u:my(u))!==n.check){e.msg="incorrect data check",n.mode=Ye;break}u=0,c=0}n.mode=py;case py:if(n.wrap&&n.flags){for(;c<32;){if(l===0)break e;l--,u+=r[o++]<<c,c+=8}if(n.wrap&4&&u!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Ye;break}u=0,c=0}n.mode=hy;case hy:A=bb;break e;case Ye:A=wy;break e;case A0:return P0;case Sy:default:return yn}return e.next_out=a,e.avail_out=s,e.next_in=o,e.avail_in=l,n.hold=u,n.bits=c,(n.wsize||d!==e.avail_out&&n.mode<Ye&&(n.mode<C0||t!==$1))&&Cy(e,e.output,e.next_out,d-e.avail_out)?(n.mode=A0,P0):(p-=e.avail_in,d-=e.avail_out,e.total_in+=p,e.total_out+=d,n.total+=d,n.wrap&4&&d&&(e.adler=n.check=n.flags?Yn(n.check,i,d,e.next_out-d):L0(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===pr?128:0)+(n.mode===su||n.mode===b0?256:0),(p===0&&d===0||t===$1)&&A===ki&&(A=Ib),A)},Ob=e=>{if(Di(e))return yn;let t=e.state;return t.window&&(t.window=null),e.state=null,ki},Fb=(e,t)=>{if(Di(e))return yn;let n=e.state;return(n.wrap&2)===0?yn:(n.head=t,t.done=!1,ki)},Nb=(e,t)=>{let n=t.length,r,i,o;return Di(e)||(r=e.state,r.wrap!==0&&r.mode!==cu)?yn:r.mode===cu&&(i=1,i=L0(i,t,n,0),i!==r.check)?wy:(o=Cy(e,t,n,n),o?(r.mode=A0,P0):(r.havedict=1,ki))};An.exports.inflateReset=_y;An.exports.inflateReset2=Ey;An.exports.inflateResetKeep=xy;An.exports.inflateInit=Db;An.exports.inflateInit2=by;An.exports.inflate=Rb;An.exports.inflateEnd=Ob;An.exports.inflateGetHeader=Fb;An.exports.inflateSetDictionary=Nb;An.exports.inflateInfo="pako inflate (from Nodeca project)"});var Ly=de((TT,Ty)=>{"use strict";function Ub(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}Ty.exports=Ub});var Dy=de((LT,Do)=>{"use strict";var hr=Iy(),Ay=y0(),M0=w0(),R0=nu(),Bb=S0(),zb=Ly(),ky=Object.prototype.toString,{Z_NO_FLUSH:Vb,Z_FINISH:Hb,Z_OK:fl,Z_STREAM_END:k0,Z_NEED_DICT:D0,Z_STREAM_ERROR:Gb,Z_DATA_ERROR:Py,Z_MEM_ERROR:Wb}=Xr();function pl(e){this.options=Ay.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Bb,this.strm.avail_out=0;let n=hr.inflateInit2(this.strm,t.windowBits);if(n!==fl)throw new Error(R0[n]);if(this.header=new zb,hr.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=M0.string2buf(t.dictionary):ky.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=hr.inflateSetDictionary(this.strm,t.dictionary),n!==fl)))throw new Error(R0[n])}pl.prototype.push=function(e,t){let n=this.strm,r=this.options.chunkSize,i=this.options.dictionary,o,a,l;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?Hb:Vb,ky.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=hr.inflate(n,a),o===D0&&i&&(o=hr.inflateSetDictionary(n,i),o===fl?o=hr.inflate(n,a):o===Py&&(o=D0));n.avail_in>0&&o===k0&&n.state.wrap>0&&e[n.next_in]!==0;)hr.inflateReset(n),o=hr.inflate(n,a);switch(o){case Gb:case Py:case D0:case Wb:return this.onEnd(o),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||o===k0))if(this.options.to==="string"){let s=M0.utf8border(n.output,n.next_out),u=n.next_out-s,c=M0.buf2string(n.output,s);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(s,s+u),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(o===fl&&l===0)){if(o===k0)return o=hr.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};pl.prototype.onData=function(e){this.chunks.push(e)};pl.prototype.onEnd=function(e){e===fl&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ay.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function O0(e,t){let n=new pl(t);if(n.push(e),n.err)throw n.msg||R0[n.err];return n.result}function jb(e,t){return t=t||{},t.raw=!0,O0(e,t)}Do.exports.Inflate=pl;Do.exports.inflate=O0;Do.exports.inflateRaw=jb;Do.exports.ungzip=O0;Do.exports.constants=Xr()});var F0=de((PT,Xn)=>{"use strict";var{Deflate:$b,deflate:Yb,deflateRaw:Xb,gzip:Zb}=V1(),{Inflate:Kb,inflate:qb,inflateRaw:Qb,ungzip:Jb}=Dy(),e3=Xr();Xn.exports.Deflate=$b;Xn.exports.deflate=Yb;Xn.exports.deflateRaw=Xb;Xn.exports.gzip=Zb;Xn.exports.Inflate=Kb;Xn.exports.inflate=qb;Xn.exports.inflateRaw=Qb;Xn.exports.ungzip=Jb;Xn.exports.constants=e3});var ti=de($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.initializeCanvas=$.createImageData=$.createCanvasFromData=$.createCanvas=$.writeDataZipWithoutPrediction=$.writeDataRLE=$.writeDataRaw=$.decodeBitmap=$.imageDataToCanvas=$.resetImageData=$.hasAlpha=$.clamp=$.offsetForChannel=$.Compression=$.ChannelID=$.MaskParams=$.LayerMaskFlags=$.ColorSpace=$.createEnum=$.revMap=$.largeAdditionalInfoKeys=$.layerColors=$.toBlendMode=$.fromBlendMode=$.RAW_IMAGE_DATA=$.MOCK_HANDLERS=void 0;var t3=qa(),n3=F0();$.MOCK_HANDLERS=!1;$.RAW_IMAGE_DATA=!1;$.fromBlendMode={};$.toBlendMode={pass:"pass through",norm:"normal",diss:"dissolve",dark:"darken","mul ":"multiply",idiv:"color burn",lbrn:"linear burn",dkCl:"darker color",lite:"lighten",scrn:"screen","div ":"color dodge",lddg:"linear dodge",lgCl:"lighter color",over:"overlay",sLit:"soft light",hLit:"hard light",vLit:"vivid light",lLit:"linear light",pLit:"pin light",hMix:"hard mix",diff:"difference",smud:"exclusion",fsub:"subtract",fdiv:"divide","hue ":"hue","sat ":"saturation",colr:"color","lum ":"luminosity"};Object.keys($.toBlendMode).forEach(function(e){return $.fromBlendMode[$.toBlendMode[e]]=e});$.layerColors=["none","red","orange","yellow","green","blue","violet","gray"];$.largeAdditionalInfoKeys=["LMsk","Lr16","Lr32","Layr","Mt16","Mt32","Mtrn","Alph","FMsk","lnk2","FEid","FXid","PxSD","cinf"];function My(e){var t={};return Object.keys(e).forEach(function(n){return t[e[n]]=n}),t}$.revMap=My;function r3(e,t,n){var r=My(n),i=function(a){var l=a.split(".")[1];if(l&&!r[l])throw new Error("Unrecognized value for enum: '".concat(a,"'"));return r[l]||t},o=function(a){if(a&&!n[a])throw new Error("Invalid value for enum: '".concat(a,"'"));return"".concat(e,".").concat(n[a]||n[t])};return{decode:i,encode:o}}$.createEnum=r3;var i3;(function(e){e[e.RGB=0]="RGB",e[e.HSB=1]="HSB",e[e.CMYK=2]="CMYK",e[e.Lab=7]="Lab",e[e.Grayscale=8]="Grayscale"})(i3=$.ColorSpace||($.ColorSpace={}));var o3;(function(e){e[e.PositionRelativeToLayer=1]="PositionRelativeToLayer",e[e.LayerMaskDisabled=2]="LayerMaskDisabled",e[e.InvertLayerMaskWhenBlending=4]="InvertLayerMaskWhenBlending",e[e.LayerMaskFromRenderingOtherData=8]="LayerMaskFromRenderingOtherData",e[e.MaskHasParametersAppliedToIt=16]="MaskHasParametersAppliedToIt"})(o3=$.LayerMaskFlags||($.LayerMaskFlags={}));var a3;(function(e){e[e.UserMaskDensity=1]="UserMaskDensity",e[e.UserMaskFeather=2]="UserMaskFeather",e[e.VectorMaskDensity=4]="VectorMaskDensity",e[e.VectorMaskFeather=8]="VectorMaskFeather"})(a3=$.MaskParams||($.MaskParams={}));var l3;(function(e){e[e.Color0=0]="Color0",e[e.Color1=1]="Color1",e[e.Color2=2]="Color2",e[e.Color3=3]="Color3",e[e.Transparency=-1]="Transparency",e[e.UserMask=-2]="UserMask",e[e.RealUserMask=-3]="RealUserMask"})(l3=$.ChannelID||($.ChannelID={}));var s3;(function(e){e[e.RawData=0]="RawData",e[e.RleCompressed=1]="RleCompressed",e[e.ZipWithoutPrediction=2]="ZipWithoutPrediction",e[e.ZipWithPrediction=3]="ZipWithPrediction"})(s3=$.Compression||($.Compression={}));function u3(e,t){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return t?3:e+1;case-1:return t?4:3;default:return e+1}}$.offsetForChannel=u3;function c3(e,t,n){return e<t?t:e>n?n:e}$.clamp=c3;function d3(e){for(var t=e.width*e.height*4,n=3;n<t;n+=4)if(e.data[n]!==255)return!0;return!1}$.hasAlpha=d3;function f3(e){for(var t=e.data,n=t instanceof Float32Array?1:t instanceof Uint16Array?65535:255,r=0,i=t.length|0;r<i;r=r+4|0)t[r+0]=0,t[r+1]=0,t[r+2]=0,t[r+3]=n}$.resetImageData=f3;function p3(e){var t=(0,$.createCanvas)(e.width,e.height),n;if(e.data instanceof Uint8ClampedArray)n=e;else{n=(0,$.createImageData)(e.width,e.height);var r=e.data,i=n.data;if(r instanceof Float32Array)for(var o=0,a=r.length;o<a;o+=4)i[o+0]=Math.round(Math.pow(r[o+0],1/2.2)*255),i[o+1]=Math.round(Math.pow(r[o+1],1/2.2)*255),i[o+2]=Math.round(Math.pow(r[o+2],1/2.2)*255),i[o+3]=Math.round(r[o+3]*255);else for(var l=r instanceof Uint16Array?8:0,o=0,a=r.length;o<a;o++)i[o]=r[o]>>>l}return t.getContext("2d").putImageData(n,0,0),t}$.imageDataToCanvas=p3;function h3(e,t,n,r){if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("Invalid bit depth");for(var i=0,o=0,a=0;i<r;i++)for(var l=0;l<n;)for(var s=e[a++],u=0;u<8&&l<n;u++,l++,o+=4){var c=s&128?0:255;s=s<<1,t[o+0]=c,t[o+1]=c,t[o+2]=c,t[o+3]=255}}$.decodeBitmap=h3;function m3(e,t,n,r){if(!(!n||!r)){for(var i=new Uint8Array(n*r),o=0;o<i.length;o++)i[o]=e.data[o*4+t];return i}}$.writeDataRaw=m3;function g3(e,t,n,r){var i=t.data,o=t.width,a=t.height;if(!(!o||!a)){for(var l=4*o|0,s=0,u=n.length*(r?4:2)*a|0,c=0,p=n;c<p.length;c++)for(var d=p[c],g=0,y=d|0;g<a;g++){var v=g*l|0,S=v+l|0,m=S+d-4|0,f=m-4|0,h=u;for(y=v+d|0;y<S;y=y+4|0)if(y<f){var w=i[y];y=y+4|0;var I=i[y];y=y+4|0;var T=i[y];if(w===I&&w===T){for(var L=3;L<128&&y<m&&i[y+4|0]===w;)L=L+1|0,y=y+4|0;e[u++]=1-L,e[u++]=w}else{var A=u,O=!0,L=1;for(e[u++]=0,e[u++]=w;y<m&&L<128;)if(y=y+4|0,w=I,I=T,T=i[y],w===I&&w===T){y=y-12|0,O=!1;break}else L++,e[u++]=w;O&&(L<127?(e[u++]=I,e[u++]=T,L+=2):L<128?(e[u++]=I,L++,y=y-4|0):y=y-8|0),e[A]=L-1}}else y===m?(e[u++]=0,e[u++]=i[y]):(e[u++]=1,e[u++]=i[y],y=y+4|0,e[u++]=i[y]);var R=u-h;r&&(e[s++]=R>>24&255,e[s++]=R>>16&255),e[s++]=R>>8&255,e[s++]=R&255}return e.slice(0,u)}}$.writeDataRLE=g3;function v3(e,t){for(var n=e.data,r=e.width,i=e.height,o=r*i,a=new Uint8Array(o),l=[],s=0,u=0,c=t;u<c.length;u++){for(var p=c[u],d=0,g=p;d<o;d++,g+=4)a[d]=n[g];var y=(0,n3.deflate)(a);l.push(y),s+=y.byteLength}if(l.length>0){for(var y=new Uint8Array(s),p=0,v=0,S=l;v<S.length;v++){var m=S[v];y.set(m,p),p+=m.byteLength}return y}else return l[0]}$.writeDataZipWithoutPrediction=v3;var y3=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvas method")};$.createCanvas=y3;var w3=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvasFromData method")};$.createCanvasFromData=w3;var N0=void 0,S3=function(e,t){return N0||(N0=(0,$.createCanvas)(1,1)),N0.getContext("2d").createImageData(e,t)};$.createImageData=S3;typeof document!="undefined"&&($.createCanvas=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},$.createCanvasFromData=function(e){var t=new Image;t.src="data:image/jpeg;base64,"+(0,t3.fromByteArray)(e);var n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0),n});function x3(e,t,n){$.createCanvas=e,$.createCanvasFromData=t||$.createCanvasFromData,$.createImageData=n||$.createImageData}$.initializeCanvas=x3});var Ny=de(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.decodeString=Zn.encodeString=Zn.encodeStringTo=Zn.stringLengthInBytes=void 0;function U0(e){return(e&4294967168)===0?1:(e&4294965248)===0?2:(e&4294901760)===0?3:4}function Oy(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r>=55296&&r<=56319){if(n+1<e.length){var i=e.charCodeAt(n+1);(i&64512)===56320&&(n++,t+=U0(((r&1023)<<10)+(i&1023)+65536))}}else t+=U0(r)}return t}Zn.stringLengthInBytes=Oy;function Ry(e,t,n){var r=U0(n);switch(r){case 1:e[t]=n;break;case 2:e[t]=n>>6&31|192,e[t+1]=n&63|128;break;case 3:e[t]=n>>12&15|224,e[t+1]=n>>6&63|128,e[t+2]=n&63|128;break;default:e[t]=n>>18&7|240,e[t+1]=n>>12&63|128,e[t+2]=n>>6&63|128,e[t+3]=n&63|128;break}return r}function Fy(e,t,n){for(var r=0;r<n.length;r++){var i=n.charCodeAt(r);if(i>=55296&&i<=56319){if(r+1<n.length){var o=n.charCodeAt(r+1);if((o&64512)===56320){r++;var a=((i&1023)<<10)+(o&1023)+65536;t+=Ry(e,t,a)}}}else t+=Ry(e,t,i)}return t}Zn.encodeStringTo=Fy;function _3(e){if(e.length>1e3&&typeof TextEncoder!="undefined")return new TextEncoder().encode(e);var t=new Uint8Array(Oy(e));return Fy(t,0,e),t}Zn.encodeString=_3;function Mo(e,t){if(t>=e.length)throw Error("Invalid byte index");var n=e[t];if((n&192)===128)return n&63;throw Error("Invalid continuation byte")}function E3(e){if(e.byteLength>1e3&&typeof TextDecoder!="undefined")return new TextDecoder().decode(e);for(var t=[],n=0;n<e.length;){var r=e[n++],i=void 0;if((r&128)===0)i=r;else if((r&224)===192){var o=Mo(e,n++);if(i=(r&31)<<6|o,i<128)throw Error("Invalid continuation byte")}else if((r&240)===224){var o=Mo(e,n++),a=Mo(e,n++);if(i=(r&15)<<12|o<<6|a,i<2048)throw Error("Invalid continuation byte");if(i>=55296&&i<=57343)throw Error("Lone surrogate U+".concat(i.toString(16).toUpperCase()," is not a scalar value"))}else if((r&248)===240){var o=Mo(e,n++),a=Mo(e,n++),l=Mo(e,n++);if(i=(r&15)<<18|o<<12|a<<6|l,i<65536||i>1114111)throw Error("Invalid continuation byte")}else throw Error("Invalid UTF-8 detected");i>65535&&(i-=65536,t.push(String.fromCharCode(i>>>10&1023|55296)),i=56320|i&1023),t.push(String.fromCharCode(i))}return t.join("")}Zn.decodeString=E3});var Su=de(P=>{"use strict";var mr=P&&P.__assign||function(){return mr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},mr.apply(this,arguments)},b3=P&&P.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(P,"__esModule",{value:!0});P.ESliceOrigin=P.ESliceVertAlign=P.ESliceHorzAlign=P.ESliceType=P.FrFl=P.FStl=P.ClrS=P.gradientInterpolationMethodType=P.stdTrackID=P.animInterpStyleEnum=P.GrdT=P.IGSr=P.BETE=P.BESs=P.bvlT=P.BESl=P.BlnM=P.warpStyle=P.Annt=P.Ornt=P.textGridding=P.frac=P.unitsValue=P.unitsPercentF=P.unitsPercent=P.unitsAngle=P.parseUnitsToNumber=P.parseUnitsOrNumber=P.parseUnits=P.parsePercentOrAngle=P.parsePercent=P.parseAngle=P.serializeColor=P.parseColor=P.serializeVectorContent=P.parseVectorContent=P.serializeTrackList=P.parseTrackList=P.parseEffects=P.serializeEffects=P.boundsToDescBounds=P.descBoundsToBounds=P.xyToHorzVrtc=P.horzVrtcToXY=P.writeVersionAndDescriptor=P.readVersionAndDescriptor=P.writeDescriptorStructure=P.readDescriptorStructure=P.readAsciiStringOrClassId=P.setLogErrors=void 0;P.presetKindType=P.prjM=P.FlMd=P.IntC=P.IntE=P.Drct=P.WndM=P.CntE=P.FlCl=P.ExtR=P.ExtT=P.DfsM=P.blurType=P.Lns=P.MztT=P.Chnl=P.Dstr=P.ZZTy=P.Wvtp=P.SphM=P.RplS=P.Cnvr=P.UndA=P.DspM=P.SmBQ=P.SmBM=P.BlrQ=P.BlrM=P.strokeStyleLineAlignment=P.strokeStyleLineJoinType=P.strokeStyleLineCapType=P.ESliceBGColorType=void 0;var oe=ti(),pe=ni(),we=Oo();function C3(e){var t={};return Object.keys(e).forEach(function(n){return t[e[n]]=n}),t}var hl={"#Ang":"Angle","#Rsl":"Density","#Rlt":"Distance","#Nne":"None","#Prc":"Percent","#Pxl":"Pixels","#Mlm":"Millimeters","#Pnt":"Points",RrPi:"Picas",RrIn:"Inches",RrCm:"Centimeters"},fu=C3(hl),ml=!1;function I3(e){ml=e}P.setLogErrors=I3;function G(e,t){return{name:e,classID:t}}var ve=G("","null"),B0=!1,Wy={strokeStyleContent:G("","solidColorLayer"),printProofSetup:G(B0?"\u6821\u6837\u8BBE\u7F6E":"Proof Setup","proofSetup"),Grad:G(B0?"\u6E10\u53D8":"Gradient","Grdn"),Trnf:G(B0?"\u53D8\u6362":"Transform","Trnf"),patternFill:G("","patternFill"),ebbl:G("","ebbl"),SoFi:G("","SoFi"),GrFl:G("","GrFl"),sdwC:G("","RGBC"),hglC:G("","RGBC"),"Clr ":G("","RGBC"),tintColor:G("","RGBC"),Ofst:G("","Pnt "),ChFX:G("","ChFX"),MpgS:G("","ShpC"),DrSh:G("","DrSh"),IrSh:G("","IrSh"),OrGl:G("","OrGl"),IrGl:G("","IrGl"),TrnS:G("","ShpC"),Ptrn:G("","Ptrn"),FrFX:G("","FrFX"),phase:G("","Pnt "),frameStep:ve,duration:ve,workInTime:ve,workOutTime:ve,audioClipGroupList:ve,bounds:G("","Rctn"),customEnvelopeWarp:G("","customEnvelopeWarp"),warp:G("","warp"),"Sz  ":G("","Pnt "),origin:G("","Pnt "),autoExpandOffset:G("","Pnt "),keyOriginShapeBBox:G("","unitRect"),Vrsn:ve,psVersion:ve,docDefaultNewArtboardBackgroundColor:G("","RGBC"),artboardRect:G("","classFloatRect"),keyOriginRRectRadii:G("","radii"),keyOriginBoxCorners:ve,rectangleCornerA:G("","Pnt "),rectangleCornerB:G("","Pnt "),rectangleCornerC:G("","Pnt "),rectangleCornerD:G("","Pnt "),compInfo:ve,quiltWarp:G("","quiltWarp"),generatorSettings:ve,crema:ve,FrIn:ve,blendOptions:ve,FXRf:ve,Lefx:ve,time:ve,animKey:ve,timeScope:ve,inTime:ve,outTime:ve,sheetStyle:ve,translation:ve,Skew:ve,boundingBox:G("","boundingBox"),"Lnk ":G("","ExternalFileLink"),frameReader:G("","FrameReader"),effectParams:G("","motionTrackEffectParams"),Impr:G("None","none"),Anch:G("","Pnt "),"Fwd ":G("","Pnt "),"Bwd ":G("","Pnt "),FlrC:G("","Pnt "),meshBoundaryPath:G("","pathClass"),filterFX:G("","filterFXStyle"),Fltr:G("","rigidTransform"),FrgC:G("","RGBC"),BckC:G("","RGBC"),sdwM:G("Parameters","adaptCorrectTones"),hglM:G("Parameters","adaptCorrectTones"),customShape:G("","customShape"),origFXRefPoint:ve,FXRefPoint:ve,ClMg:G("","ClMg")},jy={"Crv ":G("","CrPt"),Clrs:G("","Clrt"),Trns:G("","TrnS"),keyDescriptorList:ve,solidFillMulti:G("","SoFi"),gradientFillMulti:G("","GrFl"),dropShadowMulti:G("","DrSh"),innerShadowMulti:G("","IrSh"),frameFXMulti:G("","FrFX"),FrIn:ve,FSts:ve,LaSt:ve,sheetTimelineOptions:ve,trackList:G("","animationTrack"),globalTrackList:G("","animationTrack"),keyList:ve,audioClipGroupList:ve,audioClipList:ve,countObjectList:G("","countObject"),countGroupList:G("","countGroup"),slices:G("","slice"),"Pts ":G("","Pthp"),SbpL:G("","SbpL"),pathComponents:G("","PaCm"),filterFXList:G("","filterFX"),puppetShapeList:G("","puppetShape"),channelDenoise:G("","channelDenoiseParams"),ShrP:G("","Pnt "),layerSettings:ve,list:ve,Adjs:G("","CrvA")},Uy={TEXT:["Txt ","printerName","Nm  ","Idnt","blackAndWhitePresetFileName","LUT3DFileName","presetFileName","curvesPresetFileName","mixerPresetFileName","placed","description","reason","artboardPresetName","json","clipID","relPath","fullPath","mediaDescriptor","Msge","altTag","url","cellText","preset","KnNm","FPth","comment","originalPath"],tdta:["EngineData","LUT3DFileData","indexArray","originalVertexArray","deformedVertexArray","LqMe"],long:["TextIndex","RndS","Mdpn","Smth","Lctn","strokeStyleVersion","LaID","Vrsn","Cnt ","Brgh","Cntr","means","vibrance","Strt","bwPresetKind","comp","compID","originalCompID","curvesPresetKind","mixerPresetKind","uOrder","vOrder","PgNm","totalPages","Crop","numerator","denominator","frameCount","Annt","keyOriginType","unitValueQuadVersion","keyOriginIndex","major","minor","fix","docDefaultNewArtboardBackgroundType","artboardBackgroundType","numModifyingFX","deformNumRows","deformNumCols","FrID","FrDl","FsID","LCnt","AFrm","AFSt","numBefore","numAfter","Spcn","minOpacity","maxOpacity","BlnM","sheetID","gblA","globalAltitude","descVersion","frameReaderType","LyrI","zoomOrigin","fontSize","Rds ","sliceID","topOutset","leftOutset","bottomOutset","rightOutset","filterID","meshQuality","meshExpansion","meshRigidity","VrsM","VrsN","NmbG","WLMn","WLMx","AmMn","AmMx","SclH","SclV","Lvl ","TlNm","TlOf","FlRs","Thsh","ShrS","ShrE","FlRs","Vrnc","Strg","ExtS","ExtD","HrzS","VrtS","NmbR","EdgF","Ang1","Ang2","Ang3","Ang4","lastAppliedComp","capturedInfo"],enum:["textGridding","Ornt","warpStyle","warpRotate","Inte","Bltn","ClrS","BlrQ","bvlT","bvlS","bvlD","Md  ","glwS","GrdF","GlwT","RplS","BlrM","SmBM","strokeStyleLineCapType","strokeStyleLineJoinType","strokeStyleLineAlignment","strokeStyleBlendMode","PntT","Styl","lookupType","LUTFormat","dataOrder","tableOrder","enableCompCore","enableCompCoreGPU","compCoreSupport","compCoreGPUSupport","Engn","enableCompCoreThreads","gs99","FrDs","trackID","animInterpStyle","horzAlign","vertAlign","bgColorType","shapeOperation","UndA","Wvtp","Drct","WndM","Edg ","FlCl","IntE","IntC","Cnvr","Fl  ","Dstr","MztT","Lns ","ExtT","DspM","ExtR","ZZTy","SphM","SmBQ","placedLayerOCIOConversion","gradientsInterpolationMethod"],bool:["PstS","printSixteenBit","masterFXSwitch","enab","uglg","antialiasGloss","useShape","useTexture","uglg","antialiasGloss","useShape","Vsbl","useTexture","Algn","Rvrs","Dthr","Invr","VctC","ShTr","layerConceals","strokeEnabled","fillEnabled","strokeStyleScaleLock","strokeStyleStrokeAdjust","hardProof","MpBl","paperWhite","useLegacy","Auto","Lab ","useTint","keyShapeInvalidated","autoExpandEnabled","autoNestEnabled","autoPositionEnabled","shrinkwrapOnSaveEnabled","present","showInDialog","overprint","sheetDisclosed","lightsDisclosed","meshesDisclosed","materialsDisclosed","hasMotion","muted","Effc","selected","autoScope","fillCanvas","cellTextIsHTML","Smoo","Clsp","validAtPosition","rigidType","hasoptions","filterMaskEnable","filterMaskLinked","filterMaskExtendWithWhite","removeJPEGArtifact","Mnch","ExtF","ExtM","moreAccurate","GpuY","LIWy","Cnty"],doub:["warpValue","warpPerspective","warpPerspectiveOther","Intr","Wdth","Hght","strokeStyleMiterLimit","strokeStyleResolution","layerTime","keyOriginResolution","xx","xy","yx","yy","tx","ty","FrGA","frameRate","audioLevel","rotation","X   ","Y   ","redFloat","greenFloat","blueFloat","imageResolution","PuX0","PuX1","PuX2","PuX3","PuY0","PuY1","PuY2","PuY3"],UntF:["sdwO","hglO","lagl","Lald","srgR","blur","Sftn","Opct","Dstn","Angl","Ckmt","Nose","Inpr","ShdN","strokeStyleLineWidth","strokeStyleLineDashOffset","strokeStyleOpacity","H   ","Top ","Left","Btom","Rght","Rslt","topRight","topLeft","bottomLeft","bottomRight","ClNs","Shrp"],VlLs:["Crv ","Clrs","Mnm ","Mxm ","Trns","pathList","strokeStyleLineDashSet","FrLs","slices","LaSt","Trnf","nonAffineTransform","keyDescriptorList","guideIndeces","gradientFillMulti","solidFillMulti","frameFXMulti","innerShadowMulti","dropShadowMulti","FrIn","FSts","FsFr","sheetTimelineOptions","audioClipList","trackList","globalTrackList","keyList","audioClipList","warpValues","selectedPin","Pts ","SbpL","pathComponents","pinOffsets","posFinalPins","pinVertexIndices","PinP","PnRt","PnOv","PnDp","filterFXList","puppetShapeList","ShrP","channelDenoise","Mtrx","layerSettings","list","compList","Adjs"],ObAr:["meshPoints","quiltSliceX","quiltSliceY"],"obj ":["null","Chnl"],"Pth ":["DspF"]},T3=["Rd  ","Grn ","Bl  ","Yllw","Ylw ","Cyn ","Mgnt","Blck","Gry ","Lmnc","A   ","B   "],$y={"Mnm ":"long","Mxm ":"long",FrLs:"long",strokeStyleLineDashSet:"UntF",Trnf:"doub",nonAffineTransform:"doub",keyDescriptorList:"Objc",gradientFillMulti:"Objc",solidFillMulti:"Objc",frameFXMulti:"Objc",innerShadowMulti:"Objc",dropShadowMulti:"Objc",LaSt:"Objc",FrIn:"Objc",FSts:"Objc",FsFr:"long",blendOptions:"Objc",sheetTimelineOptions:"Objc",keyList:"Objc",warpValues:"doub",selectedPin:"long","Pts ":"Objc",SbpL:"Objc",pathComponents:"Objc",pinOffsets:"doub",posFinalPins:"doub",pinVertexIndices:"long",PinP:"doub",PnRt:"long",PnOv:"bool",PnDp:"doub",filterFXList:"Objc",puppetShapeList:"Objc",ShrP:"Objc",channelDenoise:"Objc",Mtrx:"long",compList:"long",Chnl:"enum"},wu={};for(pu=0,z0=Object.keys(Uy);pu<z0.length;pu++)for(V0=z0[pu],hu=0,H0=Uy[V0];hu<H0.length;hu++)vr=H0[hu],wu[vr]=V0;var V0,vr,hu,H0,pu,z0;for(mu=0,G0=Object.keys(Wy);mu<G0.length;mu++)vr=G0[mu],wu[vr]||(wu[vr]="Objc");var vr,mu,G0;for(gu=0,W0=Object.keys(jy);gu<W0.length;gu++)vr=W0[gu],$y[vr]="Objc";var vr,gu,W0;function L3(e,t,n,r){return e==="presetKind"?typeof t=="string"?"enum":"long":e==="null"&&n==="slices"?"TEXT":e==="groupID"?n==="slices"?"long":"TEXT":e==="Sz  "?"Wdth"in t?"Objc":"units"in t?"UntF":"doub":e==="Type"?typeof t=="string"?"enum":"long":e==="AntA"?typeof t=="string"?"enum":"bool":(e==="Hrzn"||e==="Vrtc")&&(r.Type==="keyType.Pstn"||r._classID==="Ofst")?"long":e==="Hrzn"||e==="Vrtc"||e==="Top "||e==="Left"||e==="Btom"||e==="Rght"?n==="slices"?"long":typeof t=="number"?"doub":"UntF":e==="Vrsn"?typeof t=="number"?"long":"Objc":e==="Rd  "||e==="Grn "||e==="Bl  "?n==="artd"?"long":"doub":e==="Trnf"?Array.isArray(t)?"VlLs":"Objc":wu[e]}function Kn(e){var t=(0,pe.readInt32)(e);return(0,pe.readAsciiString)(e,t||4)}P.readAsciiStringOrClassId=Kn;function gr(e,t){if(t.length===4&&t!=="warp"&&t!=="time"&&t!=="hold"&&t!=="list")(0,we.writeInt32)(e,0),(0,we.writeSignature)(e,t);else{(0,we.writeInt32)(e,t.length);for(var n=0;n<t.length;n++)(0,we.writeUint8)(e,t.charCodeAt(n))}}function $0(e,t){for(var n=Mi(e),r=t?{_name:n.name,_classID:n.classID}:{},i=(0,pe.readUint32)(e),o=0;o<i;o++){var a=Kn(e),l=(0,pe.readSignature)(e),s=Yy(e,l,t);r[a]=s}return r}P.readDescriptorStructure=$0;function Y0(e,t,n,r,i){ml&&!n&&console.log("Missing classId for: ",t,n,r),(0,we.writeUnicodeStringWithPadding)(e,t),gr(e,n);var o=Object.keys(r),a=o.length;"_name"in r&&a--,"_classID"in r&&a--,(0,we.writeUint32)(e,a);for(var l=0,s=o;l<s.length;l++){var u=s[l];if(!(u==="_name"||u==="_classID")){var c=L3(u,r[u],i,r),p=Wy[u];u==="bounds"&&i==="text"?p=G("","bounds"):u==="origin"?c=i==="slices"?"enum":"Objc":(u==="Cyn "||u==="Mgnt"||u==="Ylw "||u==="Blck")&&r._classID==="CMYC"?c="doub":/^PN[a-z][a-z]$/.test(u)?c="TEXT":/^PT[a-z][a-z]$/.test(u)?c="long":/^PF[a-z][a-z]$/.test(u)||(u==="Rds "||u==="Thsh")&&typeof r[u]=="number"&&r._classID==="SmrB"?c="doub":u==="ClSz"||u==="Rds "||u==="Amnt"?c=typeof r[u]=="number"?"long":"UntF":(u==="sdwM"||u==="hglM")&&typeof r[u]=="string"||u==="blur"&&typeof r[u]=="string"?c="enum":u==="Hght"&&typeof r[u]=="number"&&r._classID==="Embs"||u==="Angl"&&typeof r[u]=="number"&&(r._classID==="Embs"||r._classID==="smartSharpen"||r._classID==="Twrl"||r._classID==="MtnB")?c="long":u==="Angl"&&typeof r[u]=="number"?c="doub":u==="bounds"&&i==="slices"?(c="Objc",p=G("","Rct1")):u==="Scl "?typeof r[u]=="object"&&"Hrzn"in r[u]?(c="Objc",p=ve):typeof r[u]=="number"?c="long":c="UntF":u==="audioClipGroupList"&&o.length===1?c="VlLs":(u==="Strt"||u==="Brgh")&&"H   "in r?c="doub":u==="Wdth"&&typeof r[u]=="object"?c="UntF":u==="Ofst"&&typeof r[u]=="number"?c="long":u==="Strt"&&typeof r[u]=="object"?(c="Objc",p=ve):T3.indexOf(u)!==-1?c=n==="RGBC"&&i!=="artd"?"doub":"long":u==="profile"?c=n==="printOutput"?"TEXT":"tdta":u==="strokeStyleContent"?r[u]["Clr "]?p=G("","solidColorLayer"):r[u].Grad?p=G("","gradientLayer"):r[u].Ptrn?p=G("","patternLayer"):ml&&console.log("Invalid strokeStyleContent value",r[u]):u==="bounds"&&i==="quiltWarp"&&(p=G("","classFloatRect")),p&&p.classID==="RGBC"&&"H   "in r[u]&&(p={classID:"HSBC",name:""}),gr(e,u),(0,we.writeSignature)(e,c||"long"),Xy(e,c||"long",r[u],u,p,i),ml&&!c&&console.log("Missing descriptor field type for: '".concat(u,"' in"),r)}}}P.writeDescriptorStructure=Y0;function Yy(e,t,n){switch(t){case"obj ":return A3(e);case"Objc":case"GlbO":return $0(e,n);case"VlLs":{for(var r=(0,pe.readInt32)(e),i=[],o=0;o<r;o++){var a=(0,pe.readSignature)(e);i.push(Yy(e,a,n))}return i}case"doub":return(0,pe.readFloat64)(e);case"UntF":{var l=(0,pe.readSignature)(e),s=(0,pe.readFloat64)(e);if(!hl[l])throw new Error("Invalid units: ".concat(l));return{units:hl[l],value:s}}case"UnFl":{var l=(0,pe.readSignature)(e),s=(0,pe.readFloat32)(e);if(!hl[l])throw new Error("Invalid units: ".concat(l));return{units:hl[l],value:s}}case"TEXT":return(0,pe.readUnicodeString)(e);case"enum":{var u=Kn(e),s=Kn(e);return"".concat(u,".").concat(s)}case"long":return(0,pe.readInt32)(e);case"comp":{var c=(0,pe.readUint32)(e),p=(0,pe.readUint32)(e);return{low:c,high:p}}case"bool":return!!(0,pe.readUint8)(e);case"type":case"GlbC":return Mi(e);case"alis":{var d=(0,pe.readInt32)(e);return(0,pe.readAsciiString)(e,d)}case"tdta":{var g=(0,pe.readInt32)(e);return(0,pe.readBytes)(e,g)}case"ObAr":{(0,pe.readInt32)(e),(0,pe.readUnicodeString)(e),Kn(e);for(var y=(0,pe.readInt32)(e),i=[],o=0;o<y;o++){var v=Kn(e);(0,pe.readSignature)(e),(0,pe.readSignature)(e);for(var S=(0,pe.readInt32)(e),m=[],f=0;f<S;f++)m.push((0,pe.readFloat64)(e));i.push({type:v,values:m})}return i}case"Pth ":{(0,pe.readInt32)(e);var h=(0,pe.readSignature)(e);(0,pe.readInt32LE)(e);var w=(0,pe.readInt32LE)(e),I=(0,pe.readUnicodeStringWithLengthLE)(e,w);return{sig:h,path:I}}default:throw new Error("Invalid TySh descriptor OSType: ".concat(t," at ").concat(e.offset.toString(16)))}}var P3={meshPoints:"rationalPoint",quiltSliceX:"UntF",quiltSliceY:"UntF"};function Xy(e,t,n,r,i,o){switch(t){case"obj ":k3(e,r,n);break;case"Objc":case"GlbO":{if(typeof n!="object")throw new Error("Invalid struct value: ".concat(JSON.stringify(n),", key: ").concat(r));if(!i)throw new Error("Missing ext type for: '".concat(r,"' (").concat(JSON.stringify(n),")"));var a=n._name||i.name,l=n._classID||i.classID;Y0(e,a,l,n,o);break}case"VlLs":if(!Array.isArray(n))throw new Error("Invalid list value: ".concat(JSON.stringify(n),", key: ").concat(r));(0,we.writeInt32)(e,n.length);for(var s=0;s<n.length;s++){var u=$y[r];(0,we.writeSignature)(e,u||"long"),Xy(e,u||"long",n[s],"".concat(r,"[]"),jy[r],o),ml&&!u&&console.log("Missing descriptor array type for: '".concat(r,"' in"),n)}break;case"doub":if(typeof n!="number")throw new Error("Invalid number value: ".concat(JSON.stringify(n),", key: ").concat(r));(0,we.writeFloat64)(e,n);break;case"UntF":if(!fu[n.units])throw new Error("Invalid units: ".concat(n.units," in ").concat(r));(0,we.writeSignature)(e,fu[n.units]),(0,we.writeFloat64)(e,n.value);break;case"UnFl":if(!fu[n.units])throw new Error("Invalid units: ".concat(n.units," in ").concat(r));(0,we.writeSignature)(e,fu[n.units]),(0,we.writeFloat32)(e,n.value);break;case"TEXT":(0,we.writeUnicodeStringWithPadding)(e,n);break;case"enum":{if(typeof n!="string")throw new Error("Invalid enum value: ".concat(JSON.stringify(n),", key: ").concat(r));var c=n.split("."),p=c[0],d=c[1];gr(e,p),gr(e,d);break}case"long":if(typeof n!="number")throw new Error("Invalid integer value: ".concat(JSON.stringify(n),", key: ").concat(r));(0,we.writeInt32)(e,n);break;case"bool":if(typeof n!="boolean")throw new Error("Invalid boolean value: ".concat(JSON.stringify(n),", key: ").concat(r));(0,we.writeUint8)(e,n?1:0);break;case"tdta":(0,we.writeInt32)(e,n.byteLength),(0,we.writeBytes)(e,n);break;case"ObAr":{(0,we.writeInt32)(e,16),(0,we.writeUnicodeStringWithPadding)(e,"");var g=P3[r];if(!g)throw new Error("Not implemented ObArType for: ".concat(r));gr(e,g),(0,we.writeInt32)(e,n.length);for(var s=0;s<n.length;s++){gr(e,n[s].type),(0,we.writeSignature)(e,"UnFl"),(0,we.writeSignature)(e,"#Pxl"),(0,we.writeInt32)(e,n[s].values.length);for(var y=0;y<n[s].values.length;y++)(0,we.writeFloat64)(e,n[s].values[y])}break}case"Pth ":{var v=12+n.path.length*2;(0,we.writeInt32)(e,v),(0,we.writeSignature)(e,n.sig),(0,we.writeInt32LE)(e,v),(0,we.writeInt32LE)(e,n.path.length),(0,we.writeUnicodeStringWithoutLengthLE)(e,n.path);break}default:throw new Error("Not implemented descriptor OSType: ".concat(t))}}function A3(e){for(var t=(0,pe.readInt32)(e),n=[],r=0;r<t;r++){var i=(0,pe.readSignature)(e);switch(i){case"prop":{Mi(e);var o=Kn(e);n.push(o);break}case"Clss":n.push(Mi(e));break;case"Enmr":{Mi(e);var a=Kn(e),l=Kn(e);n.push("".concat(a,".").concat(l));break}case"rele":{Mi(e),n.push((0,pe.readUint32)(e));break}case"Idnt":n.push((0,pe.readInt32)(e));break;case"indx":n.push((0,pe.readInt32)(e));break;case"name":{Mi(e),n.push((0,pe.readUnicodeString)(e));break}default:throw new Error("Invalid descriptor reference type: ".concat(i))}}return n}function k3(e,t,n){(0,we.writeInt32)(e,n.length);for(var r=0;r<n.length;r++){var i=n[r],o="unknown";switch(typeof i=="string"&&(/^[a-z ]+\.[a-z ]+$/i.test(i)?o="Enmr":o="name"),(0,we.writeSignature)(e,o),o){case"Enmr":{var a=i.split("."),l=a[0],s=a[1];By(e,"\0",l),gr(e,l),gr(e,s);break}case"name":{By(e,"\0","Lyr "),(0,we.writeUnicodeString)(e,i+"\0");break}default:throw new Error("Invalid descriptor reference type: ".concat(o))}}return n}function Mi(e){var t=(0,pe.readUnicodeString)(e),n=Kn(e);return{name:t,classID:n}}function By(e,t,n){(0,we.writeUnicodeString)(e,t),gr(e,n)}function D3(e,t){t===void 0&&(t=!1);var n=(0,pe.readUint32)(e);if(n!==16)throw new Error("Invalid descriptor version: ".concat(n));var r=$0(e,t);return r}P.readVersionAndDescriptor=D3;function M3(e,t,n,r,i){i===void 0&&(i=""),(0,we.writeUint32)(e,16),Y0(e,t,n,r,i)}P.writeVersionAndDescriptor=M3;function vu(e){return{x:e.Hrzn,y:e.Vrtc}}P.horzVrtcToXY=vu;function yu(e){return{Hrzn:e.x,Vrtc:e.y}}P.xyToHorzVrtc=yu;function R3(e){return{top:kn(e["Top "]),left:kn(e.Left),right:kn(e.Rght),bottom:kn(e.Btom)}}P.descBoundsToBounds=R3;function O3(e){var t;return t={Left:qn(e.left,"bounds.left")},t["Top "]=qn(e.top,"bounds.top"),t.Rght=qn(e.right,"bounds.right"),t.Btom=qn(e.bottom,"bounds.bottom"),t}P.boundsToDescBounds=O3;function zy(e){var t={enabled:!!e.enab,position:P.FStl.decode(e.Styl),fillType:P.FrFl.decode(e.PntT),blendMode:P.BlnM.decode(e["Md  "]),opacity:mt(e.Opct),size:kn(e["Sz  "])};return e.present!==void 0&&(t.present=e.present),e.showInDialog!==void 0&&(t.showInDialog=e.showInDialog),e.overprint!==void 0&&(t.overprint=e.overprint),e["Clr "]&&(t.color=Ri(e["Clr "])),e.Grad&&(t.gradient=Jy(e)),e.Ptrn&&(t.pattern=e2(e)),t}function Vy(e){var t={};return t.enab=!!e.enabled,e.present!==void 0&&(t.present=!!e.present),e.showInDialog!==void 0&&(t.showInDialog=!!e.showInDialog),t.Styl=P.FStl.encode(e.position),t.PntT=P.FrFl.encode(e.fillType),t["Md  "]=P.BlnM.encode(e.blendMode),t.Opct=xt(e.opacity),t["Sz  "]=qn(e.size,"size"),e.color&&(t["Clr "]=Oi(e.color)),e.gradient&&(t=mr(mr({},t),t2(e.gradient))),e.pattern&&(t=mr(mr({},t),n2(e.pattern))),e.overprint!==void 0&&(t.overprint=!!e.overprint),t}function Zy(e,t,n){for(var r,i,o,a=n?{"Scl ":j0((r=e.scale)!==null&&r!==void 0?r:1),masterFXSwitch:!e.disabled}:{masterFXSwitch:!e.disabled,"Scl ":j0((i=e.scale)!==null&&i!==void 0?i:1)},l=["dropShadow","innerShadow","solidFill","gradientOverlay","stroke"],s=0,u=l;s<u.length;s++){var c=u[s];if(e[c]&&!Array.isArray(e[c]))throw new Error("".concat(c," should be an array"))}var p=function(h){return!!h&&h.length>1&&n},d=function(h){return!!h&&h.length>=1&&(!n||h.length===1)};if(d(e.dropShadow)&&(a.DrSh=nn(e.dropShadow[0],"dropShadow",t)),p(e.dropShadow)&&(a.dropShadowMulti=e.dropShadow.map(function(h){return nn(h,"dropShadow",t)})),d(e.innerShadow)&&(a.IrSh=nn(e.innerShadow[0],"innerShadow",t)),p(e.innerShadow)&&(a.innerShadowMulti=e.innerShadow.map(function(h){return nn(h,"innerShadow",t)})),e.outerGlow&&(a.OrGl=nn(e.outerGlow,"outerGlow",t)),p(e.solidFill)&&(a.solidFillMulti=e.solidFill.map(function(h){return nn(h,"solidFill",t)})),p(e.gradientOverlay)&&(a.gradientFillMulti=e.gradientOverlay.map(function(h){return nn(h,"gradientOverlay",t)})),p(e.stroke)&&(a.frameFXMulti=e.stroke.map(function(h){return Vy(h)})),e.innerGlow&&(a.IrGl=nn(e.innerGlow,"innerGlow",t)),e.bevel&&(a.ebbl=nn(e.bevel,"bevel",t)),d(e.solidFill)&&(a.SoFi=nn(e.solidFill[0],"solidFill",t)),e.patternOverlay&&(a.patternFill=nn(e.patternOverlay,"patternOverlay",t)),d(e.gradientOverlay)&&(a.GrFl=nn(e.gradientOverlay[0],"gradientOverlay",t)),e.satin&&(a.ChFX=nn(e.satin,"satin",t)),d(e.stroke)&&(a.FrFX=Vy((o=e.stroke)===null||o===void 0?void 0:o[0])),n){a.numModifyingFX=0;for(var g=0,y=Object.keys(e);g<y.length;g++){var c=y[g],v=e[c];if(Array.isArray(v))for(var S=0,m=v;S<m.length;S++){var f=m[S];f.enabled&&a.numModifyingFX++}else v.enabled&&a.numModifyingFX++}}return a}P.serializeEffects=Zy;function Ky(e,t){var n={},r=e.masterFXSwitch,i=e.DrSh,o=e.dropShadowMulti,a=e.IrSh,l=e.innerShadowMulti,s=e.OrGl,u=e.IrGl,c=e.ebbl,p=e.SoFi,d=e.solidFillMulti,g=e.patternFill,y=e.GrFl,v=e.gradientFillMulti,S=e.ChFX,m=e.FrFX,f=e.frameFXMulti,h=e.numModifyingFX,w=b3(e,["masterFXSwitch","DrSh","dropShadowMulti","IrSh","innerShadowMulti","OrGl","IrGl","ebbl","SoFi","solidFillMulti","patternFill","GrFl","gradientFillMulti","ChFX","FrFX","frameFXMulti","numModifyingFX"]);return r||(n.disabled=!0),e["Scl "]&&(n.scale=mt(e["Scl "])),i&&(n.dropShadow=[tn(i,t)]),o&&(n.dropShadow=o.map(function(I){return tn(I,t)})),a&&(n.innerShadow=[tn(a,t)]),l&&(n.innerShadow=l.map(function(I){return tn(I,t)})),s&&(n.outerGlow=tn(s,t)),u&&(n.innerGlow=tn(u,t)),c&&(n.bevel=tn(c,t)),p&&(n.solidFill=[tn(p,t)]),d&&(n.solidFill=d.map(function(I){return tn(I,t)})),g&&(n.patternOverlay=tn(g,t)),y&&(n.gradientOverlay=[tn(y,t)]),v&&(n.gradientOverlay=v.map(function(I){return tn(I,t)})),S&&(n.satin=tn(S,t)),m&&(n.stroke=[zy(m)]),f&&(n.stroke=f.map(function(I){return zy(I)})),t&&Object.keys(w).length>1&&console.log("Unhandled effect keys:",w),n}P.parseEffects=Ky;function Hy(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=i.time,a=o.denominator,l=o.numerator,s=i.selected,u=i.animKey,c={numerator:l,denominator:a},p=P.animInterpStyleEnum.decode(i.animInterpStyle);switch(u.Type){case"keyType.Opct":n.push({interpolation:p,time:c,selected:s,type:"opacity",value:mt(u.Opct)});break;case"keyType.Pstn":n.push({interpolation:p,time:c,selected:s,type:"position",x:u.Hrzn,y:u.Vrtc});break;case"keyType.Trnf":n.push({interpolation:p,time:c,selected:s,type:"transform",scale:vu(u["Scl "]),skew:vu(u.Skew),rotation:u.rotation,translation:vu(u.translation)});break;case"keyType.sheetStyle":{var d={interpolation:p,time:c,selected:s,type:"style"};u.sheetStyle.Lefx&&(d.style=Ky(u.sheetStyle.Lefx,t)),n.push(d);break}case"keyType.globalLighting":{n.push({interpolation:p,time:c,selected:s,type:"globalLighting",globalAngle:u.gblA,globalAltitude:u.globalAltitude});break}default:throw new Error("Unsupported keyType value")}}return n}function Gy(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.time,o=r.selected,a=o===void 0?!1:o,l=r.interpolation,s=P.animInterpStyleEnum.encode(l),u=void 0;switch(r.type){case"opacity":u={Type:"keyType.Opct",Opct:xt(r.value)};break;case"position":u={Type:"keyType.Pstn",Hrzn:r.x,Vrtc:r.y};break;case"transform":u={Type:"keyType.Trnf","Scl ":yu(r.scale),Skew:yu(r.skew),rotation:r.rotation,translation:yu(r.translation)};break;case"style":u={Type:"keyType.sheetStyle",sheetStyle:{Vrsn:1,blendOptions:{}}},r.style&&(u.sheetStyle={Vrsn:1,Lefx:Zy(r.style,!1,!1),blendOptions:{}});break;case"globalLighting":{u={Type:"keyType.globalLighting",gblA:r.globalAngle,globalAltitude:r.globalAltitude};break}default:throw new Error("Unsupported keyType value")}t.push({Vrsn:1,animInterpStyle:s,time:i,animKey:u,selected:a})}return t}function F3(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o={type:P.stdTrackID.decode(i.trackID),enabled:i.enab,keys:Hy(i.keyList,t)};i.effectParams&&(o.effectParams={fillCanvas:i.effectParams.fillCanvas,zoomOrigin:i.effectParams.zoomOrigin,keys:Hy(i.effectParams.keyList,t)}),n.push(o)}return n}P.parseTrackList=F3;function N3(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(mr(mr({trackID:P.stdTrackID.encode(r.type),Vrsn:1,enab:!!r.enabled,Effc:!!r.effectParams},r.effectParams?{effectParams:{keyList:Gy(r.keys),fillCanvas:r.effectParams.fillCanvas,zoomOrigin:r.effectParams.zoomOrigin}}:{}),{keyList:Gy(r.keys)}))}return t}P.serializeTrackList=N3;function tn(e,t){for(var n={},r=0,i=Object.keys(e);r<i.length;r++){var o=i[r],a=e[o];switch(o){case"enab":n.enabled=!!a;break;case"uglg":n.useGlobalLight=!!a;break;case"AntA":n.antialiased=!!a;break;case"Algn":n.align=!!a;break;case"Dthr":n.dither=!!a;break;case"Invr":n.invert=!!a;break;case"Rvrs":n.reverse=!!a;break;case"Clr ":n.color=Ri(a);break;case"hglC":n.highlightColor=Ri(a);break;case"sdwC":n.shadowColor=Ri(a);break;case"Styl":n.position=P.FStl.decode(a);break;case"Md  ":n.blendMode=P.BlnM.decode(a);break;case"hglM":n.highlightBlendMode=P.BlnM.decode(a);break;case"sdwM":n.shadowBlendMode=P.BlnM.decode(a);break;case"bvlS":n.style=P.BESl.decode(a);break;case"bvlD":n.direction=P.BESs.decode(a);break;case"bvlT":n.technique=P.bvlT.decode(a);break;case"GlwT":n.technique=P.BETE.decode(a);break;case"glwS":n.source=P.IGSr.decode(a);break;case"Type":n.type=P.GrdT.decode(a);break;case"gs99":n.interpolationMethod=P.gradientInterpolationMethodType.decode(a);break;case"Opct":n.opacity=mt(a);break;case"hglO":n.highlightOpacity=mt(a);break;case"sdwO":n.shadowOpacity=mt(a);break;case"lagl":n.angle=gl(a);break;case"Angl":n.angle=gl(a);break;case"Lald":n.altitude=gl(a);break;case"Sftn":n.soften=kn(a);break;case"srgR":n.strength=mt(a);break;case"blur":n.size=kn(a);break;case"Nose":n.noise=mt(a);break;case"Inpr":n.range=mt(a);break;case"Ckmt":n.choke=kn(a);break;case"ShdN":n.jitter=mt(a);break;case"Dstn":n.distance=kn(a);break;case"Scl ":n.scale=mt(a);break;case"Ptrn":n.pattern={name:a["Nm  "],id:a.Idnt};break;case"phase":n.phase={x:a.Hrzn,y:a.Vrtc};break;case"Ofst":n.offset={x:mt(a.Hrzn),y:mt(a.Vrtc)};break;case"MpgS":case"TrnS":n.contour={name:a["Nm  "],curve:a["Crv "].map(function(l){return{x:l.Hrzn,y:l.Vrtc}})};break;case"Grad":n.gradient=qy(a);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":n[o]=a;break;case"_name":case"_classID":break;default:t&&console.log("Invalid effect key: '".concat(o,"', value:"),a)}}return n}function nn(e,t,n){for(var r={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],l=a,s=e[l];switch(l){case"enabled":r.enab=!!s;break;case"useGlobalLight":r.uglg=!!s;break;case"antialiased":r.AntA=!!s;break;case"align":r.Algn=!!s;break;case"dither":r.Dthr=!!s;break;case"invert":r.Invr=!!s;break;case"reverse":r.Rvrs=!!s;break;case"color":r["Clr "]=Oi(s);break;case"highlightColor":r.hglC=Oi(s);break;case"shadowColor":r.sdwC=Oi(s);break;case"position":r.Styl=P.FStl.encode(s);break;case"blendMode":r["Md  "]=P.BlnM.encode(s);break;case"highlightBlendMode":r.hglM=P.BlnM.encode(s);break;case"shadowBlendMode":r.sdwM=P.BlnM.encode(s);break;case"style":r.bvlS=P.BESl.encode(s);break;case"direction":r.bvlD=P.BESs.encode(s);break;case"technique":t==="bevel"?r.bvlT=P.bvlT.encode(s):r.GlwT=P.BETE.encode(s);break;case"source":r.glwS=P.IGSr.encode(s);break;case"type":r.Type=P.GrdT.encode(s);break;case"interpolationMethod":r.gs99=P.gradientInterpolationMethodType.encode(s);break;case"opacity":r.Opct=xt(s);break;case"highlightOpacity":r.hglO=xt(s);break;case"shadowOpacity":r.sdwO=xt(s);break;case"angle":t==="gradientOverlay"||t==="patternFill"?r.Angl=Ro(s):r.lagl=Ro(s);break;case"altitude":r.Lald=Ro(s);break;case"soften":r.Sftn=qn(s,l);break;case"strength":r.srgR=xt(s);break;case"size":r.blur=qn(s,l);break;case"noise":r.Nose=xt(s);break;case"range":r.Inpr=xt(s);break;case"choke":r.Ckmt=qn(s,l);break;case"jitter":r.ShdN=xt(s);break;case"distance":r.Dstn=qn(s,l);break;case"scale":r["Scl "]=xt(s);break;case"pattern":r.Ptrn={"Nm  ":s.name,Idnt:s.id};break;case"phase":r.phase={Hrzn:s.x,Vrtc:s.y};break;case"offset":r.Ofst={Hrzn:xt(s.x),Vrtc:xt(s.y)};break;case"contour":{r[t==="satin"?"MpgS":"TrnS"]={"Nm  ":s.name,"Crv ":s.curve.map(function(u){return{Hrzn:u.x,Vrtc:u.y}})};break}case"gradient":r.Grad=Qy(s);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":r[l]=s;break;default:n&&console.log("Invalid effect key: '".concat(l,"', value:"),s)}}return r}function qy(e){if(e.GrdF==="GrdF.CstS"){var t=e.Intr||4096;return{type:"solid",name:e["Nm  "],smoothness:e.Intr/4096,colorStops:e.Clrs.map(function(n){return{color:Ri(n["Clr "]),location:n.Lctn/t,midpoint:n.Mdpn/100}}),opacityStops:e.Trns.map(function(n){return{opacity:mt(n.Opct),location:n.Lctn/t,midpoint:n.Mdpn/100}})}}else return{type:"noise",name:e["Nm  "],roughness:e.Smth/4096,colorModel:P.ClrS.decode(e.ClrS),randomSeed:e.RndS,restrictColors:!!e.VctC,addTransparency:!!e.ShTr,min:e["Mnm "].map(function(n){return n/100}),max:e["Mxm "].map(function(n){return n/100})}}function Qy(e){var t,n;if(e.type==="solid"){var r=Math.round(((t=e.smoothness)!==null&&t!==void 0?t:1)*4096);return{"Nm  ":e.name||"",GrdF:"GrdF.CstS",Intr:r,Clrs:e.colorStops.map(function(i){var o;return{"Clr ":Oi(i.color),Type:"Clry.UsrS",Lctn:Math.round(i.location*r),Mdpn:Math.round(((o=i.midpoint)!==null&&o!==void 0?o:.5)*100)}}),Trns:e.opacityStops.map(function(i){var o;return{Opct:xt(i.opacity),Lctn:Math.round(i.location*r),Mdpn:Math.round(((o=i.midpoint)!==null&&o!==void 0?o:.5)*100)}})}}else return{GrdF:"GrdF.ClNs","Nm  ":e.name||"",ShTr:!!e.addTransparency,VctC:!!e.restrictColors,ClrS:P.ClrS.encode(e.colorModel),RndS:e.randomSeed||0,Smth:Math.round(((n=e.roughness)!==null&&n!==void 0?n:1)*4096),"Mnm ":(e.min||[0,0,0,0]).map(function(i){return i*100}),"Mxm ":(e.max||[1,1,1,1]).map(function(i){return i*100})}}function Jy(e){var t=qy(e.Grad);return t.style=P.GrdT.decode(e.Type),e.Dthr!==void 0&&(t.dither=e.Dthr),e.gradientsInterpolationMethod!==void 0&&(t.interpolationMethod=P.gradientInterpolationMethodType.decode(e.gradientsInterpolationMethod)),e.Rvrs!==void 0&&(t.reverse=e.Rvrs),e.Angl!==void 0&&(t.angle=gl(e.Angl)),e["Scl "]!==void 0&&(t.scale=mt(e["Scl "])),e.Algn!==void 0&&(t.align=e.Algn),e.Ofst!==void 0&&(t.offset={x:mt(e.Ofst.Hrzn),y:mt(e.Ofst.Vrtc)}),t}function e2(e){var t={name:e.Ptrn["Nm  "],id:e.Ptrn.Idnt};return e.Lnkd!==void 0&&(t.linked=e.Lnkd),e.phase!==void 0&&(t.phase={x:e.phase.Hrzn,y:e.phase.Vrtc}),t}function U3(e){if("Grad"in e)return Jy(e);if("Ptrn"in e)return mr({type:"pattern"},e2(e));if("Clr "in e)return{type:"color",color:Ri(e["Clr "])};throw new Error("Invalid vector content")}P.parseVectorContent=U3;function t2(e){var t={};return e.dither!==void 0&&(t.Dthr=e.dither),e.interpolationMethod!==void 0&&(t.gradientsInterpolationMethod=P.gradientInterpolationMethodType.encode(e.interpolationMethod)),e.reverse!==void 0&&(t.Rvrs=e.reverse),e.angle!==void 0&&(t.Angl=Ro(e.angle)),t.Type=P.GrdT.encode(e.style),e.align!==void 0&&(t.Algn=e.align),e.scale!==void 0&&(t["Scl "]=xt(e.scale)),e.offset&&(t.Ofst={Hrzn:xt(e.offset.x),Vrtc:xt(e.offset.y)}),t.Grad=Qy(e),t}function n2(e){var t={Ptrn:{"Nm  ":e.name||"",Idnt:e.id||""}};return e.linked!==void 0&&(t.Lnkd=!!e.linked),e.phase!==void 0&&(t.phase={Hrzn:e.phase.x,Vrtc:e.phase.y}),t}function B3(e){return e.type==="color"?{key:"SoCo",descriptor:{"Clr ":Oi(e.color)}}:e.type==="pattern"?{key:"PtFl",descriptor:n2(e)}:{key:"GdFl",descriptor:t2(e)}}P.serializeVectorContent=B3;function Ri(e){if("H   "in e)return{h:r2(e["H   "]),s:e.Strt,b:e.Brgh};if("Rd  "in e)return{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]};if("Cyn "in e)return{c:e["Cyn "],m:e.Mgnt,y:e["Ylw "],k:e.Blck};if("Gry "in e)return{k:e["Gry "]};if("Lmnc"in e)return{l:e.Lmnc,a:e["A   "],b:e["B   "]};if("redFloat"in e)return{fr:e.redFloat,fg:e.greenFloat,fb:e.blueFloat};throw new Error("Unsupported color descriptor")}P.parseColor=Ri;function Oi(e){if(e){if("r"in e)return{_name:"",_classID:"RGBC","Rd  ":e.r||0,"Grn ":e.g||0,"Bl  ":e.b||0};if("fr"in e)return{_name:"",_classID:"RGBC",redFloat:e.fr,greenFloat:e.fg,blueFloat:e.fb};if("h"in e)return{_name:"",_classID:"HSBC","H   ":Ro(e.h*360),Strt:e.s||0,Brgh:e.b||0};if("c"in e)return{_name:"",_classID:"CMYC","Cyn ":e.c||0,Mgnt:e.m||0,"Ylw ":e.y||0,Blck:e.k||0};if("l"in e)return{_name:"",_classID:"LABC",Lmnc:e.l||0,"A   ":e.a||0,"B   ":e.b||0};if("k"in e)return{_name:"",_classID:"GRYC","Gry ":e.k};throw new Error("Invalid color value")}else return{_name:"",_classID:"RGBC","Rd  ":0,"Grn ":0,"Bl  ":0}}P.serializeColor=Oi;function gl(e){if(e===void 0)return 0;if(e.units!=="Angle")throw new Error("Invalid units: ".concat(e.units));return e.value}P.parseAngle=gl;function mt(e){if(e===void 0)return 1;if(e.units!=="Percent")throw new Error("Invalid units: ".concat(e.units));return e.value/100}P.parsePercent=mt;function r2(e){if(e===void 0)return 1;if(e.units==="Percent")return e.value/100;if(e.units==="Angle")return e.value/360;throw new Error("Invalid units: ".concat(e.units))}P.parsePercentOrAngle=r2;function kn(e){var t=e.units,n=e.value;if(t!=="Pixels"&&t!=="Millimeters"&&t!=="Points"&&t!=="None"&&t!=="Picas"&&t!=="Inches"&&t!=="Centimeters"&&t!=="Density")throw new Error("Invalid units: ".concat(JSON.stringify({units:t,value:n})));return{value:n,units:t}}P.parseUnits=kn;function z3(e,t){return t===void 0&&(t="Pixels"),typeof e=="number"?{value:e,units:t}:kn(e)}P.parseUnitsOrNumber=z3;function V3(e,t){var n=e.units,r=e.value;if(n!==t)throw new Error("Invalid units: ".concat(JSON.stringify({units:n,value:r})));return r}P.parseUnitsToNumber=V3;function Ro(e){return{units:"Angle",value:e||0}}P.unitsAngle=Ro;function xt(e){return{units:"Percent",value:Math.round((e||0)*100)}}P.unitsPercent=xt;function j0(e){return{units:"Percent",value:(e||0)*100}}P.unitsPercentF=j0;function qn(e,t){if(e==null)return{units:"Pixels",value:0};if(typeof e!="object")throw new Error("Invalid value: ".concat(JSON.stringify(e)," (key: ").concat(t,") (should have value and units)"));var n=e.units,r=e.value;if(typeof r!="number")throw new Error("Invalid value in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));if(n!=="Pixels"&&n!=="Millimeters"&&n!=="Points"&&n!=="None"&&n!=="Picas"&&n!=="Inches"&&n!=="Centimeters"&&n!=="Density")throw new Error("Invalid units in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));return{units:n,value:r}}P.unitsValue=qn;function H3(e){var t=e.numerator,n=e.denominator;return{numerator:t,denominator:n}}P.frac=H3;P.textGridding=(0,oe.createEnum)("textGridding","none",{none:"None",round:"Rnd "});P.Ornt=(0,oe.createEnum)("Ornt","horizontal",{horizontal:"Hrzn",vertical:"Vrtc"});P.Annt=(0,oe.createEnum)("Annt","sharp",{none:"Anno",sharp:"antiAliasSharp",crisp:"AnCr",strong:"AnSt",smooth:"AnSm",platform:"antiAliasPlatformGray",platformLCD:"antiAliasPlatformLCD"});P.warpStyle=(0,oe.createEnum)("warpStyle","none",{none:"warpNone",arc:"warpArc",arcLower:"warpArcLower",arcUpper:"warpArcUpper",arch:"warpArch",bulge:"warpBulge",shellLower:"warpShellLower",shellUpper:"warpShellUpper",flag:"warpFlag",wave:"warpWave",fish:"warpFish",rise:"warpRise",fisheye:"warpFisheye",inflate:"warpInflate",squeeze:"warpSqueeze",twist:"warpTwist",cylinder:"warpCylinder",custom:"warpCustom"});P.BlnM=(0,oe.createEnum)("BlnM","normal",{normal:"Nrml",dissolve:"Dslv",darken:"Drkn",multiply:"Mltp","color burn":"CBrn","linear burn":"linearBurn","darker color":"darkerColor",lighten:"Lghn",screen:"Scrn","color dodge":"CDdg","linear dodge":"linearDodge","lighter color":"lighterColor",overlay:"Ovrl","soft light":"SftL","hard light":"HrdL","vivid light":"vividLight","linear light":"linearLight","pin light":"pinLight","hard mix":"hardMix",difference:"Dfrn",exclusion:"Xclu",subtract:"blendSubtraction",divide:"blendDivide",hue:"H   ",saturation:"Strt",color:"Clr ",luminosity:"Lmns","linear height":"linearHeight",height:"Hght",subtraction:"Sbtr"});P.BESl=(0,oe.createEnum)("BESl","inner bevel",{"inner bevel":"InrB","outer bevel":"OtrB",emboss:"Embs","pillow emboss":"PlEb","stroke emboss":"strokeEmboss"});P.bvlT=(0,oe.createEnum)("bvlT","smooth",{smooth:"SfBL","chisel hard":"PrBL","chisel soft":"Slmt"});P.BESs=(0,oe.createEnum)("BESs","up",{up:"In  ",down:"Out "});P.BETE=(0,oe.createEnum)("BETE","softer",{softer:"SfBL",precise:"PrBL"});P.IGSr=(0,oe.createEnum)("IGSr","edge",{edge:"SrcE",center:"SrcC"});P.GrdT=(0,oe.createEnum)("GrdT","linear",{linear:"Lnr ",radial:"Rdl ",angle:"Angl",reflected:"Rflc",diamond:"Dmnd"});P.animInterpStyleEnum=(0,oe.createEnum)("animInterpStyle","linear",{linear:"Lnr ",hold:"hold"});P.stdTrackID=(0,oe.createEnum)("stdTrackID","opacity",{opacity:"opacityTrack",style:"styleTrack",sheetTransform:"sheetTransformTrack",sheetPosition:"sheetPositionTrack",globalLighting:"globalLightingTrack"});P.gradientInterpolationMethodType=(0,oe.createEnum)("gradientInterpolationMethodType","perceptual",{perceptual:"Perc",linear:"Lnr ",classic:"Gcls",smooth:"Smoo"});P.ClrS=(0,oe.createEnum)("ClrS","rgb",{rgb:"RGBC",hsb:"HSBl",lab:"LbCl",hsl:"HSLC"});P.FStl=(0,oe.createEnum)("FStl","outside",{outside:"OutF",center:"CtrF",inside:"InsF"});P.FrFl=(0,oe.createEnum)("FrFl","color",{color:"SClr",gradient:"GrFl",pattern:"Ptrn"});P.ESliceType=(0,oe.createEnum)("ESliceType","image",{image:"Img ",noImage:"noImage"});P.ESliceHorzAlign=(0,oe.createEnum)("ESliceHorzAlign","default",{default:"default"});P.ESliceVertAlign=(0,oe.createEnum)("ESliceVertAlign","default",{default:"default"});P.ESliceOrigin=(0,oe.createEnum)("ESliceOrigin","userGenerated",{userGenerated:"userGenerated",autoGenerated:"autoGenerated",layer:"layer"});P.ESliceBGColorType=(0,oe.createEnum)("ESliceBGColorType","none",{none:"None",matte:"matte",color:"Clr "});P.strokeStyleLineCapType=(0,oe.createEnum)("strokeStyleLineCapType","butt",{butt:"strokeStyleButtCap",round:"strokeStyleRoundCap",square:"strokeStyleSquareCap"});P.strokeStyleLineJoinType=(0,oe.createEnum)("strokeStyleLineJoinType","miter",{miter:"strokeStyleMiterJoin",round:"strokeStyleRoundJoin",bevel:"strokeStyleBevelJoin"});P.strokeStyleLineAlignment=(0,oe.createEnum)("strokeStyleLineAlignment","inside",{inside:"strokeStyleAlignInside",center:"strokeStyleAlignCenter",outside:"strokeStyleAlignOutside"});P.BlrM=(0,oe.createEnum)("BlrM","ispinmage",{spin:"Spn ",zoom:"Zm  "});P.BlrQ=(0,oe.createEnum)("BlrQ","good",{draft:"Drft",good:"Gd  ",best:"Bst "});P.SmBM=(0,oe.createEnum)("SmBM","normal",{normal:"SBMN","edge only":"SBME","overlay edge":"SBMO"});P.SmBQ=(0,oe.createEnum)("SmBQ","medium",{low:"SBQL",medium:"SBQM",high:"SBQH"});P.DspM=(0,oe.createEnum)("DspM","stretch to fit",{"stretch to fit":"StrF",tile:"Tile"});P.UndA=(0,oe.createEnum)("UndA","repeat edge pixels",{"wrap around":"WrpA","repeat edge pixels":"RptE"});P.Cnvr=(0,oe.createEnum)("Cnvr","rectangular to polar",{"rectangular to polar":"RctP","polar to rectangular":"PlrR"});P.RplS=(0,oe.createEnum)("RplS","medium",{small:"Sml ",medium:"Mdm ",large:"Lrg "});P.SphM=(0,oe.createEnum)("SphM","normal",{normal:"Nrml","horizontal only":"HrzO","vertical only":"VrtO"});P.Wvtp=(0,oe.createEnum)("Wvtp","sine",{sine:"WvSn",triangle:"WvTr",square:"WvSq"});P.ZZTy=(0,oe.createEnum)("ZZTy","pond ripples",{"around center":"ArnC","out from center":"OtFr","pond ripples":"PndR"});P.Dstr=(0,oe.createEnum)("Dstr","uniform",{uniform:"Unfr",gaussian:"Gsn "});P.Chnl=(0,oe.createEnum)("Chnl","composite",{red:"Rd  ",green:"Grn ",blue:"Bl  ",composite:"Cmps"});P.MztT=(0,oe.createEnum)("MztT","fine dots",{"fine dots":"FnDt","medium dots":"MdmD","grainy dots":"GrnD","coarse dots":"CrsD","short lines":"ShrL","medium lines":"MdmL","long lines":"LngL","short strokes":"ShSt","medium strokes":"MdmS","long strokes":"LngS"});P.Lns=(0,oe.createEnum)("Lns ","50-300mm zoom",{"50-300mm zoom":"Zm  ","32mm prime":"Nkn ","105mm prime":"Nkn1","movie prime":"PnVs"});P.blurType=(0,oe.createEnum)("blurType","gaussian blur",{"gaussian blur":"GsnB","lens blur":"lensBlur","motion blur":"MtnB"});P.DfsM=(0,oe.createEnum)("DfsM","normal",{normal:"Nrml","darken only":"DrkO","lighten only":"LghO",anisotropic:"anisotropic"});P.ExtT=(0,oe.createEnum)("ExtT","blocks",{blocks:"Blks",pyramids:"Pyrm"});P.ExtR=(0,oe.createEnum)("ExtR","random",{random:"Rndm","level-based":"LvlB"});P.FlCl=(0,oe.createEnum)("FlCl","background color",{"background color":"FlBc","foreground color":"FlFr","inverse image":"FlIn","unaltered image":"FlSm"});P.CntE=(0,oe.createEnum)("CntE","upper",{lower:"Lwr ",upper:"Upr "});P.WndM=(0,oe.createEnum)("WndM","wind",{wind:"Wnd ",blast:"Blst",stagger:"Stgr"});P.Drct=(0,oe.createEnum)("Drct","from the right",{left:"Left",right:"Rght"});P.IntE=(0,oe.createEnum)("IntE","odd lines",{"odd lines":"ElmO","even lines":"ElmE"});P.IntC=(0,oe.createEnum)("IntC","interpolation",{duplication:"CrtD",interpolation:"CrtI"});P.FlMd=(0,oe.createEnum)("FlMd","wrap around",{"set to transparent":"Bckg","repeat edge pixels":"Rpt ","wrap around":"Wrp "});P.prjM=(0,oe.createEnum)("prjM","fisheye",{fisheye:"fisP",perspective:"perP",auto:"auto","full spherical":"fusP"});P.presetKindType=(0,oe.createEnum)("presetKindType","presetKindCustom",{custom:"presetKindCustom",default:"presetKindDefault"})});var K0=de(Qn=>{"use strict";var Fo=Qn&&Qn.__assign||function(){return Fo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Fo.apply(this,arguments)};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.resourceHandlersMap=Qn.resourceHandlers=void 0;var G3=qa(),N=ni(),B=Oo(),Tt=ti(),Iu=Ny(),fe=Su();Qn.resourceHandlers=[];Qn.resourceHandlersMap={};function ue(e,t,n,r){var i={key:e,has:t,read:n,write:r};Qn.resourceHandlers.push(i),Qn.resourceHandlersMap[i.key]=i}var wn=!1,xu=[void 0,"PPI","PPCM"],_u=[void 0,"Inches","Centimeters","Points","Picas","Columns"],i2="0123456789abcdef";function o2(e){return e<=57?e-48:e-87}function W3(e,t){return o2(e.charCodeAt(t))<<4|o2(e.charCodeAt(t+1))}function X0(e,t){var n=(0,N.readBytes)(e,t);return(0,Iu.decodeString)(n)}function Z0(e,t){var n=(0,Iu.encodeString)(t);(0,B.writeBytes)(e,n)}function j3(e){for(var t=(0,N.readUint8)(e),n=(0,N.readBytes)(e,t),r=!1,i=0;i<n.byteLength;i++)if(n[i]&128){r=!0;break}if(r){var o=new TextDecoder("gbk");return o.decode(n)}else return(0,Iu.decodeString)(n)}function $3(e,t){for(var n="",r=0,i=t.codePointAt(r++);i!==void 0;i=t.codePointAt(r++))n+=i>127?"?":String.fromCodePoint(i);var o=(0,Iu.encodeString)(n);(0,B.writeUint8)(e,o.byteLength),(0,B.writeBytes)(e,o)}Tt.MOCK_HANDLERS&&ue(1028,function(e){return e._ir1028!==void 0},function(e,t,n){wn&&console.log("image resource 1028",n()),t._ir1028=(0,N.readBytes)(e,n())},function(e,t){(0,B.writeBytes)(e,t._ir1028)});ue(1061,function(e){return e.captionDigest!==void 0},function(e,t){for(var n="",r=0;r<16;r++){var i=(0,N.readUint8)(e);n+=i2[i>>4],n+=i2[i&15]}t.captionDigest=n},function(e,t){for(var n=0;n<16;n++)(0,B.writeUint8)(e,W3(t.captionDigest,n*2))});ue(1060,function(e){return e.xmpMetadata!==void 0},function(e,t,n){t.xmpMetadata=X0(e,n())},function(e,t){Z0(e,t.xmpMetadata)});var Eu=(0,Tt.createEnum)("Inte","perceptual",{perceptual:"Img ",saturation:"Grp ","relative colorimetric":"Clrm","absolute colorimetric":"AClr"});ue(1082,function(e){return e.printInformation!==void 0},function(e,t){var n,r,i=(0,fe.readVersionAndDescriptor)(e);t.printInformation={printerName:i.printerName||"",renderingIntent:Eu.decode((n=i.Inte)!==null&&n!==void 0?n:"Inte.Img ")};var o=t.printInformation;i.PstS!==void 0&&(o.printerManagesColors=i.PstS),i["Nm  "]!==void 0&&(o.printerProfile=i["Nm  "]),i.MpBl!==void 0&&(o.blackPointCompensation=i.MpBl),i.printSixteenBit!==void 0&&(o.printSixteenBit=i.printSixteenBit),i.hardProof!==void 0&&(o.hardProof=i.hardProof),i.printProofSetup&&("Bltn"in i.printProofSetup?o.proofSetup={builtin:i.printProofSetup.Bltn.split(".")[1]}:o.proofSetup={profile:i.printProofSetup.profile,renderingIntent:Eu.decode((r=i.printProofSetup.Inte)!==null&&r!==void 0?r:"Inte.Img "),blackPointCompensation:!!i.printProofSetup.MpBl,paperWhite:!!i.printProofSetup.paperWhite})},function(e,t){var n,r,i=t.printInformation,o={};i.printerManagesColors?o.PstS=!0:(i.hardProof!==void 0&&(o.hardProof=!!i.hardProof),o.ClrS="ClrS.RGBC",o["Nm  "]=(n=i.printerProfile)!==null&&n!==void 0?n:"CIE RGB"),o.Inte=Eu.encode(i.renderingIntent),i.printerManagesColors||(o.MpBl=!!i.blackPointCompensation),o.printSixteenBit=!!i.printSixteenBit,o.printerName=i.printerName||"",i.proofSetup&&"profile"in i.proofSetup?o.printProofSetup={profile:i.proofSetup.profile||"",Inte:Eu.encode(i.proofSetup.renderingIntent),MpBl:!!i.proofSetup.blackPointCompensation,paperWhite:!!i.proofSetup.paperWhite}:o.printProofSetup={Bltn:!((r=i.proofSetup)===null||r===void 0)&&r.builtin?"builtinProof.".concat(i.proofSetup.builtin):"builtinProof.proofCMYK"},(0,fe.writeVersionAndDescriptor)(e,"","printOutput",o)});Tt.MOCK_HANDLERS&&ue(1083,function(e){return e._ir1083!==void 0},function(e,t,n){wn&&console.log("image resource 1083",n()),t._ir1083=(0,N.readBytes)(e,n())},function(e,t){(0,B.writeBytes)(e,t._ir1083)});ue(1005,function(e){return e.resolutionInfo!==void 0},function(e,t){var n=(0,N.readFixedPoint32)(e),r=(0,N.readUint16)(e),i=(0,N.readUint16)(e),o=(0,N.readFixedPoint32)(e),a=(0,N.readUint16)(e),l=(0,N.readUint16)(e);t.resolutionInfo={horizontalResolution:n,horizontalResolutionUnit:xu[r]||"PPI",widthUnit:_u[i]||"Inches",verticalResolution:o,verticalResolutionUnit:xu[a]||"PPI",heightUnit:_u[l]||"Inches"}},function(e,t){var n=t.resolutionInfo;(0,B.writeFixedPoint32)(e,n.horizontalResolution||0),(0,B.writeUint16)(e,Math.max(1,xu.indexOf(n.horizontalResolutionUnit))),(0,B.writeUint16)(e,Math.max(1,_u.indexOf(n.widthUnit))),(0,B.writeFixedPoint32)(e,n.verticalResolution||0),(0,B.writeUint16)(e,Math.max(1,xu.indexOf(n.verticalResolutionUnit))),(0,B.writeUint16)(e,Math.max(1,_u.indexOf(n.heightUnit)))});var a2=["centered","size to fit","user defined"];ue(1062,function(e){return e.printScale!==void 0},function(e,t){t.printScale={style:a2[(0,N.readInt16)(e)],x:(0,N.readFloat32)(e),y:(0,N.readFloat32)(e),scale:(0,N.readFloat32)(e)}},function(e,t){var n=t.printScale,r=n.style,i=n.x,o=n.y,a=n.scale;(0,B.writeInt16)(e,Math.max(0,a2.indexOf(r))),(0,B.writeFloat32)(e,i||0),(0,B.writeFloat32)(e,o||0),(0,B.writeFloat32)(e,a||0)});ue(1006,function(e){return e.alphaChannelNames!==void 0},function(e,t,n){if(t.alphaChannelNames)(0,N.skipBytes)(e,n());else for(t.alphaChannelNames=[];n()>0;){var r=j3(e);t.alphaChannelNames.push(r)}},function(e,t){for(var n=0,r=t.alphaChannelNames;n<r.length;n++){var i=r[n];$3(e,i)}});ue(1045,function(e){return e.alphaChannelNames!==void 0},function(e,t,n){for(t.alphaChannelNames=[];n()>0;)t.alphaChannelNames.push((0,N.readUnicodeString)(e))},function(e,t){for(var n=0,r=t.alphaChannelNames;n<r.length;n++){var i=r[n];(0,B.writeUnicodeStringWithPadding)(e,i)}});Tt.MOCK_HANDLERS&&ue(1077,function(e){return e._ir1077!==void 0},function(e,t,n){wn&&console.log("image resource 1077",n()),t._ir1077=(0,N.readBytes)(e,n())},function(e,t){(0,B.writeBytes)(e,t._ir1077)});ue(1053,function(e){return e.alphaIdentifiers!==void 0},function(e,t,n){for(t.alphaIdentifiers=[];n()>=4;)t.alphaIdentifiers.push((0,N.readUint32)(e))},function(e,t){for(var n=0,r=t.alphaIdentifiers;n<r.length;n++){var i=r[n];(0,B.writeUint32)(e,i)}});ue(1010,function(e){return e.backgroundColor!==void 0},function(e,t){return t.backgroundColor=(0,N.readColor)(e)},function(e,t){return(0,B.writeColor)(e,t.backgroundColor)});ue(1037,function(e){return e.globalAngle!==void 0},function(e,t){return t.globalAngle=(0,N.readInt32)(e)},function(e,t){return(0,B.writeInt32)(e,t.globalAngle)});ue(1049,function(e){return e.globalAltitude!==void 0},function(e,t){return t.globalAltitude=(0,N.readUint32)(e)},function(e,t){return(0,B.writeUint32)(e,t.globalAltitude)});ue(1011,function(e){return e.printFlags!==void 0},function(e,t){t.printFlags={labels:!!(0,N.readUint8)(e),cropMarks:!!(0,N.readUint8)(e),colorBars:!!(0,N.readUint8)(e),registrationMarks:!!(0,N.readUint8)(e),negative:!!(0,N.readUint8)(e),flip:!!(0,N.readUint8)(e),interpolate:!!(0,N.readUint8)(e),caption:!!(0,N.readUint8)(e),printFlags:!!(0,N.readUint8)(e)}},function(e,t){var n=t.printFlags;(0,B.writeUint8)(e,n.labels?1:0),(0,B.writeUint8)(e,n.cropMarks?1:0),(0,B.writeUint8)(e,n.colorBars?1:0),(0,B.writeUint8)(e,n.registrationMarks?1:0),(0,B.writeUint8)(e,n.negative?1:0),(0,B.writeUint8)(e,n.flip?1:0),(0,B.writeUint8)(e,n.interpolate?1:0),(0,B.writeUint8)(e,n.caption?1:0),(0,B.writeUint8)(e,n.printFlags?1:0)});Tt.MOCK_HANDLERS&&ue(1e4,function(e){return e._ir10000!==void 0},function(e,t,n){wn&&console.log("image resource 10000",n()),t._ir10000=(0,N.readBytes)(e,n())},function(e,t){(0,B.writeBytes)(e,t._ir10000)});Tt.MOCK_HANDLERS&&ue(1013,function(e){return e._ir1013!==void 0},function(e,t,n){wn&&console.log("image resource 1013",n()),t._ir1013=(0,N.readBytes)(e,n())},function(e,t){(0,B.writeBytes)(e,t._ir1013)});Tt.MOCK_HANDLERS&&ue(1016,function(e){return e._ir1016!==void 0},function(e,t,n){wn&&console.log("image resource 1016",n()),t._ir1016=(0,N.readBytes)(e,n())},function(e,t){(0,B.writeBytes)(e,t._ir1016)});ue(1080,function(e){return e.countInformation!==void 0},function(e,t){var n=(0,fe.readVersionAndDescriptor)(e);t.countInformation=n.countGroupList.map(function(r){return{color:{r:r["Rd  "],g:r["Grn "],b:r["Bl  "]},name:r["Nm  "],size:r["Rds "],fontSize:r.fontSize,visible:r.Vsbl,points:r.countObjectList.map(function(i){return{x:i["X   "],y:i["Y   "]}})}})},function(e,t){var n={Vrsn:1,countGroupList:t.countInformation.map(function(r){return{"Rd  ":r.color.r,"Grn ":r.color.g,"Bl  ":r.color.b,"Nm  ":r.name,"Rds ":r.size,fontSize:r.fontSize,Vsbl:r.visible,countObjectList:r.points.map(function(i){return{"X   ":i.x,"Y   ":i.y}})}})};(0,fe.writeVersionAndDescriptor)(e,"","Cnt ",n)});ue(1024,function(e){return e.layerState!==void 0},function(e,t){return t.layerState=(0,N.readUint16)(e)},function(e,t){return(0,B.writeUint16)(e,t.layerState)});ue(1026,function(e){return e.layersGroup!==void 0},function(e,t,n){for(t.layersGroup=[];n()>0;)t.layersGroup.push((0,N.readUint16)(e))},function(e,t){for(var n=0,r=t.layersGroup;n<r.length;n++){var i=r[n];(0,B.writeUint16)(e,i)}});ue(1072,function(e){return e.layerGroupsEnabledId!==void 0},function(e,t,n){for(t.layerGroupsEnabledId=[];n()>0;)t.layerGroupsEnabledId.push((0,N.readUint8)(e))},function(e,t){for(var n=0,r=t.layerGroupsEnabledId;n<r.length;n++){var i=r[n];(0,B.writeUint8)(e,i)}});ue(1069,function(e){return e.layerSelectionIds!==void 0},function(e,t){var n=(0,N.readUint16)(e);for(t.layerSelectionIds=[];n--;)t.layerSelectionIds.push((0,N.readUint32)(e))},function(e,t){(0,B.writeUint16)(e,t.layerSelectionIds.length);for(var n=0,r=t.layerSelectionIds;n<r.length;n++){var i=r[n];(0,B.writeUint32)(e,i)}});ue(1032,function(e){return e.gridAndGuidesInformation!==void 0},function(e,t){var n=(0,N.readUint32)(e),r=(0,N.readUint32)(e),i=(0,N.readUint32)(e),o=(0,N.readUint32)(e);if(n!==1)throw new Error("Invalid 1032 resource version: ".concat(n));t.gridAndGuidesInformation={grid:{horizontal:r,vertical:i},guides:[]};for(var a=0;a<o;a++)t.gridAndGuidesInformation.guides.push({location:(0,N.readUint32)(e)/32,direction:(0,N.readUint8)(e)?"horizontal":"vertical"})},function(e,t){var n=t.gridAndGuidesInformation,r=n.grid||{horizontal:18*32,vertical:18*32},i=n.guides||[];(0,B.writeUint32)(e,1),(0,B.writeUint32)(e,r.horizontal),(0,B.writeUint32)(e,r.vertical),(0,B.writeUint32)(e,i.length);for(var o=0,a=i;o<a.length;o++){var l=a[o];(0,B.writeUint32)(e,l.location*32),(0,B.writeUint8)(e,l.direction==="horizontal"?1:0)}});ue(1065,function(e){return e.layerComps!==void 0},function(e,t){var n=(0,fe.readVersionAndDescriptor)(e,!0);t.layerComps={list:[]};for(var r=0,i=n.list;r<i.length;r++){var o=i[r];t.layerComps.list.push({id:o.compID,name:o["Nm  "],capturedInfo:o.capturedInfo}),"comment"in o&&(t.layerComps.list[t.layerComps.list.length-1].comment=o.comment)}"lastAppliedComp"in n&&(t.layerComps.lastApplied=n.lastAppliedComp)},function(e,t){for(var n=t.layerComps,r={list:[]},i=0,o=n.list;i<o.length;i++){var a=o[i],l={};l._classID="Comp",l["Nm  "]=a.name,"comment"in a&&(l.comment=a.comment),l.compID=a.id,l.capturedInfo=a.capturedInfo,r.list.push(l)}"lastApplied"in n&&(r.lastAppliedComp=n.lastApplied),(0,fe.writeVersionAndDescriptor)(e,"","CompList",r)});Tt.MOCK_HANDLERS&&ue(1092,function(e){return e._ir1092!==void 0},function(e,t,n){wn&&console.log("image resource 1092",n()),t._ir1092=(0,N.readBytes)(e,n())},function(e,t){(0,B.writeBytes)(e,t._ir1092)});var l2=["normal",void 0,void 0,void 0,void 0,void 0,void 0,"multiply","screen",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"difference"];ue(1078,function(e){return e.onionSkins!==void 0},function(e,t){var n=(0,fe.readVersionAndDescriptor)(e);t.onionSkins={enabled:n.enab,framesBefore:n.numBefore,framesAfter:n.numAfter,frameSpacing:n.Spcn,minOpacity:n.minOpacity/100,maxOpacity:n.maxOpacity/100,blendMode:l2[n.BlnM]||"normal"}},function(e,t){var n=t.onionSkins,r={Vrsn:1,enab:n.enabled,numBefore:n.framesBefore,numAfter:n.framesAfter,Spcn:n.frameSpacing,minOpacity:n.minOpacity*100|0,maxOpacity:n.maxOpacity*100|0,BlnM:Math.max(0,l2.indexOf(n.blendMode))};(0,fe.writeVersionAndDescriptor)(e,"","null",r)});ue(1075,function(e){return e.timelineInformation!==void 0},function(e,t){var n,r,i=(0,fe.readVersionAndDescriptor)(e);t.timelineInformation={enabled:i.enab,frameStep:(0,fe.frac)(i.frameStep),frameRate:i.frameRate,time:(0,fe.frac)(i.time),duration:(0,fe.frac)(i.duration),workInTime:(0,fe.frac)(i.workInTime),workOutTime:(0,fe.frac)(i.workOutTime),repeats:i.LCnt,hasMotion:i.hasMotion,globalTracks:(0,fe.parseTrackList)(i.globalTrackList,!!e.logMissingFeatures)},!((r=(n=i.audioClipGroupList)===null||n===void 0?void 0:n.audioClipGroupList)===null||r===void 0)&&r.length&&(t.timelineInformation.audioClipGroups=i.audioClipGroupList.audioClipGroupList.map(function(o){return{id:o.groupID,muted:o.muted,audioClips:o.audioClipList.map(function(a){var l=a.clipID,s=a.timeScope,u=a.muted,c=a.audioLevel,p=a.frameReader;return{id:l,start:(0,fe.frac)(s.Strt),duration:(0,fe.frac)(s.duration),inTime:(0,fe.frac)(s.inTime),outTime:(0,fe.frac)(s.outTime),muted:u,audioLevel:c,frameReader:{type:p.frameReaderType,mediaDescriptor:p.mediaDescriptor,link:{name:p["Lnk "]["Nm  "],fullPath:p["Lnk "].fullPath,relativePath:p["Lnk "].relPath}}}})}}))},function(e,t){var n,r=t.timelineInformation,i={Vrsn:1,enab:r.enabled,frameStep:r.frameStep,frameRate:r.frameRate,time:r.time,duration:r.duration,workInTime:r.workInTime,workOutTime:r.workOutTime,LCnt:r.repeats,globalTrackList:(0,fe.serializeTrackList)(r.globalTracks),audioClipGroupList:{audioClipGroupList:(n=r.audioClipGroups)===null||n===void 0?void 0:n.map(function(o){return{groupID:o.id,muted:o.muted,audioClipList:o.audioClips.map(function(a){return{clipID:a.id,timeScope:{Vrsn:1,Strt:a.start,duration:a.duration,inTime:a.inTime,outTime:a.outTime},frameReader:{frameReaderType:a.frameReader.type,descVersion:1,"Lnk ":{descVersion:1,"Nm  ":a.frameReader.link.name,fullPath:a.frameReader.link.fullPath,relPath:a.frameReader.link.relativePath},mediaDescriptor:a.frameReader.mediaDescriptor},muted:a.muted,audioLevel:a.audioLevel}})}})},hasMotion:r.hasMotion};(0,fe.writeVersionAndDescriptor)(e,"","null",i,"anim")});ue(1076,function(e){return e.sheetDisclosure!==void 0},function(e,t){var n=(0,fe.readVersionAndDescriptor)(e);t.sheetDisclosure={},n.sheetTimelineOptions&&(t.sheetDisclosure.sheetTimelineOptions=n.sheetTimelineOptions.map(function(r){return{sheetID:r.sheetID,sheetDisclosed:r.sheetDisclosed,lightsDisclosed:r.lightsDisclosed,meshesDisclosed:r.meshesDisclosed,materialsDisclosed:r.materialsDisclosed}}))},function(e,t){var n=t.sheetDisclosure,r={Vrsn:1};n.sheetTimelineOptions&&(r.sheetTimelineOptions=n.sheetTimelineOptions.map(function(i){return{Vrsn:2,sheetID:i.sheetID,sheetDisclosed:i.sheetDisclosed,lightsDisclosed:i.lightsDisclosed,meshesDisclosed:i.meshesDisclosed,materialsDisclosed:i.materialsDisclosed}})),(0,fe.writeVersionAndDescriptor)(e,"","null",r)});ue(1054,function(e){return e.urlsList!==void 0},function(e,t){var n=(0,N.readUint32)(e);t.urlsList=[];for(var r=0;r<n;r++){var i=(0,N.readSignature)(e);if(i!=="slic"&&e.throwForMissingFeatures)throw new Error("Unknown long");var o=(0,N.readUint32)(e),a=(0,N.readUnicodeString)(e);t.urlsList.push({id:o,url:a,ref:"slice"})}},function(e,t){var n=t.urlsList;(0,B.writeUint32)(e,n.length);for(var r=0;r<n.length;r++)(0,B.writeSignature)(e,"slic"),(0,B.writeUint32)(e,n[r].id),(0,B.writeUnicodeString)(e,n[r].url)});function s2(e){return{"Top ":e.top,Left:e.left,Btom:e.bottom,Rght:e.right}}function u2(e){return{top:e["Top "],left:e.Left,bottom:e.Btom,right:e.Rght}}function bu(e,t){return e[Math.max(0,Math.min(e.length-1,t))]}var c2=["autoGenerated","layer","userGenerated"],d2=["noImage","image"],Cu=["default"];ue(1050,function(e){return e.slices?e.slices.length:0},function(e,t){var n=(0,N.readUint32)(e);if(n===6){t.slices||(t.slices=[]);var r=(0,N.readInt32)(e),i=(0,N.readInt32)(e),o=(0,N.readInt32)(e),a=(0,N.readInt32)(e),l=(0,N.readUnicodeString)(e),s=(0,N.readUint32)(e);t.slices.push({bounds:{top:r,left:i,bottom:o,right:a},groupName:l,slices:[]});for(var u=t.slices[t.slices.length-1].slices,c=0;c<s;c++){var p=(0,N.readUint32)(e),d=(0,N.readUint32)(e),g=bu(c2,(0,N.readUint32)(e)),y=g=="layer"?(0,N.readUint32)(e):0,v=(0,N.readUnicodeString)(e),S=bu(d2,(0,N.readUint32)(e)),m=(0,N.readInt32)(e),f=(0,N.readInt32)(e),h=(0,N.readInt32)(e),w=(0,N.readInt32)(e),I=(0,N.readUnicodeString)(e),T=(0,N.readUnicodeString)(e),L=(0,N.readUnicodeString)(e),A=(0,N.readUnicodeString)(e),O=!!(0,N.readUint8)(e),R=(0,N.readUnicodeString)(e),F=bu(Cu,(0,N.readUint32)(e)),q=bu(Cu,(0,N.readUint32)(e)),D=(0,N.readUint8)(e),b=(0,N.readUint8)(e),k=(0,N.readUint8)(e),M=(0,N.readUint8)(e),H=D+b+k+M===0?"none":D===0?"matte":"color";u.push({id:p,groupId:d,origin:g,associatedLayerId:y,name:v,target:T,message:L,altTag:A,cellTextIsHTML:O,cellText:R,horizontalAlignment:F,verticalAlignment:q,type:S,url:I,bounds:{top:f,left:m,bottom:w,right:h},backgroundColorType:H,backgroundColor:{r:b,g:k,b:M,a:D}})}var j=(0,fe.readVersionAndDescriptor)(e);j.slices.forEach(function(ne){var U=u.find(function(z){return ne.sliceID==z.id});U&&(U.topOutset=ne.topOutset,U.leftOutset=ne.leftOutset,U.bottomOutset=ne.bottomOutset,U.rightOutset=ne.rightOutset)})}else if(n===7||n===8){var j=(0,fe.readVersionAndDescriptor)(e);t.slices||(t.slices=[]),t.slices.push({groupName:j.baseName,bounds:u2(j.bounds),slices:j.slices.map(function(U){return Fo(Fo({},U["Nm  "]?{name:U["Nm  "]}:{}),{id:U.sliceID,groupId:U.groupID,associatedLayerId:0,origin:fe.ESliceOrigin.decode(U.origin),type:fe.ESliceType.decode(U.Type),bounds:u2(U.bounds),url:U.url,target:U.null,message:U.Msge,altTag:U.altTag,cellTextIsHTML:U.cellTextIsHTML,cellText:U.cellText,horizontalAlignment:fe.ESliceHorzAlign.decode(U.horzAlign),verticalAlignment:fe.ESliceVertAlign.decode(U.vertAlign),backgroundColorType:fe.ESliceBGColorType.decode(U.bgColorType),backgroundColor:U.bgColor?{r:U.bgColor["Rd  "],g:U.bgColor["Grn "],b:U.bgColor["Bl  "],a:U.bgColor.alpha}:{r:0,g:0,b:0,a:0},topOutset:U.topOutset||0,leftOutset:U.leftOutset||0,bottomOutset:U.bottomOutset||0,rightOutset:U.rightOutset||0})})})}else throw new Error("Invalid slices version (".concat(n,")"))},function(e,t,n){var r=t.slices[n],i=r.bounds,o=r.groupName,a=r.slices;(0,B.writeUint32)(e,6),(0,B.writeInt32)(e,i.top),(0,B.writeInt32)(e,i.left),(0,B.writeInt32)(e,i.bottom),(0,B.writeInt32)(e,i.right),(0,B.writeUnicodeString)(e,o),(0,B.writeUint32)(e,a.length);for(var l=0;l<a.length;l++){var s=a[l],u=s.backgroundColor,c=u.a,p=u.r,d=u.g,g=u.b;s.backgroundColorType==="none"?c=p=d=g=0:s.backgroundColorType==="matte"&&(c=0,p=d=g=255),(0,B.writeUint32)(e,s.id),(0,B.writeUint32)(e,s.groupId),(0,B.writeUint32)(e,c2.indexOf(s.origin)),s.origin==="layer"&&(0,B.writeUint32)(e,s.associatedLayerId),(0,B.writeUnicodeString)(e,s.name||""),(0,B.writeUint32)(e,d2.indexOf(s.type)),(0,B.writeInt32)(e,s.bounds.left),(0,B.writeInt32)(e,s.bounds.top),(0,B.writeInt32)(e,s.bounds.right),(0,B.writeInt32)(e,s.bounds.bottom),(0,B.writeUnicodeString)(e,s.url),(0,B.writeUnicodeString)(e,s.target),(0,B.writeUnicodeString)(e,s.message),(0,B.writeUnicodeString)(e,s.altTag),(0,B.writeUint8)(e,s.cellTextIsHTML?1:0),(0,B.writeUnicodeString)(e,s.cellText),(0,B.writeUint32)(e,Cu.indexOf(s.horizontalAlignment)),(0,B.writeUint32)(e,Cu.indexOf(s.verticalAlignment)),(0,B.writeUint8)(e,c),(0,B.writeUint8)(e,p),(0,B.writeUint8)(e,d),(0,B.writeUint8)(e,g)}var y={bounds:s2(i),slices:[]};a.forEach(function(v){var S=Fo(Fo({sliceID:v.id,groupID:v.groupId,origin:fe.ESliceOrigin.encode(v.origin),Type:fe.ESliceType.encode(v.type),bounds:s2(v.bounds)},v.name?{"Nm  ":v.name}:{}),{url:v.url,null:v.target,Msge:v.message,altTag:v.altTag,cellTextIsHTML:v.cellTextIsHTML,cellText:v.cellText,horzAlign:fe.ESliceHorzAlign.encode(v.horizontalAlignment),vertAlign:fe.ESliceVertAlign.encode(v.verticalAlignment),bgColorType:fe.ESliceBGColorType.encode(v.backgroundColorType)});if(v.backgroundColorType==="color"){var m=v.backgroundColor,f=m.r,h=m.g,w=m.b,I=m.a;S.bgColor={"Rd  ":f,"Grn ":h,"Bl  ":w,alpha:I}}S.topOutset=v.topOutset||0,S.leftOutset=v.leftOutset||0,S.bottomOutset=v.bottomOutset||0,S.rightOutset=v.rightOutset||0,y.slices.push(S)}),(0,fe.writeVersionAndDescriptor)(e,"","null",y,"slices")});ue(1064,function(e){return e.pixelAspectRatio!==void 0},function(e,t){if((0,N.readUint32)(e)>2)throw new Error("Invalid pixelAspectRatio version");t.pixelAspectRatio={aspect:(0,N.readFloat64)(e)}},function(e,t){(0,B.writeUint32)(e,2),(0,B.writeFloat64)(e,t.pixelAspectRatio.aspect)});ue(1041,function(e){return e.iccUntaggedProfile!==void 0},function(e,t){t.iccUntaggedProfile=!!(0,N.readUint8)(e)},function(e,t){(0,B.writeUint8)(e,t.iccUntaggedProfile?1:0)});Tt.MOCK_HANDLERS&&ue(1039,function(e){return e._ir1039!==void 0},function(e,t,n){wn&&console.log("image resource 1039",n()),t._ir1039=(0,N.readBytes)(e,n())},function(e,t){(0,B.writeBytes)(e,t._ir1039)});ue(1044,function(e){return e.idsSeedNumber!==void 0},function(e,t){return t.idsSeedNumber=(0,N.readUint32)(e)},function(e,t){return(0,B.writeUint32)(e,t.idsSeedNumber)});ue(1036,function(e){return e.thumbnail!==void 0||e.thumbnailRaw!==void 0},function(e,t,n){var r=(0,N.readUint32)(e),i=(0,N.readUint32)(e),o=(0,N.readUint32)(e);(0,N.readUint32)(e),(0,N.readUint32)(e),(0,N.readUint32)(e);var a=(0,N.readUint16)(e),l=(0,N.readUint16)(e);if(r!==1||a!==24||l!==1){e.logMissingFeatures&&e.log("Invalid thumbnail data (format: ".concat(r,", bitsPerPixel: ").concat(a,", planes: ").concat(l,")")),(0,N.skipBytes)(e,n());return}var s=n(),u=(0,N.readBytes)(e,s);e.useRawThumbnail?t.thumbnailRaw={width:i,height:o,data:u}:u.byteLength&&(t.thumbnail=(0,Tt.createCanvasFromData)(u))},function(e,t){var n,r=0,i=0,o=new Uint8Array(0);if(t.thumbnailRaw)r=t.thumbnailRaw.width,i=t.thumbnailRaw.height,o=t.thumbnailRaw.data;else try{var a=(n=t.thumbnail.toDataURL("image/jpeg",1))===null||n===void 0?void 0:n.substring(23);a&&(o=(0,G3.toByteArray)(a),r=t.thumbnail.width,i=t.thumbnail.height)}catch(d){}var l=24,s=Math.floor((r*l+31)/32)*4,u=1,c=s*i*u,p=o.length;(0,B.writeUint32)(e,1),(0,B.writeUint32)(e,r),(0,B.writeUint32)(e,i),(0,B.writeUint32)(e,s),(0,B.writeUint32)(e,c),(0,B.writeUint32)(e,p),(0,B.writeUint16)(e,l),(0,B.writeUint16)(e,u),(0,B.writeBytes)(e,o)});ue(1057,function(e){return e.versionInfo!==void 0},function(e,t,n){var r=(0,N.readUint32)(e);if(r!==1)throw new Error("Invalid versionInfo version");t.versionInfo={hasRealMergedData:!!(0,N.readUint8)(e),writerName:(0,N.readUnicodeString)(e),readerName:(0,N.readUnicodeString)(e),fileVersion:(0,N.readUint32)(e)},(0,N.skipBytes)(e,n())},function(e,t){var n=t.versionInfo;(0,B.writeUint32)(e,1),(0,B.writeUint8)(e,n.hasRealMergedData?1:0),(0,B.writeUnicodeString)(e,n.writerName),(0,B.writeUnicodeString)(e,n.readerName),(0,B.writeUint32)(e,n.fileVersion)});Tt.MOCK_HANDLERS&&ue(1058,function(e){return e._ir1058!==void 0},function(e,t,n){wn&&console.log("image resource 1058",n()),t._ir1058=(0,N.readBytes)(e,n())},function(e,t){(0,B.writeBytes)(e,t._ir1058)});ue(7e3,function(e){return e.imageReadyVariables!==void 0},function(e,t,n){t.imageReadyVariables=X0(e,n())},function(e,t){Z0(e,t.imageReadyVariables)});ue(7001,function(e){return e.imageReadyDataSets!==void 0},function(e,t,n){t.imageReadyDataSets=X0(e,n())},function(e,t){Z0(e,t.imageReadyDataSets)});ue(1088,function(e){return e.pathSelectionState!==void 0},function(e,t,n){var r=(0,fe.readVersionAndDescriptor)(e);t.pathSelectionState=r.null},function(e,t){var n={null:t.pathSelectionState};(0,fe.writeVersionAndDescriptor)(e,"","null",n)});Tt.MOCK_HANDLERS&&ue(1025,function(e){return e._ir1025!==void 0},function(e,t,n){wn&&console.log("image resource 1025",n()),t._ir1025=(0,N.readBytes)(e,n())},function(e,t){(0,B.writeBytes)(e,t._ir1025)});var f2=(0,Tt.createEnum)("FrmD","",{auto:"Auto",none:"None",dispose:"Disp"});ue(4e3,function(e){return e.animations!==void 0},function(e,t,n){var r=(0,N.readSignature)(e);if(r==="mani")(0,N.checkSignature)(e,"IRFR"),(0,N.readSection)(e,1,function(o){for(var a=function(){(0,N.checkSignature)(e,"8BIM");var l=(0,N.readSignature)(e);(0,N.readSection)(e,1,function(s){if(l==="AnDs"){var u=(0,fe.readVersionAndDescriptor)(e);t.animations={frames:u.FrIn.map(function(p){return{id:p.FrID,delay:(p.FrDl||0)/100,dispose:p.FrDs?f2.decode(p.FrDs):"auto"}}),animations:u.FSts.map(function(p){return{id:p.FsID,frames:p.FsFr,repeats:p.LCnt,activeFrame:p.AFrm||0}})}}else if(l==="Roll"){var c=(0,N.readBytes)(e,s());e.logDevFeatures&&e.log("#4000 Roll",c)}else e.logMissingFeatures&&e.log("Unhandled subsection in #4000",l)})};o()>0;)a()});else if(r==="mopt"){var i=(0,N.readBytes)(e,n());e.logDevFeatures&&e.log("#4000 mopt",i)}else e.logMissingFeatures&&e.log("Unhandled key in #4000:",r)},function(e,t){t.animations&&((0,B.writeSignature)(e,"mani"),(0,B.writeSignature)(e,"IRFR"),(0,B.writeSection)(e,1,function(){(0,B.writeSignature)(e,"8BIM"),(0,B.writeSignature)(e,"AnDs"),(0,B.writeSection)(e,1,function(){for(var n={FrIn:[],FSts:[]},r=0;r<t.animations.frames.length;r++){var i=t.animations.frames[r],o={FrID:i.id};i.delay&&(o.FrDl=i.delay*100|0),o.FrDs=f2.encode(i.dispose),n.FrIn.push(o)}for(var r=0;r<t.animations.animations.length;r++){var a=t.animations.animations[r],l={FsID:a.id,AFrm:a.activeFrame|0,FsFr:a.frames,LCnt:a.repeats|0};n.FSts.push(l)}(0,fe.writeVersionAndDescriptor)(e,"","null",n)})}))});Tt.MOCK_HANDLERS&&ue(4001,function(e){return e._ir4001!==void 0},function(e,t,n){if(Tt.MOCK_HANDLERS){wn&&console.log("image resource 4001",n()),t._ir4001=(0,N.readBytes)(e,n());return}var r=(0,N.readSignature)(e);if(r==="mfri"){var i=(0,N.readUint32)(e);if(i!==2)throw new Error("Invalid mfri version");var o=(0,N.readUint32)(e),a=(0,N.readBytes)(e,o);e.logDevFeatures&&e.log("mfri",a)}else if(r==="mset"){var l=(0,fe.readVersionAndDescriptor)(e);e.logDevFeatures&&e.log("mset",l)}else e.logMissingFeatures&&e.log("Unhandled key in #4001",r)},function(e,t){(0,B.writeBytes)(e,t._ir4001)});Tt.MOCK_HANDLERS&&ue(4002,function(e){return e._ir4002!==void 0},function(e,t,n){wn&&console.log("image resource 4002",n()),t._ir4002=(0,N.readBytes)(e,n())},function(e,t){(0,B.writeBytes)(e,t._ir4002)})});var ni=de(W=>{"use strict";var Y3=W&&W.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(W,"__esModule",{value:!0});W.readPattern=W.readColor=W.readSection=W.readDataRLE=W.readDataZip=W.createImageDataBitDepth=W.readAdditionalLayerInfo=W.readGlobalLayerMaskInfo=W.readData=W.readLayerInfo=W.readPsd=W.checkSignature=W.skipBytes=W.readAsciiString=W.readUnicodeStringWithLengthLE=W.readUnicodeStringWithLength=W.readUnicodeString=W.readPascalString=W.validSignatureAt=W.readSignature=W.readBytes=W.readFixedPointPath32=W.readFixedPoint32=W.readFloat64=W.readFloat32=W.readUint32=W.readInt32LE=W.readInt32=W.readUint16LE=W.readUint16=W.readInt16=W.peekUint8=W.readUint8=W.warnOrThrow=W.createReader=W.supportedColorModes=void 0;var X3=F0(),ut=ti(),Z3=ku(),K3=K0();W.supportedColorModes=[0,1,3,2];var q3=["bitmap","grayscale","indexed","RGB","CMYK","multichannel","duotone","lab"];function Q0(e){for(var t=e.width*e.height*4,n=0;n<t;n+=4)e.data[n+1]=e.data[n],e.data[n+2]=e.data[n]}function Q3(e,t,n){var r=new DataView(e,t,n);return{view:r,offset:0,strict:!1,debug:!1,large:!1,globalAlpha:!1,log:console.log}}W.createReader=Q3;function Lu(e,t){if(e.strict)throw new Error(t);e.debug&&e.log(t)}W.warnOrThrow=Lu;function Ge(e){return e.offset+=1,e.view.getUint8(e.offset-1)}W.readUint8=Ge;function h2(e){return e.view.getUint8(e.offset)}W.peekUint8=h2;function ri(e){return e.offset+=2,e.view.getInt16(e.offset-2,!1)}W.readInt16=ri;function Ce(e){return e.offset+=2,e.view.getUint16(e.offset-2,!1)}W.readUint16=Ce;function m2(e){return e.offset+=2,e.view.getUint16(e.offset-2,!0)}W.readUint16LE=m2;function Ft(e){return e.offset+=4,e.view.getInt32(e.offset-4,!1)}W.readInt32=Ft;function J3(e){return e.offset+=4,e.view.getInt32(e.offset-4,!0)}W.readInt32LE=J3;function Ue(e){return e.offset+=4,e.view.getUint32(e.offset-4,!1)}W.readUint32=Ue;function eC(e){return e.offset+=4,e.view.getFloat32(e.offset-4,!1)}W.readFloat32=eC;function J0(e){return e.offset+=8,e.view.getFloat64(e.offset-8,!1)}W.readFloat64=J0;function tC(e){return Ft(e)/65536}W.readFixedPoint32=tC;function nC(e){return Ft(e)/(1<<24)}W.readFixedPointPath32=nC;function Fi(e,t){var n=e.view.byteOffset+e.offset;if(e.offset+=t,n+t>e.view.buffer.byteLength){if(Lu(e,"Reading bytes exceeding buffer length"),t>100*1024*1024)throw new Error("Reading past end of file");var r=new Uint8Array(t),i=Math.min(t,e.view.byteLength-n);return i>0&&r.set(new Uint8Array(e.view.buffer,n,i)),r}else return new Uint8Array(e.view.buffer,n,t)}W.readBytes=Fi;function Uo(e){return w2(e,4)}W.readSignature=Uo;function g2(e,t){var n=String.fromCharCode(e.view.getUint8(t))+String.fromCharCode(e.view.getUint8(t+1))+String.fromCharCode(e.view.getUint8(t+2))+String.fromCharCode(e.view.getUint8(t+3));return n=="8BIM"||n=="8B64"}W.validSignatureAt=g2;function Au(e,t){for(var n=Ge(e),r=n?w2(e,n):"";++n%t;)e.offset++;return r}W.readPascalString=Au;function v2(e){var t=Ue(e);return y2(e,t)}W.readUnicodeString=v2;function y2(e,t){for(var n="";t--;){var r=Ce(e);(r||t>0)&&(n+=String.fromCharCode(r))}return n}W.readUnicodeStringWithLength=y2;function rC(e,t){for(var n="";t--;){var r=m2(e);(r||t>0)&&(n+=String.fromCharCode(r))}return n}W.readUnicodeStringWithLengthLE=rC;function iC(e,t){for(var n="";t--;)n+=String.fromCharCode(Ge(e));return n}W.readAsciiString=iC;function tt(e,t){e.offset+=t}W.skipBytes=tt;function rp(e,t,n){var r=e.offset,i=Uo(e);if(i!==t&&i!==n)throw new Error("Invalid signature: '".concat(i,"' at 0x").concat(r.toString(16)))}W.checkSignature=rp;function w2(e,t){for(var n=Fi(e,t),r="",i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}function p2(e){return e==="8BIM"||e==="MeSa"||e==="AgHg"||e==="PHUT"||e==="DCSR"}function oC(e,t){var n;t===void 0&&(t={}),rp(e,"8BPS");var r=Ce(e);if(r!==1&&r!==2)throw new Error("Invalid PSD file version: ".concat(r));tt(e,6);var i=Ce(e),o=Ue(e),a=Ue(e),l=Ce(e),s=Ce(e),u=r===1?3e4:3e5;if(a>u||o>u)throw new Error("Invalid size: ".concat(a,"x").concat(o));if(i>16)throw new Error("Invalid channel count: ".concat(i));if(![1,8,16,32].includes(l))throw new Error("Invalid bitsPerChannel: ".concat(l));if(W.supportedColorModes.indexOf(s)===-1)throw new Error("Color mode not supported: ".concat((n=q3[s])!==null&&n!==void 0?n:s));var c={width:a,height:o,channels:i,bitsPerChannel:l,colorMode:s};Object.assign(e,t),e.large=r===2,e.globalAlpha=!1;var p=[0,1,-1,2,-2,3,-3,4,-4];Dn(e,1,function(f){if(f()){if(s===2){if(f()!=768)throw new Error("Invalid color palette size");c.palette=[];for(var h=0;h<256;h++)c.palette.push({r:Ge(e),g:0,b:0});for(var h=0;h<256;h++)c.palette[h].g=Ge(e);for(var h=0;h<256;h++)c.palette[h].b=Ge(e)}tt(e,f())}});var d={};Dn(e,1,function(f){for(var h=function(){for(var w=e.offset,I="",T=0,L=p;T<L.length;T++){var A=L[T];try{e.offset=w+A,I=Uo(e)}catch(R){}if(p2(I))break}if(!p2(I))throw new Error("Invalid signature: '".concat(I,"' at 0x").concat(w.toString(16)));var O=Ce(e);Au(e,2),Dn(e,2,function(R){var F=K3.resourceHandlersMap[O],q=O===1036&&!!e.skipThumbnail;if(F&&!q)try{F.read(e,d,R)}catch(D){if(e.throwForMissingFeatures)throw D;tt(e,R())}else tt(e,R())})};f()>0;)h()});var g=d.layersGroup,y=d.layerGroupsEnabledId,v=Y3(d,["layersGroup","layerGroupsEnabledId"]);Object.keys(v)&&(c.imageResources=v),Dn(e,1,function(f){if(Dn(e,2,function(w){S2(e,c,d),tt(e,w())},void 0,e.large),f()>0){var h=x2(e);h&&(c.globalLayerMaskInfo=h)}else tt(e,f());for(;f()>0;){for(;f()&&h2(e)===0;)tt(e,1);f()>=12?ip(e,c,c,d):tt(e,f())}},void 0,e.large);var S=c.children&&c.children.length,m=e.skipCompositeImageData&&(e.skipLayerImageData||S);return m||cC(e,c),c}W.readPsd=oC;function S2(e,t,n){var r,i,o=n.layersGroup,a=o===void 0?[]:o,l=n.layerGroupsEnabledId,s=l===void 0?[]:l,u=ri(e);u<0&&(e.globalAlpha=!0,u=-u);for(var c=[],p=[],d=0;d<u;d++){var g=aC(e,t,n),y=g.layer,v=g.channels;a[d]!==void 0&&(y.linkGroup=a[d]),s[d]!==void 0&&(y.linkGroupEnabled=!!s[d]),c.push(y),p.push(v)}if(!e.skipLayerImageData)for(var d=0;d<u;d++)uC(e,t,c[d],p[d]);t.children||(t.children=[]);for(var S=[t],d=c.length-1;d>=0;d--){var m=c[d],f=m.sectionDivider?m.sectionDivider.type:0;f===1||f===2?(m.opened=f===1,m.children=[],!((r=m.sectionDivider)===null||r===void 0)&&r.key&&(m.blendMode=(i=ut.toBlendMode[m.sectionDivider.key])!==null&&i!==void 0?i:m.blendMode),S[S.length-1].children.unshift(m),S.push(m)):f===3?S.pop():S[S.length-1].children.unshift(m)}}W.readLayerInfo=S2;function aC(e,t,n){var r={};r.top=Ft(e),r.left=Ft(e),r.bottom=Ft(e),r.right=Ft(e);for(var i=Ce(e),o=[],a=0;a<i;a++){var l=ri(e),s=Ue(e);if(e.large){if(s!==0)throw new Error("Sizes larger than 4GB are not supported");s=Ue(e)}o.push({id:l,length:s})}rp(e,"8BIM");var u=Uo(e);if(!ut.toBlendMode[u])throw new Error("Invalid blend mode: '".concat(u,"'"));r.blendMode=ut.toBlendMode[u],r.opacity=Ge(e)/255,r.clipping=Ge(e)===1;var c=Ge(e);return r.transparencyProtected=(c&1)!==0,r.hidden=(c&2)!==0,c&32&&(r.effectsOpen=!0),tt(e,1),Dn(e,1,function(p){lC(e,r);var d=sC(e);for(d&&(r.blendingRanges=d),r.name=Au(e,1);p()>4&&!g2(e,e.offset);)e.offset++;for(;p()>=12;)ip(e,r,t,n);tt(e,p())}),{layer:r,channels:o}}function lC(e,t){return Dn(e,1,function(n){if(n()){var r={};t.mask=r,r.top=Ft(e),r.left=Ft(e),r.bottom=Ft(e),r.right=Ft(e),r.defaultColor=Ge(e);var i=Ge(e);if(r.positionRelativeToLayer=(i&1)!==0,r.disabled=(i&2)!==0,r.fromVectorData=(i&8)!==0,n()>=18){var o={};t.realMask=o;var a=Ge(e);o.positionRelativeToLayer=(a&1)!==0,o.disabled=(a&2)!==0,o.fromVectorData=(a&8)!==0,o.defaultColor=Ge(e),o.top=Ft(e),o.left=Ft(e),o.bottom=Ft(e),o.right=Ft(e)}if(i&16){var l=Ge(e);l&1&&(r.userMaskDensity=Ge(e)/255),l&2&&(r.userMaskFeather=J0(e)),l&4&&(r.vectorMaskDensity=Ge(e)/255),l&8&&(r.vectorMaskFeather=J0(e))}tt(e,n())}})}function Tu(e){return[Ge(e),Ge(e),Ge(e),Ge(e)]}function sC(e){return Dn(e,1,function(t){for(var n=Tu(e),r=Tu(e),i=[];t()>0;){var o=Tu(e),a=Tu(e);i.push({sourceRange:o,destRange:a})}return{compositeGrayBlendSource:n,compositeGraphBlendDestinationRange:r,ranges:i}})}function uC(e,t,n,r){var i,o,a,l,s=(n.right||0)-(n.left||0),u=(n.bottom||0)-(n.top||0),c=t.colorMode===4,p;if(s&&u)if(c){if(t.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");p={width:s,height:u,data:new Uint8ClampedArray(s*u*5)};for(var d=4;d<p.data.byteLength;d+=5)p.data[d]=255}else p=Pu(s,u,(i=t.bitsPerChannel)!==null&&i!==void 0?i:8),(0,ut.resetImageData)(p);ut.RAW_IMAGE_DATA&&(n.imageDataRaw=[],n.imageDataRawCompression=[]);for(var g=0,y=r;g<y.length;g++){var v=y[g];if(v.length!==0){if(v.length<2)throw new Error("Invalid channel length");var S=e.offset,m=Ce(e);if(m>3&&(e.offset-=1,m=Ce(e)),m>3&&(e.offset-=3,m=Ce(e)),m>3)throw new Error("Invalid compression: ".concat(m));if(v.id===-2||v.id===-3){var f=v.id===-2?n.mask:n.realMask;if(!f)throw new Error("Missing layer ".concat(v.id===-2?"mask":"real mask"," data"));var h=(f.right||0)-(f.left||0),w=(f.bottom||0)-(f.top||0);if(h<0||w<0||h>3e4||w>3e4)throw new Error("Invalid mask size");if(h&&w){var I=Pu(h,w,(o=t.bitsPerChannel)!==null&&o!==void 0?o:8);(0,ut.resetImageData)(I);var T=e.offset;ep(e,v.length,I,m,h,w,(a=t.bitsPerChannel)!==null&&a!==void 0?a:8,0,e.large,4),ut.RAW_IMAGE_DATA&&(v.id===-2?(n.maskDataRawCompression=m,n.maskDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+T,e.offset-T)):(n.realMaskDataRawCompression=m,n.realMaskDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+T,e.offset-T))),Q0(I),e.useImageData?f.imageData=I:f.canvas=(0,ut.imageDataToCanvas)(I)}}else{var L=(0,ut.offsetForChannel)(v.id,c),A=p;if(L<0&&(A=void 0,e.throwForMissingFeatures))throw new Error("Channel not supported: ".concat(v.id));ep(e,v.length,A,m,s,u,(l=t.bitsPerChannel)!==null&&l!==void 0?l:8,L,e.large,c?5:4),ut.RAW_IMAGE_DATA&&(n.imageDataRawCompression[v.id]=m,n.imageDataRaw[v.id]=new Uint8Array(e.view.buffer,e.view.byteOffset+S+2,v.length-2)),e.offset=S+v.length,A&&t.colorMode===1&&Q0(A)}}}if(p){if(c){var O=p;p=(0,ut.createImageData)(O.width,O.height),_2(O,p,!1)}e.useImageData?n.imageData=p:n.canvas=(0,ut.imageDataToCanvas)(p)}}function ep(e,t,n,r,i,o,a,l,s,u){if(r===0)b2(e,n,i,o,a,u,l);else if(r===1)No(e,n,i,o,a,u,[l],s);else if(r===2)np(e,t,n,i,o,a,u,l,!1);else if(r===3)np(e,t,n,i,o,a,u,l,!0);else throw new Error("Invalid Compression type: ".concat(r))}W.readData=ep;function x2(e){return Dn(e,1,function(t){if(t()){var n=Ce(e),r=Ce(e),i=Ce(e),o=Ce(e),a=Ce(e),l=Ce(e)/255,s=Ge(e);return tt(e,t()),{overlayColorSpace:n,colorSpace1:r,colorSpace2:i,colorSpace3:o,colorSpace4:a,opacity:l,kind:s}}})}W.readGlobalLayerMaskInfo=x2;function ip(e,t,n,r){var i=Uo(e);if(i!=="8BIM"&&i!=="8B64")throw new Error("Invalid signature: '".concat(i,"' at 0x").concat((e.offset-4).toString(16)));var o=Uo(e),a=i==="8B64"||e.large&&ut.largeAdditionalInfoKeys.indexOf(o)!==-1;Dn(e,2,function(l){var s=Z3.infoHandlersMap[o];if(s)try{s.read(e,t,l,n,r)}catch(u){if(e.throwForMissingFeatures)throw u}else e.logMissingFeatures&&e.log("Unhandled additional info: ".concat(o)),tt(e,l());l()&&(e.logMissingFeatures&&e.log("Unread ".concat(l()," bytes left for additional info: ").concat(o)),tt(e,l()))},!1,a)}W.readAdditionalLayerInfo=ip;function Pu(e,t,n,r){if(r===void 0&&(r=4),n===1||n===8)return r===4?(0,ut.createImageData)(e,t):{width:e,height:t,data:new Uint8ClampedArray(e*t*r)};if(n===16)return{width:e,height:t,data:new Uint16Array(e*t*r)};if(n===32)return{width:e,height:t,data:new Float32Array(e*t*r)};throw new Error("Invalid bitDepth (".concat(n,")"))}W.createImageDataBitDepth=Pu;function cC(e,t){var n,r=Ce(e),i=(n=t.bitsPerChannel)!==null&&n!==void 0?n:8;if(W.supportedColorModes.indexOf(t.colorMode)===-1)throw new Error("Color mode not supported: ".concat(t.colorMode));if(r!==0&&r!==1)throw new Error("Compression type not supported: ".concat(r));var o=Pu(t.width,t.height,i);switch((0,ut.resetImageData)(o),t.colorMode){case 0:{if(i!==1)throw new Error("Invalid bitsPerChannel for bitmap color mode");var a=void 0;if(r===0)a=Fi(e,Math.ceil(t.width/8)*t.height);else if(r===1)a=new Uint8Array(t.width*t.height),No(e,{data:a,width:t.width,height:t.height},t.width,t.height,8,1,[0],e.large);else throw new Error("Bitmap compression not supported: ".concat(r));(0,ut.decodeBitmap)(a,o.data,t.width,t.height);break}case 3:case 1:{var l=t.colorMode===1?[0]:[0,1,2];if(t.channels&&t.channels>3)for(var s=3;s<t.channels;s++)l.push(s);else e.globalAlpha&&l.push(3);if(r===0)for(var s=0;s<l.length;s++)b2(e,o,t.width,t.height,i,4,l[s]);else if(r===1){var u=e.offset;No(e,o,t.width,t.height,i,4,l,e.large),ut.RAW_IMAGE_DATA&&(t.imageDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+u,e.offset-u))}t.colorMode===1&&Q0(o);break}case 2:{if(i!==8)throw new Error("bitsPerChannel Not supproted");if(t.channels!==1)throw new Error("Invalid channel count");if(!t.palette)throw new Error("Missing color palette");if(r===0)throw new Error("Not implemented");if(r===1){var c={width:o.width,height:o.height,data:new Uint8Array(o.width*o.height)};No(e,c,t.width,t.height,i,1,[0],e.large),dC(c,o,t.palette)}else throw new Error("Not implemented");break}case 4:{if(i!==8)throw new Error("bitsPerChannel Not supproted");if(t.channels!==4)throw new Error("Invalid channel count");var l=[0,1,2,3];if(e.globalAlpha&&l.push(4),r===0)throw new Error("Not implemented");if(r===1){var p={width:o.width,height:o.height,data:new Uint8Array(o.width*o.height*5)},u=e.offset;No(e,p,t.width,t.height,i,5,l,e.large),_2(p,o,!0),ut.RAW_IMAGE_DATA&&(t.imageDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+u,e.offset-u))}else throw new Error("Not implemented");break}default:throw new Error("Color mode not supported: ".concat(t.colorMode))}if(e.globalAlpha){if(t.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");for(var d=o.data,g=o.width*o.height*4,s=0;s<g;s+=4){var y=d[s+3];if(y!=0&&y!=255){var v=y/255,S=1/v,m=255*(1-S);d[s+0]=d[s+0]*S+m,d[s+1]=d[s+1]*S+m,d[s+2]=d[s+2]*S+m}}}e.useImageData?t.imageData=o:t.canvas=(0,ut.imageDataToCanvas)(o)}function _2(e,t,n){for(var r=t.width*t.height*4,i=e.data,o=t.data,a=0,l=0;l<r;a+=5,l+=4){var s=i[a],u=i[a+1],c=i[a+2],p=i[a+3];o[l]=(s*p|0)/255|0,o[l+1]=(u*p|0)/255|0,o[l+2]=(c*p|0)/255|0,o[l+3]=n?255-i[a+4]:i[a+4]}}function dC(e,t,n){for(var r=e.width*e.height,i=e.data,o=t.data,a=0,l=0;a<r;a++,l+=4){var s=n[i[a]];o[l+0]=s.r,o[l+1]=s.g,o[l+2]=s.b,o[l+3]=255}}function fC(e,t){if(e.byteLength/e.length!==t.byteLength/t.length)throw new Error("Invalid array types")}function E2(e,t){if(t===8)return e;if(t===16)if(e.byteOffset%2){var n=new Uint16Array(e.byteLength/2);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength).set(e),n}else return new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);else if(t===32)if(e.byteOffset%4){var n=new Float32Array(e.byteLength/4);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength).set(e),n}else return new Float32Array(e.buffer,e.byteOffset,e.byteLength/4);else throw new Error("Invalid bitDepth (".concat(t,")"))}function tp(e,t,n,r){fC(e.data,t);for(var i=e.width*e.height,o=e.data,a=0,l=n|0;a<i;a++,l=l+r|0)o[l]=t[a]}function b2(e,t,n,r,i,o,a){var l=Fi(e,n*r*Math.floor(i/8));if(i==32)for(var s=0;s<l.byteLength;s+=4){var u=l[s+0],c=l[s+1],p=l[s+2],d=l[s+3];l[s+0]=d,l[s+1]=p,l[s+2]=c,l[s+3]=u}var g=E2(l,i);t&&a<o&&tp(t,g,a,o)}function q0(e,t,n,r){for(var i=0;i<n;i++)for(var o=i*t,a=1,l=o+1;a<t;a++,l++)e[l]=(e[l-1]+e[l])%r}function np(e,t,n,r,i,o,a,l,s){var u=Fi(e,t),c=(0,X3.inflate)(u);if(n&&l<a){var p=E2(c,o);if(o===8)s&&q0(c,r,i,256),tp(n,c,l,a);else if(o===16)s&&q0(p,r,i,65536),tp(n,p,l,a);else if(o===32){s&&q0(c,r*4,i,256);for(var d=l,g=new Uint32Array(n.data.buffer,n.data.byteOffset,n.data.length),y=0;y<i;y++)for(var v=r*4*y,S=0;S<r;S++,v++,d+=a){var m=v+r,f=m+r,h=f+r;g[d]=(c[v]<<24|c[m]<<16|c[f]<<8|c[h])>>>0}}else throw new Error("Invalid bitDepth")}}W.readDataZip=np;function No(e,t,n,r,i,o,a,l){var s=t&&t.data,u;if(l){u=new Uint32Array(a.length*r);for(var c=0,p=0;c<a.length;c++)for(var d=0;d<r;d++,p++)u[p]=Ue(e)}else{u=new Uint16Array(a.length*r);for(var c=0,p=0;c<a.length;c++)for(var d=0;d<r;d++,p++)u[p]=Ce(e)}if(i!==1&&i!==8)throw new Error("Invalid bit depth (".concat(i,")"));for(var g=o-1|0,y=0,p=0;y<a.length;y++){var v=a[y]|0,S=y>g||v>g;if(!s||S)for(var d=0;d<r;d++,p++)tt(e,u[p]);else for(var d=0,m=v|0;d<r;d++,p++)for(var f=u[p],h=Fi(e,f),w=0,I=0;w<f;w++){var T=h[w];if(T>128){var L=h[++w];T=256-T|0;for(var A=0;A<=T&&I<n;A=A+1|0,I=I+1|0)s[m]=L,m=m+o|0}else if(T<128)for(var A=0;A<=T&&I<n;A=A+1|0,I=I+1|0)s[m]=h[++w],m=m+o|0}}}W.readDataRLE=No;function Dn(e,t,n,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1);var o=Ue(e);if(i){if(o!==0)throw new Error("Sizes larger than 4GB are not supported");o=Ue(e)}if(!(o<=0&&r)){var a=e.offset+o;if(a>e.view.byteLength)throw new Error("Section exceeds file size");var l=n(function(){return a-e.offset});for(e.offset!==a&&(e.offset>a?Lu(e,"Exceeded section limits"):Lu(e,"Unread section data"));a%t;)a++;return e.offset=a,l}}W.readSection=Dn;function pC(e){var t=Ce(e);switch(t){case 0:{var n=Ce(e)/257,r=Ce(e)/257,i=Ce(e)/257;return tt(e,2),{r:n,g:r,b:i}}case 1:{var o=Ce(e)/65535,a=Ce(e)/65535,i=Ce(e)/65535;return tt(e,2),{h:o,s:a,b:i}}case 2:{var l=Ce(e)/257,s=Ce(e)/257,u=Ce(e)/257,c=Ce(e)/257;return{c:l,m:s,y:u,k:c}}case 7:{var p=ri(e)/1e4,d=ri(e),g=ri(e),y=d<0?d/12800:d/12700,i=g<0?g/12800:g/12700;return tt(e,2),{l:p,a:y,b:i}}case 8:{var c=Ce(e)*255/1e4;return tt(e,6),{k:c}}default:throw new Error("Invalid color space")}}W.readColor=pC;function hC(e){Ue(e);var t=Ue(e);if(t!==1)throw new Error("Invalid pattern version: ".concat(t));var n=Ue(e),r=ri(e),i=ri(e);if(n!==3&&n!==1&&n!==2)throw new Error("Unsupported pattern color mode: ".concat(n));var o=v2(e),a=Au(e,1),l=[];if(n===2){for(var s=0;s<256;s++)l.push({r:Ge(e),g:Ge(e),b:Ge(e)});tt(e,4)}var u=Ue(e);if(u!==3)throw new Error("Invalid pattern VMAL version: ".concat(u));Ue(e);for(var c=Ue(e),p=Ue(e),d=Ue(e),g=Ue(e),y=Ue(e),v=g-p,S=d-c,m=new Uint8Array(v*S*4),s=3;s<m.byteLength;s+=4)m[s]=255;for(var s=0,f=0;s<y+2;s++){var h=Ue(e);if(h){var w=Ue(e),I=Ue(e),T=Ue(e),L=Ue(e),A=Ue(e),O=Ue(e),R=Ce(e),F=Ge(e),q=w-23,D=Fi(e,q);if(I!==8||R!==8)throw new Error("16bit pixel depth not supported for patterns");var b=O-L,k=A-T,M=L-p,H=T-c;if(F===0){if(n===3&&f<3)for(var j=0;j<k;j++)for(var ne=0;ne<b;ne++){var U=ne+j*b,z=(M+ne+(j+H)*v)*4;m[z+f]=D[U]}if(n===1&&f<1)for(var Q=0;Q<k;Q++)for(var ee=0;ee<b;ee++){var U=ee+Q*b,z=(M+ee+(Q+H)*v)*4,_e=D[U];m[z+0]=_e,m[z+1]=_e,m[z+2]=_e}if(n===2)throw new Error("Indexed pattern color mode not implemented")}else if(F===1)e.log("Unsupported pattern compression"),o+=" (failed to decode)";else throw new Error("Invalid pattern compression mode");f++}}return{id:a,name:o,x:r,y:i,bounds:{x:p,y:c,w:v,h:S},data:m}}W.readPattern=hC});var L2=de(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.writeEffects=Go.readEffects=void 0;var I2=ti(),re=ni(),Z=Oo(),T2=[void 0,"outer bevel","inner bevel","emboss","pillow emboss","stroke emboss"];function Bo(e){return(0,re.checkSignature)(e,"8BIM"),I2.toBlendMode[(0,re.readSignature)(e)]||"normal"}function Vo(e,t){(0,Z.writeSignature)(e,"8BIM"),(0,Z.writeSignature)(e,I2.fromBlendMode[t]||"norm")}function zo(e){return(0,re.readUint8)(e)/255}function Ho(e,t){(0,Z.writeUint8)(e,Math.round(t*255)|0)}function mC(e){var t=(0,re.readUint16)(e);if(t!==0)throw new Error("Invalid effects layer version: ".concat(t));for(var n=(0,re.readUint16)(e),r={},i=0;i<n;i++){(0,re.checkSignature)(e,"8BIM");var o=(0,re.readSignature)(e);switch(o){case"cmnS":{var a=(0,re.readUint32)(e),l=(0,re.readUint32)(e),s=!!(0,re.readUint8)(e);if((0,re.skipBytes)(e,2),a!==7||l!==0||!s)throw new Error("Invalid effects common state");break}case"dsdw":case"isdw":{var u=(0,re.readUint32)(e),c=(0,re.readUint32)(e);if(u!==41&&u!==51)throw new Error("Invalid shadow size: ".concat(u));if(c!==0&&c!==2)throw new Error("Invalid shadow version: ".concat(c));var a=(0,re.readFixedPoint32)(e);(0,re.readFixedPoint32)(e);var p=(0,re.readFixedPoint32)(e),d=(0,re.readFixedPoint32)(e),g=(0,re.readColor)(e),y=Bo(e),v=!!(0,re.readUint8)(e),S=!!(0,re.readUint8)(e),m=zo(e);u>=51&&(0,re.readColor)(e);var f={size:{units:"Pixels",value:a},distance:{units:"Pixels",value:d},angle:p,color:g,blendMode:y,enabled:v,useGlobalLight:S,opacity:m};o==="dsdw"?r.dropShadow=[f]:r.innerShadow=[f];break}case"oglw":{var u=(0,re.readUint32)(e),h=(0,re.readUint32)(e);if(u!==32&&u!==42)throw new Error("Invalid outer glow size: ".concat(u));if(h!==0&&h!==2)throw new Error("Invalid outer glow version: ".concat(h));var a=(0,re.readFixedPoint32)(e);(0,re.readFixedPoint32)(e);var g=(0,re.readColor)(e),y=Bo(e),v=!!(0,re.readUint8)(e),m=zo(e);u>=42&&(0,re.readColor)(e),r.outerGlow={size:{units:"Pixels",value:a},color:g,blendMode:y,enabled:v,opacity:m};break}case"iglw":{var u=(0,re.readUint32)(e),w=(0,re.readUint32)(e);if(u!==32&&u!==43)throw new Error("Invalid inner glow size: ".concat(u));if(w!==0&&w!==2)throw new Error("Invalid inner glow version: ".concat(w));var a=(0,re.readFixedPoint32)(e);(0,re.readFixedPoint32)(e);var g=(0,re.readColor)(e),y=Bo(e),v=!!(0,re.readUint8)(e),m=zo(e);u>=43&&((0,re.readUint8)(e),(0,re.readColor)(e)),r.innerGlow={size:{units:"Pixels",value:a},color:g,blendMode:y,enabled:v,opacity:m};break}case"bevl":{var u=(0,re.readUint32)(e),I=(0,re.readUint32)(e);if(u!==58&&u!==78)throw new Error("Invalid bevel size: ".concat(u));if(I!==0&&I!==2)throw new Error("Invalid bevel version: ".concat(I));var p=(0,re.readFixedPoint32)(e),T=(0,re.readFixedPoint32)(e),a=(0,re.readFixedPoint32)(e),L=Bo(e),A=Bo(e),O=(0,re.readColor)(e),R=(0,re.readColor)(e),F=T2[(0,re.readUint8)(e)]||"inner bevel",q=zo(e),D=zo(e),v=!!(0,re.readUint8)(e),S=!!(0,re.readUint8)(e),b=(0,re.readUint8)(e)?"down":"up";u>=78&&((0,re.readColor)(e),(0,re.readColor)(e)),r.bevel={size:{units:"Pixels",value:a},angle:p,strength:T,highlightBlendMode:L,shadowBlendMode:A,highlightColor:O,shadowColor:R,style:F,highlightOpacity:q,shadowOpacity:D,enabled:v,useGlobalLight:S,direction:b};break}case"sofi":{var a=(0,re.readUint32)(e),k=(0,re.readUint32)(e);if(a!==34)throw new Error("Invalid effects solid fill info size: ".concat(a));if(k!==2)throw new Error("Invalid effects solid fill info version: ".concat(k));var y=Bo(e),g=(0,re.readColor)(e),m=zo(e),v=!!(0,re.readUint8)(e);(0,re.readColor)(e),r.solidFill=[{blendMode:y,color:g,opacity:m,enabled:v}];break}default:throw new Error("Invalid effect type: '".concat(o,"'"))}}return r}Go.readEffects=mC;function C2(e,t){var n;(0,Z.writeUint32)(e,51),(0,Z.writeUint32)(e,2),(0,Z.writeFixedPoint32)(e,t.size&&t.size.value||0),(0,Z.writeFixedPoint32)(e,0),(0,Z.writeFixedPoint32)(e,t.angle||0),(0,Z.writeFixedPoint32)(e,t.distance&&t.distance.value||0),(0,Z.writeColor)(e,t.color),Vo(e,t.blendMode),(0,Z.writeUint8)(e,t.enabled?1:0),(0,Z.writeUint8)(e,t.useGlobalLight?1:0),Ho(e,(n=t.opacity)!==null&&n!==void 0?n:1),(0,Z.writeColor)(e,t.color)}function gC(e,t){var n,r,i,o,a,l,s=(n=t.dropShadow)===null||n===void 0?void 0:n[0],u=(r=t.innerShadow)===null||r===void 0?void 0:r[0],c=t.outerGlow,p=t.innerGlow,d=t.bevel,g=(i=t.solidFill)===null||i===void 0?void 0:i[0],y=1;if(s&&y++,u&&y++,c&&y++,p&&y++,d&&y++,g&&y++,(0,Z.writeUint16)(e,0),(0,Z.writeUint16)(e,y),(0,Z.writeSignature)(e,"8BIM"),(0,Z.writeSignature)(e,"cmnS"),(0,Z.writeUint32)(e,7),(0,Z.writeUint32)(e,0),(0,Z.writeUint8)(e,1),(0,Z.writeZeros)(e,2),s&&((0,Z.writeSignature)(e,"8BIM"),(0,Z.writeSignature)(e,"dsdw"),C2(e,s)),u&&((0,Z.writeSignature)(e,"8BIM"),(0,Z.writeSignature)(e,"isdw"),C2(e,u)),c&&((0,Z.writeSignature)(e,"8BIM"),(0,Z.writeSignature)(e,"oglw"),(0,Z.writeUint32)(e,42),(0,Z.writeUint32)(e,2),(0,Z.writeFixedPoint32)(e,((o=c.size)===null||o===void 0?void 0:o.value)||0),(0,Z.writeFixedPoint32)(e,0),(0,Z.writeColor)(e,c.color),Vo(e,c.blendMode),(0,Z.writeUint8)(e,c.enabled?1:0),Ho(e,c.opacity||0),(0,Z.writeColor)(e,c.color)),p&&((0,Z.writeSignature)(e,"8BIM"),(0,Z.writeSignature)(e,"iglw"),(0,Z.writeUint32)(e,43),(0,Z.writeUint32)(e,2),(0,Z.writeFixedPoint32)(e,((a=p.size)===null||a===void 0?void 0:a.value)||0),(0,Z.writeFixedPoint32)(e,0),(0,Z.writeColor)(e,p.color),Vo(e,p.blendMode),(0,Z.writeUint8)(e,p.enabled?1:0),Ho(e,p.opacity||0),(0,Z.writeUint8)(e,0),(0,Z.writeColor)(e,p.color)),d){(0,Z.writeSignature)(e,"8BIM"),(0,Z.writeSignature)(e,"bevl"),(0,Z.writeUint32)(e,78),(0,Z.writeUint32)(e,2),(0,Z.writeFixedPoint32)(e,d.angle||0),(0,Z.writeFixedPoint32)(e,d.strength||0),(0,Z.writeFixedPoint32)(e,((l=d.size)===null||l===void 0?void 0:l.value)||0),Vo(e,d.highlightBlendMode),Vo(e,d.shadowBlendMode),(0,Z.writeColor)(e,d.highlightColor),(0,Z.writeColor)(e,d.shadowColor);var v=T2.indexOf(d.style);(0,Z.writeUint8)(e,v<=0?1:v),Ho(e,d.highlightOpacity||0),Ho(e,d.shadowOpacity||0),(0,Z.writeUint8)(e,d.enabled?1:0),(0,Z.writeUint8)(e,d.useGlobalLight?1:0),(0,Z.writeUint8)(e,d.direction==="down"?1:0),(0,Z.writeColor)(e,d.highlightColor),(0,Z.writeColor)(e,d.shadowColor)}g&&((0,Z.writeSignature)(e,"8BIM"),(0,Z.writeSignature)(e,"sofi"),(0,Z.writeUint32)(e,34),(0,Z.writeUint32)(e,2),Vo(e,g.blendMode),(0,Z.writeColor)(e,g.color),Ho(e,g.opacity||0),(0,Z.writeUint8)(e,g.enabled?1:0),(0,Z.writeColor)(e,g.color))}Go.writeEffects=gC});var k2=de(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.serializeEngineData=Wo.parseEngineData=void 0;function P2(e){return e===32||e===10||e===13||e===9}function A2(e){return e>=48&&e<=57||e===46||e===45}function vC(e){var t=0;function n(){for(;t<e.length&&P2(e[t]);)t++}function r(){var f=e[t];return t++,f===92&&(f=e[t],t++),f}function i(){var f="";if(e[t]===41)return t++,f;if(e[t]!==254||e[t+1]!==255)throw new Error("Invalid utf-16 BOM");for(t+=2;t<e.length&&e[t]!==41;){var h=r(),w=r(),I=h<<8|w;f+=String.fromCharCode(I)}return t++,f}var o=null,a=[];function l(f){a.length?(s(f),a.push(f)):(a.push(f),o=f)}function s(f){if(!a.length)throw new Error("Invalid data");var h=a[a.length-1];if(typeof h=="string")a[a.length-2][h]=f,c();else if(Array.isArray(h))h.push(f);else throw new Error("Invalid data")}function u(f){a.length||l({});var h=a[a.length-1];if(h&&typeof h=="string")s(f==="nil"?null:"/".concat(f));else if(h&&typeof h=="object")a.push(f);else throw new Error("Invalid data")}function c(){if(!a.length)throw new Error("Invalid data");a.pop()}n();for(var p=e.length;p>0&&e[p-1]===0;)p--;for(;t<p;){var d=t,g=e[d];if(g===60&&e[d+1]===60)t+=2,l({});else if(g===62&&e[d+1]===62)t+=2,c();else if(g===47){t+=1;for(var y=t;t<e.length&&!P2(e[t]);)t++;for(var v="",S=y;S<t;S++)v+=String.fromCharCode(e[S]);u(v)}else if(g===40)t+=1,s(i());else if(g===91)t+=1,l([]);else if(g===93)t+=1,c();else if(g===110&&e[d+1]===117&&e[d+2]===108&&e[d+3]===108)t+=4,s(null);else if(g===116&&e[d+1]===114&&e[d+2]===117&&e[d+3]===101)t+=4,s(!0);else if(g===102&&e[d+1]===97&&e[d+2]===108&&e[d+3]===115&&e[d+4]===101)t+=5,s(!1);else if(A2(g)){for(var m="";t<e.length&&A2(e[t]);)m+=String.fromCharCode(e[t]),t++;s(parseFloat(m))}else t+=1,console.log("Invalid token '".concat(String.fromCharCode(g),"' (").concat(g,") at ").concat(t));n()}return o}Wo.parseEngineData=vC;var yC=["Axis","XY","Zone","WordSpacing","FirstLineIndent","GlyphSpacing","StartIndent","EndIndent","SpaceBefore","SpaceAfter","LetterSpacing","Values","GridSize","GridLeading","PointBase","BoxBounds","TransformPoint0","TransformPoint1","TransformPoint2","FontSize","Leading","HorizontalScale","VerticalScale","BaselineShift","Tsume","OutlineWidth","AutoLeading"],wC=["RunLengthArray"];function SC(e,t){t===void 0&&(t=!1);var n=new Uint8Array(1024),r=0,i=0;function o(f){if(r>=n.length){var h=new Uint8Array(n.length*2);h.set(n),n=h}n[r]=f,r++}function a(f){for(var h=0;h<f.length;h++)o(f.charCodeAt(h))}function l(){if(t)a(" ");else for(var f=0;f<i;f++)a("	")}function s(f,h){l(),a("/".concat(f)),y(h,f,!0),t||a(`
`)}function u(f){return f.toString()}function c(f){return f.toFixed(5).replace(/(\d)0+$/g,"$1").replace(/^0+\.([1-9])/g,".$1").replace(/^-0+\.0(\d)/g,"-.0$1")}function p(f,h){var w=h&&yC.indexOf(h)!==-1||(f|0)!==f;return w?c(f):u(f)}function d(f){var h=Object.keys(f);return h.indexOf("98")!==-1&&h.unshift.apply(h,h.splice(h.indexOf("99"),1)),h.indexOf("99")!==-1&&h.unshift.apply(h,h.splice(h.indexOf("99"),1)),h}function g(f){(f===40||f===41||f===92)&&o(92),o(f)}function y(f,h,w){w===void 0&&(w=!1);function I(){w?a(" "):l()}if(f===null)I(),a(t?"/nil":"null");else if(typeof f=="number")I(),a(p(f,h));else if(typeof f=="boolean")I(),a(f?"true":"false");else if(typeof f=="string")if(I(),(h==="99"||h==="98")&&f.charAt(0)==="/")a(f);else{a("("),o(254),o(255);for(var T=0;T<f.length;T++){var L=f.charCodeAt(T);g(L>>8&255),g(L&255)}a(")")}else if(Array.isArray(f))if(I(),f.every(function(H){return typeof H=="number"})){a("[");for(var A=wC.indexOf(h)!==-1,O=0,R=f;O<R.length;O++){var F=R[O];a(" "),a(A?p(F):c(F))}a(" ]")}else{a("["),t||a(`
`);for(var q=0,D=f;q<D.length;q++){var F=D[q];y(F,h),t||a(`
`)}l(),a("]")}else if(typeof f=="object"){w&&!t&&a(`
`),l(),a("<<"),t||a(`
`),i++;for(var b=0,k=d(f);b<k.length;b++){var M=k[b];s(M,f[M])}i--,l(),a(">>")}}if(t){if(typeof e=="object")for(var v=0,S=d(e);v<S.length;v++){var m=S[v];s(m,e[m])}}else a(`

`),y(e);return n.slice(0,r)}Wo.serializeEngineData=SC});var V2=de(ii=>{"use strict";var at=ii&&ii.__assign||function(){return at=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},at.apply(this,arguments)};Object.defineProperty(ii,"__esModule",{value:!0});ii.encodeEngineData=ii.decodeEngineData=void 0;var O2={name:"MyriadPro-Regular",script:0,type:0,synthetic:0},Du={justification:"left",firstLineIndent:0,startIndent:0,endIndent:0,spaceBefore:0,spaceAfter:0,autoHyphenate:!0,hyphenatedWordSize:6,preHyphen:2,postHyphen:2,consecutiveHyphens:8,zone:36,wordSpacing:[.8,1,1.33],letterSpacing:[0,0,0],glyphSpacing:[1,1,1],autoLeading:1.2,leadingType:0,hanging:!1,burasagari:!1,kinsokuOrder:0,everyLineComposer:!1},xC={font:O2,fontSize:12,fauxBold:!1,fauxItalic:!1,autoLeading:!0,leading:0,horizontalScale:1,verticalScale:1,tracking:0,autoKerning:!0,kerning:0,baselineShift:0,fontCaps:0,fontBaseline:0,underline:!1,strikethrough:!1,ligatures:!0,dLigatures:!1,baselineDirection:2,tsume:0,styleRunAlignment:2,language:0,noBreak:!1,fillColor:{r:0,g:0,b:0},strokeColor:{r:0,g:0,b:0},fillFlag:!0,strokeFlag:!1,fillFirst:!0,yUnderline:1,outlineWidth:1,characterDirection:0,hindiNumbers:!1,kashida:1,diacriticPos:2},_C={isOn:!1,show:!1,size:18,leading:22,color:{r:0,g:0,b:255},leadingFillColor:{r:0,g:0,b:255},alignLineHeightToGridFlags:!1},lp=["justification","firstLineIndent","startIndent","endIndent","spaceBefore","spaceAfter","autoHyphenate","hyphenatedWordSize","preHyphen","postHyphen","consecutiveHyphens","zone","wordSpacing","letterSpacing","glyphSpacing","autoLeading","leadingType","hanging","burasagari","kinsokuOrder","everyLineComposer"],sp=["font","fontSize","fauxBold","fauxItalic","autoLeading","leading","horizontalScale","verticalScale","tracking","autoKerning","kerning","baselineShift","fontCaps","fontBaseline","underline","strikethrough","ligatures","dLigatures","baselineDirection","tsume","styleRunAlignment","language","noBreak","fillColor","strokeColor","fillFlag","strokeFlag","fillFirst","yUnderline","outlineWidth","characterDirection","hindiNumbers","kashida","diacriticPos"],F2=["none","crisp","strong","smooth","sharp"],N2=["left","right","center","justify-left","justify-right","justify-center","justify-all"];function U2(e){return e.substring(0,1).toUpperCase()+e.substring(1)}function EC(e){var t=e.Values;switch(e.Type){case 0:return{k:t[1]*255};case 1:return t[0]===1?{r:t[1]*255,g:t[2]*255,b:t[3]*255}:{r:t[1]*255,g:t[2]*255,b:t[3]*255,a:t[0]*255};case 2:return{c:t[1]*255,m:t[2]*255,y:t[3]*255,k:t[4]*255};default:throw new Error("Unknown color type in text layer")}}function ap(e){if(e){if("r"in e)return{Type:1,Values:["a"in e?e.a/255:1,e.r/255,e.g/255,e.b/255]};if("c"in e)return{Type:2,Values:[1,e.c/255,e.m/255,e.y/255,e.k/255]};if("k"in e)return{Type:0,Values:[1,e.k/255]};throw new Error("Invalid color type in text layer")}else return{Type:1,Values:[0,0,0,0]}}function D2(e,t){if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function M2(e,t){if(!e||!t)return!1;for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(e[i]!==t[i])return!1}for(var o=0,a=Object.keys(t);o<a.length;o++){var i=a[o];if(e[i]!==t[i])return!1}return!0}function bC(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t.name)return n;return e.push(t),e.length-1}function B2(e,t,n){for(var r={},i=0,o=t;i<o.length;i++){var a=o[i],l=U2(a);e[l]!==void 0&&(a==="justification"?r[a]=N2[e[l]]:a==="font"?r[a]=n[e[l]]:a==="fillColor"||a==="strokeColor"?r[a]=EC(e[l]):r[a]=e[l])}return r}function z2(e,t,n){for(var r,i={},o=0,a=t;o<a.length;o++){var l=a[o],s=U2(l);e[l]!==void 0&&(l==="justification"?i[s]=N2.indexOf((r=e[l])!==null&&r!==void 0?r:"left"):l==="font"?i[s]=bC(n,e[l]):l==="fillColor"||l==="strokeColor"?i[s]=ap(e[l]):i[s]=e[l])}return i}function CC(e,t){return B2(e,lp,t)}function IC(e,t){return B2(e,sp,t)}function Mu(e,t){return z2(e,lp,t)}function op(e,t){return z2(e,sp,t)}function R2(e,t,n){if(t.length){for(var r=function(l){var s=t[0].style[l];if(s!==void 0){var u=!1;Array.isArray(s)?u=t.every(function(v){return D2(v.style[l],s)}):typeof s=="object"?u=t.every(function(v){return M2(v.style[l],s)}):u=t.every(function(v){return v.style[l]===s}),u&&(e[l]=s)}var c=e[l];if(c!==void 0)for(var p=0,d=t;p<d.length;p++){var g=d[p],y=!1;Array.isArray(s)?y=D2(g.style[l],s):typeof s=="object"?y=M2(g.style[l],s):y=g.style[l]===s,y&&delete g.style[l]}},i=0,o=n;i<o.length;i++){var a=o[i];r(a)}t.every(function(l){return Object.keys(l.style).length===0})&&(t.length=0)}}function TC(e){for(var t,n,r,i,o,a,l=e.EngineDict,s=e.ResourceDict,u=s.FontSet.map(function(T){return{name:T.Name,script:T.Script,type:T.FontType,synthetic:T.Synthetic}}),c=l.Editor.Text.replace(/\r/g,`
`),p=0;/\n$/.test(c);)c=c.substring(0,c.length-1),p++;var d={text:c,antiAlias:(t=F2[l.AntiAlias])!==null&&t!==void 0?t:"smooth",useFractionalGlyphWidths:!!l.UseFractionalGlyphWidths,superscriptSize:s.SuperscriptSize,superscriptPosition:s.SuperscriptPosition,subscriptSize:s.SubscriptSize,subscriptPosition:s.SubscriptPosition,smallCapSize:s.SmallCapSize},g=(a=(o=(i=(r=(n=l.Rendered)===null||n===void 0?void 0:n.Shapes)===null||r===void 0?void 0:r.Children)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.Cookie)===null||a===void 0?void 0:a.Photoshop;g&&(d.shapeType=g.ShapeType===1?"box":"point",g.PointBase&&(d.pointBase=g.PointBase),g.BoxBounds&&(d.boxBounds=g.BoxBounds));var y=l.ParagraphRun;d.paragraphStyle={},d.paragraphStyleRuns=[];for(var v=0;v<y.RunArray.length;v++){var S=y.RunArray[v],m=y.RunLengthArray[v],f=CC(S.ParagraphSheet.Properties,u);d.paragraphStyleRuns.push({length:m,style:f})}for(var h=p;d.paragraphStyleRuns.length&&h>0;h--)--d.paragraphStyleRuns[d.paragraphStyleRuns.length-1].length===0&&d.paragraphStyleRuns.pop();R2(d.paragraphStyle,d.paragraphStyleRuns,lp),d.paragraphStyleRuns.length||delete d.paragraphStyleRuns;var w=l.StyleRun;d.style={},d.styleRuns=[];for(var v=0;v<w.RunArray.length;v++){var I=w.RunLengthArray[v],f=IC(w.RunArray[v].StyleSheet.StyleSheetData,u);f.font||(f.font=u[0]),d.styleRuns.push({length:I,style:f})}for(var h=p;d.styleRuns.length&&h>0;h--)--d.styleRuns[d.styleRuns.length-1].length===0&&d.styleRuns.pop();return R2(d.style,d.styleRuns,sp),d.styleRuns.length||delete d.styleRuns,d}ii.decodeEngineData=TC;function LC(e){var t,n,r,i,o,a,l,s,u,c,p,d,g="".concat((e.text||"").replace(/\r?\n/g,"\r"),"\r"),y=[{name:"AdobeInvisFont",script:0,type:0,synthetic:0}],v=((t=e.style)===null||t===void 0?void 0:t.font)||((r=(n=e.styleRuns)===null||n===void 0?void 0:n.find(function(J){return J.style.font}))===null||r===void 0?void 0:r.style.font)||O2,S=[],m=[],f=e.paragraphStyleRuns;if(f&&f.length){for(var h=g.length,w=0,I=f;w<I.length;w++){var T=I[w],L=Math.min(T.length,h);h-=L,L&&(h===1&&T===f[f.length-1]&&(L++,h--),m.push(L),S.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Mu(at(at(at({},Du),e.paragraphStyle),T.style),y)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}h&&(m.push(h),S.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Mu(at(at({},Du),e.paragraphStyle),y)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}else for(var A=0,O=0;A<g.length;A++)g.charCodeAt(A)===13&&(m.push(A-O+1),S.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:Mu(at(at({},Du),e.paragraphStyle),y)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}),O=A+1);for(var R=op(at(at({},xC),{font:v}),y),F=e.styleRuns||[{length:g.length,style:e.style||{}}],q=[],D=[],b=g.length,k=0,M=F;k<M.length;k++){var H=M[k],L=Math.min(H.length,b);b-=L,L&&(b===1&&H===F[F.length-1]&&(L++,b--),D.push(L),q.push({StyleSheet:{StyleSheetData:op(at(at({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),H.style),y)}}))}b&&F.length&&(D.push(b),q.push({StyleSheet:{StyleSheetData:op(at({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),y)}}));var j=at(at({},_C),e.gridInfo),ne=e.orientation==="vertical"?2:0,U=e.orientation==="vertical"?1:0,z=e.shapeType==="box"?1:0,Q={ShapeType:z};z===0?Q.PointBase=e.pointBase||[0,0]:Q.BoxBounds=e.boxBounds||[0,0,0,0],Q.Base={ShapeType:z,TransformPoint0:[1,0],TransformPoint1:[0,1],TransformPoint2:[0,0]};var ee={KinsokuSet:[{Name:"PhotoshopKinsokuHard",NoStart:"\u3001\u3002\uFF0C\uFF0E\u30FB\uFF1A\uFF1B\uFF1F\uFF01\u30FC\u2015\u2019\u201D\uFF09\u3015\uFF3D\uFF5D\u3009\u300B\u300D\u300F\u3011\u30FD\u30FE\u309D\u309E\u3005\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u309B\u309C?!)]},.:;\u2103\u2109\xA2\uFF05\u2030",NoEnd:"\u2018\u201C\uFF08\u3014\uFF3B\uFF5B\u3008\u300A\u300C\u300E\u3010([{\uFFE5\uFF04\xA3\uFF20\xA7\u3012\uFF03",Keep:"\u2015\u2025",Hanging:"\u3001\u3002.,"},{Name:"PhotoshopKinsokuSoft",NoStart:"\u3001\u3002\uFF0C\uFF0E\u30FB\uFF1A\uFF1B\uFF1F\uFF01\u2019\u201D\uFF09\u3015\uFF3D\uFF5D\u3009\u300B\u300D\u300F\u3011\u30FD\u30FE\u309D\u309E\u3005",NoEnd:"\u2018\u201C\uFF08\u3014\uFF3B\uFF5B\u3008\u300A\u300C\u300E\u3010",Keep:"\u2015\u2025",Hanging:"\u3001\u3002.,"}],MojiKumiSet:[{InternalName:"Photoshop6MojiKumiSet1"},{InternalName:"Photoshop6MojiKumiSet2"},{InternalName:"Photoshop6MojiKumiSet3"},{InternalName:"Photoshop6MojiKumiSet4"}],TheNormalStyleSheet:0,TheNormalParagraphSheet:0,ParagraphSheetSet:[{Name:"Normal RGB",DefaultStyleSheet:0,Properties:Mu(at(at({},Du),e.paragraphStyle),y)}],StyleSheetSet:[{Name:"Normal RGB",StyleSheetData:R}],FontSet:y.map(function(J){return{Name:J.name,Script:J.script||0,FontType:J.type||0,Synthetic:J.synthetic||0}}),SuperscriptSize:(i=e.superscriptSize)!==null&&i!==void 0?i:.583,SuperscriptPosition:(o=e.superscriptPosition)!==null&&o!==void 0?o:.333,SubscriptSize:(a=e.subscriptSize)!==null&&a!==void 0?a:.583,SubscriptPosition:(l=e.subscriptPosition)!==null&&l!==void 0?l:.333,SmallCapSize:(s=e.smallCapSize)!==null&&s!==void 0?s:.7},_e={EngineDict:{Editor:{Text:g},ParagraphRun:{DefaultRunData:{ParagraphSheet:{DefaultStyleSheet:0,Properties:{}},Adjustments:{Axis:[1,0,1],XY:[0,0]}},RunArray:S,RunLengthArray:m,IsJoinable:1},StyleRun:{DefaultRunData:{StyleSheet:{StyleSheetData:{}}},RunArray:q,RunLengthArray:D,IsJoinable:2},GridInfo:{GridIsOn:!!j.isOn,ShowGrid:!!j.show,GridSize:(u=j.size)!==null&&u!==void 0?u:18,GridLeading:(c=j.leading)!==null&&c!==void 0?c:22,GridColor:ap(j.color),GridLeadingFillColor:ap(j.color),AlignLineHeightToGridFlags:!!j.alignLineHeightToGridFlags},AntiAlias:F2.indexOf((p=e.antiAlias)!==null&&p!==void 0?p:"sharp"),UseFractionalGlyphWidths:(d=e.useFractionalGlyphWidths)!==null&&d!==void 0?d:!0,Rendered:{Version:1,Shapes:{WritingDirection:ne,Children:[{ShapeType:z,Procession:U,Lines:{WritingDirection:ne,Children:[]},Cookie:{Photoshop:Q}}]}}},ResourceDict:at({},ee),DocumentResources:at({},ee)};return _e}ii.encodeEngineData=LC});var G2=de(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.decodeEngineData2=void 0;var up={0:{uproot:!0,children:{0:{name:"Type"},1:{name:"Values"}}}},dp={0:{name:"Font"},1:{name:"FontSize"},2:{name:"FauxBold"},3:{name:"FauxItalic"},4:{name:"AutoLeading"},5:{name:"Leading"},6:{name:"HorizontalScale"},7:{name:"VerticalScale"},8:{name:"Tracking"},9:{name:"BaselineShift"},11:{name:"Kerning?"},12:{name:"FontCaps"},13:{name:"FontBaseline"},15:{name:"Strikethrough?"},16:{name:"Underline?"},18:{name:"Ligatures"},19:{name:"DLigatures"},23:{name:"Fractions"},24:{name:"Ordinals"},28:{name:"StylisticAlternates"},30:{name:"OldStyle?"},35:{name:"BaselineDirection"},38:{name:"Language"},52:{name:"NoBreak"},53:{name:"FillColor",children:up},54:{name:"StrokeColor",children:up},55:{children:{99:{uproot:!0}}},79:{children:up}},cp={0:{name:"Justification"},1:{name:"FirstLineIndent"},2:{name:"StartIndent"},3:{name:"EndIndent"},4:{name:"SpaceBefore"},5:{name:"SpaceAfter"},7:{name:"AutoLeading"},9:{name:"AutoHyphenate"},10:{name:"HyphenatedWordSize"},11:{name:"PreHyphen"},12:{name:"PostHyphen"},13:{name:"ConsecutiveHyphens?"},14:{name:"Zone"},15:{name:"HypenateCapitalizedWords"},17:{name:"WordSpacing"},18:{name:"LetterSpacing"},19:{name:"GlyphSpacing"},32:{name:"StyleSheet",children:dp}},H2={name:"StyleSheetData",children:dp},PC={0:{name:"ResourceDict",children:{1:{name:"FontSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},2:{name:"FontType"}}}}}}}}},2:{name:"2",children:{}},3:{name:"MojiKumiSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"InternalName"}}}}}}},4:{name:"KinsokuSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{uproot:!0,children:{0:{name:"NoStart"},1:{name:"NoEnd"},2:{name:"Keep"},3:{name:"Hanging"},4:{name:"Name"}}}}}}}}},5:{name:"StyleSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},6:H2}}}}}},6:{name:"ParagraphSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{name:"Properties",children:cp},6:{name:"DefaultStyleSheet"}}}}}}},8:{name:"TextFrameSet",children:{0:{uproot:!0,children:{0:{name:"path",children:{0:{name:"name"},1:{name:"bezierCurve",children:{0:{name:"controlPoints"}}},2:{name:"data",children:{0:{name:"type"},1:{name:"orientation"},2:{name:"frameMatrix"},4:{name:"4"},6:{name:"textRange"},7:{name:"rowGutter"},8:{name:"columnGutter"},9:{name:"9"},10:{name:"baselineAlignment",children:{0:{name:"flag"},1:{name:"min"}}},11:{name:"pathData",children:{1:{name:"1"},0:{name:"reversed"},2:{name:"2"},3:{name:"3"},4:{name:"spacing"},5:{name:"5"},6:{name:"6"},7:{name:"7"},18:{name:"18"}}},12:{name:"12"},13:{name:"13"}}},3:{name:"3"},97:{name:"uuid"}}}}}}},9:{name:"Predefined",children:{0:{children:{0:{uproot:!0}}},1:{children:{0:{uproot:!0}}}}}}},1:{name:"EngineDict",children:{0:{name:"0",children:{3:{name:"SuperscriptSize"},4:{name:"SuperscriptPosition"},5:{name:"SubscriptSize"},6:{name:"SubscriptPosition"},7:{name:"SmallCapSize"},8:{name:"UseFractionalGlyphWidths"},15:{children:{0:{uproot:!0}}}}},1:{name:"Editors?",children:{0:{name:"Editor",children:{0:{name:"Text"},5:{name:"ParagraphRun",children:{0:{name:"RunArray",children:{0:{name:"ParagraphSheet",children:{0:{uproot:!0,children:{0:{name:"0"},5:{name:"5",children:cp},6:{name:"6"}}}}},1:{name:"RunLength"}}}}},6:{name:"StyleRun",children:{0:{name:"RunArray",children:{0:{name:"StyleSheet",children:{0:{uproot:!0,children:{6:H2}}}},1:{name:"RunLength"}}}}}}},1:{name:"FontVectorData ???"}}},2:{name:"StyleSheet",children:dp},3:{name:"ParagraphSheet",children:cp}}}};function vl(e,t){var n,r;if(e===null)return e;if(Array.isArray(e))return e.map(function(s){return vl(s,t)});if(typeof e!="object")return e;for(var i={},o=0,a=Object.keys(e);o<a.length;o++){var l=a[o];if(t[l])if(t[l].uproot){l!=="99"&&(i=vl(e[l],(n=t[l].children)!==null&&n!==void 0?n:{})),e[99]&&(i._type=e[99]);break}else i[t[l].name||l]=vl(e[l],(r=t[l].children)!==null&&r!==void 0?r:{});else l==="99"?i._type=e[l]:i[l]=vl(e[l],{})}return i}function AC(e){return vl(e,PC)}Ru.decodeEngineData2=AC});var ku=de(Qe=>{"use strict";var E=Qe&&Qe.__assign||function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},E.apply(this,arguments)};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.hasMultiEffects=Qe.readVectorMask=Qe.booleanOperations=Qe.readBezierKnot=Qe.infoHandlersMap=Qe.infoHandlers=void 0;var W2=qa(),j2=L2(),on=ti(),x=ni(),_=Oo(),C=Su(),vp=k2(),$2=V2(),kC=G2(),rn="abcdefghijklmnopqrstuvwxyz";Qe.infoHandlers=[];Qe.infoHandlersMap={};function Y(e,t,n,r){var i={key:e,has:t,read:n,write:r};Qe.infoHandlers.push(i),Qe.infoHandlersMap[i.key]=i}function $o(e,t){Qe.infoHandlersMap[e]=Qe.infoHandlersMap[t]}function Le(e){return function(t){return t[e]!==void 0}}function fp(e){if((0,x.readUint32)(e))throw new Error("Resource size above 4 GB limit at ".concat(e.offset.toString(16)));return(0,x.readUint32)(e)}function pp(e,t){(0,_.writeUint32)(e,0),(0,_.writeUint32)(e,t)}Y("TySh",Le("text"),function(e,t,n){if((0,x.readInt16)(e)!==1)throw new Error("Invalid TySh version");for(var r=[],i=0;i<6;i++)r.push((0,x.readFloat64)(e));if((0,x.readInt16)(e)!==50)throw new Error("Invalid TySh text version");var o=(0,C.readVersionAndDescriptor)(e);if((0,x.readInt16)(e)!==1)throw new Error("Invalid TySh warp version");var a=(0,C.readVersionAndDescriptor)(e);if(t.text={transform:r,left:(0,x.readFloat32)(e),top:(0,x.readFloat32)(e),right:(0,x.readFloat32)(e),bottom:(0,x.readFloat32)(e),text:o["Txt "].replace(/\r/g,`
`),index:o.TextIndex||0,gridding:C.textGridding.decode(o.textGridding),antiAlias:C.Annt.decode(o.AntA),orientation:C.Ornt.decode(o.Ornt),warp:{style:C.warpStyle.decode(a.warpStyle),value:a.warpValue||0,perspective:a.warpPerspective||0,perspectiveOther:a.warpPerspectiveOther||0,rotate:C.Ornt.decode(a.warpRotate)}},o.bounds&&(t.text.bounds=(0,C.descBoundsToBounds)(o.bounds)),o.boundingBox&&(t.text.boundingBox=(0,C.descBoundsToBounds)(o.boundingBox)),o.EngineData){var l=(0,vp.parseEngineData)(o.EngineData),s=(0,$2.decodeEngineData)(l);t.text=E(E({},t.text),s)}(0,x.skipBytes)(e,n())},function(e,t){var n=t.text,r=n.warp||{},i=n.transform||[1,0,0,1,0,0],o=E(E(E({"Txt ":(n.text||"").replace(/\r?\n/g,"\r"),textGridding:C.textGridding.encode(n.gridding),Ornt:C.Ornt.encode(n.orientation),AntA:C.Annt.encode(n.antiAlias)},n.bounds?{bounds:(0,C.boundsToDescBounds)(n.bounds)}:{}),n.boundingBox?{boundingBox:(0,C.boundsToDescBounds)(n.boundingBox)}:{}),{TextIndex:n.index||0,EngineData:(0,vp.serializeEngineData)((0,$2.encodeEngineData)(n))});(0,_.writeInt16)(e,1);for(var a=0;a<6;a++)(0,_.writeFloat64)(e,i[a]);(0,_.writeInt16)(e,50),(0,C.writeVersionAndDescriptor)(e,"","TxLr",o,"text"),(0,_.writeInt16)(e,1),(0,C.writeVersionAndDescriptor)(e,"","warp",zu(r)),(0,_.writeFloat32)(e,n.left),(0,_.writeFloat32)(e,n.top),(0,_.writeFloat32)(e,n.right),(0,_.writeFloat32)(e,n.bottom)});Y("SoCo",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&e.vectorFill.type==="color"},function(e,t){var n=(0,C.readVersionAndDescriptor)(e);t.vectorFill=(0,C.parseVectorContent)(n)},function(e,t){var n=(0,C.serializeVectorContent)(t.vectorFill).descriptor;(0,C.writeVersionAndDescriptor)(e,"","null",n)});Y("GdFl",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&(e.vectorFill.type==="solid"||e.vectorFill.type==="noise")},function(e,t,n){var r=(0,C.readVersionAndDescriptor)(e);t.vectorFill=(0,C.parseVectorContent)(r),(0,x.skipBytes)(e,n())},function(e,t){var n=(0,C.serializeVectorContent)(t.vectorFill).descriptor;(0,C.writeVersionAndDescriptor)(e,"","null",n)});Y("PtFl",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&e.vectorFill.type==="pattern"},function(e,t){var n=(0,C.readVersionAndDescriptor)(e);t.vectorFill=(0,C.parseVectorContent)(n)},function(e,t){var n=(0,C.serializeVectorContent)(t.vectorFill).descriptor;(0,C.writeVersionAndDescriptor)(e,"","null",n)});Y("vscg",function(e){return e.vectorFill!==void 0&&e.vectorStroke!==void 0},function(e,t,n){(0,x.readSignature)(e);var r=(0,C.readVersionAndDescriptor)(e);t.vectorFill=(0,C.parseVectorContent)(r),(0,x.skipBytes)(e,n())},function(e,t){var n=(0,C.serializeVectorContent)(t.vectorFill),r=n.descriptor,i=n.key;(0,_.writeSignature)(e,i),(0,C.writeVersionAndDescriptor)(e,"","null",r)});function J2(e,t,n){var r=(0,x.readFixedPointPath32)(e)*n,i=(0,x.readFixedPointPath32)(e)*t,o=(0,x.readFixedPointPath32)(e)*n,a=(0,x.readFixedPointPath32)(e)*t,l=(0,x.readFixedPointPath32)(e)*n,s=(0,x.readFixedPointPath32)(e)*t;return[i,r,a,o,s,l]}Qe.readBezierKnot=J2;function DC(e,t,n,r){(0,_.writeFixedPointPath32)(e,t[1]/r),(0,_.writeFixedPointPath32)(e,t[0]/n),(0,_.writeFixedPointPath32)(e,t[3]/r),(0,_.writeFixedPointPath32)(e,t[2]/n),(0,_.writeFixedPointPath32)(e,t[5]/r),(0,_.writeFixedPointPath32)(e,t[4]/n)}Qe.booleanOperations=["exclude","combine","subtract","intersect"];function ew(e,t,n,r,i){for(var o=e.offset+i,a=t.paths,l=void 0;o-e.offset>=26;){var s=(0,x.readUint16)(e);switch(s){case 0:case 3:{(0,x.readUint16)(e);var u=(0,x.readInt16)(e),c=(0,x.readUint16)(e);(0,x.skipBytes)(e,18),l={open:s===3,knots:[],fillRule:c===2?"non-zero":"even-odd"},u!==-1&&(l.operation=Qe.booleanOperations[u]),a.push(l);break}case 1:case 2:case 4:case 5:l.knots.push({linked:s===1||s===4,points:J2(e,n,r)});break;case 6:(0,x.skipBytes)(e,24);break;case 7:{var p=(0,x.readFixedPointPath32)(e),d=(0,x.readFixedPointPath32)(e),g=(0,x.readFixedPointPath32)(e),y=(0,x.readFixedPointPath32)(e),v=(0,x.readFixedPointPath32)(e);(0,x.skipBytes)(e,4),t.clipboard={top:p,left:d,bottom:g,right:y,resolution:v};break}case 8:t.fillStartsWithAllPixels=!!(0,x.readUint16)(e),(0,x.skipBytes)(e,22);break;default:throw new Error("Invalid vmsk section")}}return a}Qe.readVectorMask=ew;Y("vmsk",Le("vectorMask"),function(e,t,n,r){var i=r.width,o=r.height;if((0,x.readUint32)(e)!==3)throw new Error("Invalid vmsk version");t.vectorMask={paths:[]};var a=t.vectorMask,l=(0,x.readUint32)(e);a.invert=(l&1)!==0,a.notLink=(l&2)!==0,a.disable=(l&4)!==0,ew(e,a,i,o,n()),(0,x.skipBytes)(e,n())},function(e,t,n){var r=n.width,i=n.height,o=t.vectorMask,a=(o.invert?1:0)|(o.notLink?2:0)|(o.disable?4:0);(0,_.writeUint32)(e,3),(0,_.writeUint32)(e,a),(0,_.writeUint16)(e,6),(0,_.writeZeros)(e,24);var l=o.clipboard;l&&((0,_.writeUint16)(e,7),(0,_.writeFixedPointPath32)(e,l.top),(0,_.writeFixedPointPath32)(e,l.left),(0,_.writeFixedPointPath32)(e,l.bottom),(0,_.writeFixedPointPath32)(e,l.right),(0,_.writeFixedPointPath32)(e,l.resolution),(0,_.writeZeros)(e,4)),o.fillStartsWithAllPixels!==void 0&&((0,_.writeUint16)(e,8),(0,_.writeUint16)(e,o.fillStartsWithAllPixels?1:0),(0,_.writeZeros)(e,22));for(var s=0,u=o.paths;s<u.length;s++){var c=u[s];(0,_.writeUint16)(e,c.open?3:0),(0,_.writeUint16)(e,c.knots.length),(0,_.writeUint16)(e,c.operation?Qe.booleanOperations.indexOf(c.operation):-1),(0,_.writeUint16)(e,c.fillRule==="non-zero"?2:1),(0,_.writeZeros)(e,18);for(var p=c.open?4:1,d=c.open?5:2,g=0,y=c.knots;g<y.length;g++){var v=y[g],S=v.linked,m=v.points;(0,_.writeUint16)(e,S?p:d),DC(e,m,r,i)}}});$o("vsms","vmsk");Y("vowv",Le("vowv"),function(e,t){t.vowv=(0,x.readUint32)(e)},function(e,t){(0,_.writeUint32)(e,t.vowv)});Y("vogk",Le("vectorOrigination"),function(e,t,n){if((0,x.readInt32)(e)!==1)throw new Error("Invalid vogk version");var r=(0,C.readVersionAndDescriptor)(e);t.vectorOrigination={keyDescriptorList:[]};for(var i=0,o=r.keyDescriptorList;i<o.length;i++){var a=o[i],l={};a.keyShapeInvalidated!=null&&(l.keyShapeInvalidated=a.keyShapeInvalidated),a.keyOriginType!=null&&(l.keyOriginType=a.keyOriginType),a.keyOriginResolution!=null&&(l.keyOriginResolution=a.keyOriginResolution),a.keyOriginShapeBBox&&(l.keyOriginShapeBoundingBox={top:(0,C.parseUnitsOrNumber)(a.keyOriginShapeBBox["Top "]),left:(0,C.parseUnitsOrNumber)(a.keyOriginShapeBBox.Left),bottom:(0,C.parseUnitsOrNumber)(a.keyOriginShapeBBox.Btom),right:(0,C.parseUnitsOrNumber)(a.keyOriginShapeBBox.Rght)});var s=a.keyOriginRRectRadii;s&&(l.keyOriginRRectRadii={topRight:(0,C.parseUnits)(s.topRight),topLeft:(0,C.parseUnits)(s.topLeft),bottomLeft:(0,C.parseUnits)(s.bottomLeft),bottomRight:(0,C.parseUnits)(s.bottomRight)});var u=a.keyOriginBoxCorners;u&&(l.keyOriginBoxCorners=[{x:u.rectangleCornerA.Hrzn,y:u.rectangleCornerA.Vrtc},{x:u.rectangleCornerB.Hrzn,y:u.rectangleCornerB.Vrtc},{x:u.rectangleCornerC.Hrzn,y:u.rectangleCornerC.Vrtc},{x:u.rectangleCornerD.Hrzn,y:u.rectangleCornerD.Vrtc}]);var c=a.Trnf;c&&(l.transform=[c.xx,c.xy,c.xy,c.yy,c.tx,c.ty]),t.vectorOrigination.keyDescriptorList.push(l)}(0,x.skipBytes)(e,n())},function(e,t){for(var n=t.vectorOrigination,r={keyDescriptorList:[]},i=0;i<n.keyDescriptorList.length;i++){var o=n.keyDescriptorList[i];r.keyDescriptorList.push({});var a=r.keyDescriptorList[r.keyDescriptorList.length-1];o.keyOriginType!=null&&(a.keyOriginType=o.keyOriginType),o.keyOriginResolution!=null&&(a.keyOriginResolution=o.keyOriginResolution);var l=o.keyOriginRRectRadii;l&&(a.keyOriginRRectRadii={unitValueQuadVersion:1,topRight:(0,C.unitsValue)(l.topRight,"topRight"),topLeft:(0,C.unitsValue)(l.topLeft,"topLeft"),bottomLeft:(0,C.unitsValue)(l.bottomLeft,"bottomLeft"),bottomRight:(0,C.unitsValue)(l.bottomRight,"bottomRight")});var s=o.keyOriginShapeBoundingBox;s&&(a.keyOriginShapeBBox={unitValueQuadVersion:1,"Top ":(0,C.unitsValue)(s.top,"top"),Left:(0,C.unitsValue)(s.left,"left"),Btom:(0,C.unitsValue)(s.bottom,"bottom"),Rght:(0,C.unitsValue)(s.right,"right")});var u=o.keyOriginBoxCorners;u&&u.length===4&&(a.keyOriginBoxCorners={rectangleCornerA:{Hrzn:u[0].x,Vrtc:u[0].y},rectangleCornerB:{Hrzn:u[1].x,Vrtc:u[1].y},rectangleCornerC:{Hrzn:u[2].x,Vrtc:u[2].y},rectangleCornerD:{Hrzn:u[3].x,Vrtc:u[3].y}});var c=o.transform;c&&c.length===6&&(a.Trnf={xx:c[0],xy:c[1],yx:c[2],yy:c[3],tx:c[4],ty:c[5]}),o.keyShapeInvalidated!=null&&(a.keyShapeInvalidated=o.keyShapeInvalidated),a.keyOriginIndex=i}(0,_.writeInt32)(e,1),(0,C.writeVersionAndDescriptor)(e,"","null",r)});Y("lmfx",function(e){return e.effects!==void 0&&wp(e.effects)},function(e,t,n){var r=(0,x.readUint32)(e);if(r!==0)throw new Error("Invalid lmfx version");var i=(0,C.readVersionAndDescriptor)(e);t.effects=(0,C.parseEffects)(i,!!e.logMissingFeatures),(0,x.skipBytes)(e,n())},function(e,t,n,r){var i=(0,C.serializeEffects)(t.effects,!!r.logMissingFeatures,!0);(0,_.writeUint32)(e,0),(0,C.writeVersionAndDescriptor)(e,"","null",i)});Y("lrFX",Le("effects"),function(e,t,n){t.effects||(t.effects=(0,j2.readEffects)(e)),(0,x.skipBytes)(e,n())},function(e,t){(0,j2.writeEffects)(e,t.effects)});Y("luni",Le("name"),function(e,t,n){if(n()>4){var r=(0,x.readUint32)(e);n()>=r*2?t.name=(0,x.readUnicodeStringWithLength)(e,r):e.logDevFeatures&&e.log("name in luni section is too long")}else e.logDevFeatures&&e.log("empty luni section");(0,x.skipBytes)(e,n())},function(e,t){(0,_.writeUnicodeString)(e,t.name)});Y("lnsr",Le("nameSource"),function(e,t){return t.nameSource=(0,x.readSignature)(e)},function(e,t){return(0,_.writeSignature)(e,t.nameSource)});Y("lyid",Le("id"),function(e,t){t.id=(0,x.readUint32)(e)},function(e,t,n,r){for(var i=t.id;r.layerIds.has(i);)i+=100;(0,_.writeUint32)(e,i),r.layerIds.add(i),r.layerToId.set(t,i)});Y("lsct",Le("sectionDivider"),function(e,t,n){t.sectionDivider={type:(0,x.readUint32)(e)},n()&&((0,x.checkSignature)(e,"8BIM"),t.sectionDivider.key=(0,x.readSignature)(e)),n()&&(t.sectionDivider.subType=(0,x.readUint32)(e))},function(e,t){(0,_.writeUint32)(e,t.sectionDivider.type),t.sectionDivider.key&&((0,_.writeSignature)(e,"8BIM"),(0,_.writeSignature)(e,t.sectionDivider.key),t.sectionDivider.subType!==void 0&&(0,_.writeUint32)(e,t.sectionDivider.subType))});$o("lsdk","lsct");Y("clbl",Le("blendClippendElements"),function(e,t){t.blendClippendElements=!!(0,x.readUint8)(e),(0,x.skipBytes)(e,3)},function(e,t){(0,_.writeUint8)(e,t.blendClippendElements?1:0),(0,_.writeZeros)(e,3)});Y("infx",Le("blendInteriorElements"),function(e,t){t.blendInteriorElements=!!(0,x.readUint8)(e),(0,x.skipBytes)(e,3)},function(e,t){(0,_.writeUint8)(e,t.blendInteriorElements?1:0),(0,_.writeZeros)(e,3)});Y("knko",Le("knockout"),function(e,t){t.knockout=!!(0,x.readUint8)(e),(0,x.skipBytes)(e,3)},function(e,t){(0,_.writeUint8)(e,t.knockout?1:0),(0,_.writeZeros)(e,3)});Y("lmgm",Le("layerMaskAsGlobalMask"),function(e,t){t.layerMaskAsGlobalMask=!!(0,x.readUint8)(e),(0,x.skipBytes)(e,3)},function(e,t){(0,_.writeUint8)(e,t.layerMaskAsGlobalMask?1:0),(0,_.writeZeros)(e,3)});Y("lspf",Le("protected"),function(e,t){var n=(0,x.readUint32)(e);t.protected={transparency:(n&1)!==0,composite:(n&2)!==0,position:(n&4)!==0},n&8&&(t.protected.artboards=!0)},function(e,t){var n=(t.protected.transparency?1:0)|(t.protected.composite?2:0)|(t.protected.position?4:0)|(t.protected.artboards?8:0);(0,_.writeUint32)(e,n)});Y("lclr",Le("layerColor"),function(e,t){var n=(0,x.readUint16)(e);(0,x.skipBytes)(e,6),t.layerColor=on.layerColors[n]},function(e,t){var n=on.layerColors.indexOf(t.layerColor);(0,_.writeUint16)(e,n===-1?0:n),(0,_.writeZeros)(e,6)});Y("shmd",function(e){return e.timestamp!==void 0||e.animationFrames!==void 0||e.animationFrameFlags!==void 0||e.timeline!==void 0||e.comps!==void 0},function(e,t,n){for(var r=(0,x.readUint32)(e),i=function(a){(0,x.checkSignature)(e,"8BIM");var l=(0,x.readSignature)(e);(0,x.readUint8)(e),(0,x.skipBytes)(e,3),(0,x.readSection)(e,1,function(s){if(l==="cust"){var u=(0,C.readVersionAndDescriptor)(e);u.layerTime!==void 0&&(t.timestamp=u.layerTime)}else if(l==="mlst"){var u=(0,C.readVersionAndDescriptor)(e);t.animationFrames=[];for(var c=0;c<u.LaSt.length;c++){var p=u.LaSt[c],d={frames:p.FrLs};p.enab!==void 0&&(d.enable=p.enab),p.Ofst&&(d.offset=(0,C.horzVrtcToXY)(p.Ofst)),p.FXRf&&(d.referencePoint=(0,C.horzVrtcToXY)(p.FXRf)),p.Lefx&&(d.effects=(0,C.parseEffects)(p.Lefx,!!e.logMissingFeatures)),p.blendOptions&&p.blendOptions.Opct&&(d.opacity=(0,C.parsePercent)(p.blendOptions.Opct)),t.animationFrames.push(d)}}else if(l==="mdyn"){(0,x.readUint16)(e);var g=(0,x.readUint8)(e),y=(0,x.readUint8)(e);t.animationFrameFlags={propagateFrameOne:!g,unifyLayerPosition:(y&1)!==0,unifyLayerStyle:(y&2)!==0,unifyLayerVisibility:(y&4)!==0}}else if(l==="tmln"){var u=(0,C.readVersionAndDescriptor)(e),v=u.timeScope,S={start:(0,C.frac)(v.Strt),duration:(0,C.frac)(v.duration),inTime:(0,C.frac)(v.inTime),outTime:(0,C.frac)(v.outTime),autoScope:u.autoScope,audioLevel:u.audioLevel};u.trackList&&(S.tracks=(0,C.parseTrackList)(u.trackList,!!e.logMissingFeatures)),t.timeline=S}else if(l==="cmls"){var u=(0,C.readVersionAndDescriptor)(e);t.comps={settings:[]},u.origFXRefPoint&&(t.comps.originalEffectsReferencePoint={x:u.origFXRefPoint.Hrzn,y:u.origFXRefPoint.Vrtc});for(var m=0,f=u.layerSettings;m<f.length;m++){var h=f[m];t.comps.settings.push({compList:h.compList});var w=t.comps.settings[t.comps.settings.length-1];"enab"in h&&(w.enabled=h.enab),h.Ofst&&(w.offset={x:h.Ofst.Hrzn,y:h.Ofst.Vrtc}),h.FXRefPoint&&(w.effectsReferencePoint={x:h.FXRefPoint.Hrzn,y:h.FXRefPoint.Vrtc})}}else if(l==="extn"){var u=(0,C.readVersionAndDescriptor)(e);e.logMissingFeatures&&e.log('Unhandled "shmd" section key',l)}else e.logMissingFeatures&&e.log('Unhandled "shmd" section key',l);(0,x.skipBytes)(e,s())})},o=0;o<r;o++)i(o);(0,x.skipBytes)(e,n())},function(e,t,n,r){var i=t.animationFrames,o=t.animationFrameFlags,a=t.timestamp,l=t.timeline,s=t.comps,u=0;i&&u++,o&&u++,l&&u++,a!==void 0&&u++,s&&u++,(0,_.writeUint32)(e,u),i&&((0,_.writeSignature)(e,"8BIM"),(0,_.writeSignature)(e,"mlst"),(0,_.writeUint8)(e,0),(0,_.writeZeros)(e,3),(0,_.writeSection)(e,2,function(){for(var c,p={LaID:(c=t.id)!==null&&c!==void 0?c:0,LaSt:[]},d=0;d<i.length;d++){var g=i[d],y={};g.enable!==void 0&&(y.enab=g.enable),y.FrLs=g.frames,g.offset&&(y.Ofst=(0,C.xyToHorzVrtc)(g.offset)),g.referencePoint&&(y.FXRf=(0,C.xyToHorzVrtc)(g.referencePoint)),g.effects&&(y.Lefx=(0,C.serializeEffects)(g.effects,!1,!1)),g.opacity!==void 0&&(y.blendOptions={Opct:(0,C.unitsPercent)(g.opacity)}),p.LaSt.push(y)}(0,C.writeVersionAndDescriptor)(e,"","null",p)},!0)),o&&((0,_.writeSignature)(e,"8BIM"),(0,_.writeSignature)(e,"mdyn"),(0,_.writeUint8)(e,0),(0,_.writeZeros)(e,3),(0,_.writeSection)(e,2,function(){(0,_.writeUint16)(e,0),(0,_.writeUint8)(e,o.propagateFrameOne?0:15),(0,_.writeUint8)(e,(o.unifyLayerPosition?1:0)|(o.unifyLayerStyle?2:0)|(o.unifyLayerVisibility?4:0))})),l&&((0,_.writeSignature)(e,"8BIM"),(0,_.writeSignature)(e,"tmln"),(0,_.writeUint8)(e,0),(0,_.writeZeros)(e,3),(0,_.writeSection)(e,2,function(){var c={Vrsn:1,timeScope:{Vrsn:1,Strt:l.start,duration:l.duration,inTime:l.inTime,outTime:l.outTime},autoScope:l.autoScope,audioLevel:l.audioLevel};l.tracks&&(c.trackList=(0,C.serializeTrackList)(l.tracks));var p=r.layerToId.get(t)||t.id;if(!p)throw new Error("You need to provide layer.id value whan writing document with animations");c.LyrI=p,(0,C.writeVersionAndDescriptor)(e,"","null",c,"anim")},!0)),a!==void 0&&((0,_.writeSignature)(e,"8BIM"),(0,_.writeSignature)(e,"cust"),(0,_.writeUint8)(e,0),(0,_.writeZeros)(e,3),(0,_.writeSection)(e,2,function(){var c={layerTime:a};(0,C.writeVersionAndDescriptor)(e,"","metadata",c)},!0)),s&&((0,_.writeSignature)(e,"8BIM"),(0,_.writeSignature)(e,"cmls"),(0,_.writeUint8)(e,0),(0,_.writeZeros)(e,3),(0,_.writeSection)(e,2,function(){var c=r.layerToId.get(t)||t.id;if(!c)throw new Error("You need to provide layer.id value whan writing document with layer comps");var p={};s.originalEffectsReferencePoint&&(p.origFXRefPoint={Hrzn:s.originalEffectsReferencePoint.x,Vrtc:s.originalEffectsReferencePoint.y}),p.LyrI=c,p.layerSettings=[];for(var d=0,g=s.settings;d<g.length;d++){var y=g[d],v={};y.enabled!==void 0&&(v.enab=y.enabled),y.offset&&(v.Ofst={Hrzn:y.offset.x,Vrtc:y.offset.y}),y.effectsReferencePoint&&(v.FXRefPoint={Hrzn:y.effectsReferencePoint.x,Vrtc:y.effectsReferencePoint.y}),v.compList=y.compList,p.layerSettings.push(v)}(0,C.writeVersionAndDescriptor)(e,"","null",p)},!0))});Y("vstk",Le("vectorStroke"),function(e,t,n){var r=(0,C.readVersionAndDescriptor)(e);t.vectorStroke={strokeEnabled:r.strokeEnabled,fillEnabled:r.fillEnabled,lineWidth:(0,C.parseUnits)(r.strokeStyleLineWidth),lineDashOffset:(0,C.parseUnits)(r.strokeStyleLineDashOffset),miterLimit:r.strokeStyleMiterLimit,lineCapType:C.strokeStyleLineCapType.decode(r.strokeStyleLineCapType),lineJoinType:C.strokeStyleLineJoinType.decode(r.strokeStyleLineJoinType),lineAlignment:C.strokeStyleLineAlignment.decode(r.strokeStyleLineAlignment),scaleLock:r.strokeStyleScaleLock,strokeAdjust:r.strokeStyleStrokeAdjust,lineDashSet:r.strokeStyleLineDashSet.map(C.parseUnits),blendMode:C.BlnM.decode(r.strokeStyleBlendMode),opacity:(0,C.parsePercent)(r.strokeStyleOpacity),content:(0,C.parseVectorContent)(r.strokeStyleContent),resolution:r.strokeStyleResolution},(0,x.skipBytes)(e,n())},function(e,t){var n,r,i,o=t.vectorStroke,a={strokeStyleVersion:2,strokeEnabled:!!o.strokeEnabled,fillEnabled:!!o.fillEnabled,strokeStyleLineWidth:o.lineWidth||{value:3,units:"Points"},strokeStyleLineDashOffset:o.lineDashOffset||{value:0,units:"Points"},strokeStyleMiterLimit:(n=o.miterLimit)!==null&&n!==void 0?n:100,strokeStyleLineCapType:C.strokeStyleLineCapType.encode(o.lineCapType),strokeStyleLineJoinType:C.strokeStyleLineJoinType.encode(o.lineJoinType),strokeStyleLineAlignment:C.strokeStyleLineAlignment.encode(o.lineAlignment),strokeStyleScaleLock:!!o.scaleLock,strokeStyleStrokeAdjust:!!o.strokeAdjust,strokeStyleLineDashSet:o.lineDashSet||[],strokeStyleBlendMode:C.BlnM.encode(o.blendMode),strokeStyleOpacity:(0,C.unitsPercent)((r=o.opacity)!==null&&r!==void 0?r:1),strokeStyleContent:(0,C.serializeVectorContent)(o.content||{type:"color",color:{r:0,g:0,b:0}}).descriptor,strokeStyleResolution:(i=o.resolution)!==null&&i!==void 0?i:72};(0,C.writeVersionAndDescriptor)(e,"","strokeStyle",a)});Y("artb",Le("artboard"),function(e,t,n){var r=(0,C.readVersionAndDescriptor)(e),i=r.artboardRect;t.artboard={rect:{top:i["Top "],left:i.Left,bottom:i.Btom,right:i.Rght},guideIndices:r.guideIndeces,presetName:r.artboardPresetName,color:(0,C.parseColor)(r["Clr "]),backgroundType:r.artboardBackgroundType},(0,x.skipBytes)(e,n())},function(e,t){var n,r=t.artboard,i=r.rect,o={artboardRect:{"Top ":i.top,Left:i.left,Btom:i.bottom,Rght:i.right},guideIndeces:r.guideIndices||[],artboardPresetName:r.presetName||"","Clr ":(0,C.serializeColor)(r.color),artboardBackgroundType:(n=r.backgroundType)!==null&&n!==void 0?n:1};(0,C.writeVersionAndDescriptor)(e,"","artboard",o)});Y("sn2P",Le("usingAlignedRendering"),function(e,t){return t.usingAlignedRendering=!!(0,x.readUint32)(e)},function(e,t){return(0,_.writeUint32)(e,t.usingAlignedRendering?1:0)});var jo=["unknown","vector","raster","image stack"];function tw(e){var t,n,r,i,o,a,l=E(E({style:C.warpStyle.decode(e.warpStyle)},e.warpValues?{values:e.warpValues}:{value:e.warpValue||0}),{perspective:e.warpPerspective||0,perspectiveOther:e.warpPerspectiveOther||0,rotate:C.Ornt.decode(e.warpRotate),bounds:e.bounds&&{top:(0,C.parseUnitsOrNumber)(e.bounds["Top "]),left:(0,C.parseUnitsOrNumber)(e.bounds.Left),bottom:(0,C.parseUnitsOrNumber)(e.bounds.Btom),right:(0,C.parseUnitsOrNumber)(e.bounds.Rght)},uOrder:e.uOrder,vOrder:e.vOrder});(e.deformNumRows!=null||e.deformNumCols!=null)&&(l.deformNumRows=e.deformNumRows,l.deformNumCols=e.deformNumCols);var s=e.customEnvelopeWarp;if(s){l.customEnvelopeWarp={meshPoints:[]};for(var u=((t=s.meshPoints.find(function(d){return d.type==="Hrzn"}))===null||t===void 0?void 0:t.values)||[],c=((n=s.meshPoints.find(function(d){return d.type==="Vrtc"}))===null||n===void 0?void 0:n.values)||[],p=0;p<u.length;p++)l.customEnvelopeWarp.meshPoints.push({x:u[p],y:c[p]});(s.quiltSliceX||s.quiltSliceY)&&(l.customEnvelopeWarp.quiltSliceX=((i=(r=s.quiltSliceX)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.values)||[],l.customEnvelopeWarp.quiltSliceY=((a=(o=s.quiltSliceY)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.values)||[])}return l}function yp(e){var t,n;return e.deformNumCols!=null||e.deformNumRows!=null||((t=e.customEnvelopeWarp)===null||t===void 0?void 0:t.quiltSliceX)||((n=e.customEnvelopeWarp)===null||n===void 0?void 0:n.quiltSliceY)}function zu(e){var t=e.bounds,n=E(E({warpStyle:C.warpStyle.encode(e.style)},e.values?{warpValues:e.values}:{warpValue:e.value||0}),{warpPerspective:e.perspective||0,warpPerspectiveOther:e.perspectiveOther||0,warpRotate:C.Ornt.encode(e.rotate),bounds:{"Top ":(0,C.unitsValue)(t&&t.top||{units:"Pixels",value:0},"bounds.top"),Left:(0,C.unitsValue)(t&&t.left||{units:"Pixels",value:0},"bounds.left"),Btom:(0,C.unitsValue)(t&&t.bottom||{units:"Pixels",value:0},"bounds.bottom"),Rght:(0,C.unitsValue)(t&&t.right||{units:"Pixels",value:0},"bounds.right")},uOrder:e.uOrder||0,vOrder:e.vOrder||0}),r=yp(e);if(r){var i=n;i.deformNumRows=e.deformNumRows||0,i.deformNumCols=e.deformNumCols||0}var o=e.customEnvelopeWarp;if(o){var a=o.meshPoints||[];if(r){var i=n;i.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",quiltSliceX:[{type:"quiltSliceX",values:o.quiltSliceX||[]}],quiltSliceY:[{type:"quiltSliceY",values:o.quiltSliceY||[]}],meshPoints:[{type:"Hrzn",values:a.map(function(s){return s.x})},{type:"Vrtc",values:a.map(function(s){return s.y})}]}}else n.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",meshPoints:[{type:"Hrzn",values:a.map(function(l){return l.x})},{type:"Vrtc",values:a.map(function(l){return l.y})}]}}return n}Y("PlLd",Le("placedLayer"),function(e,t,n){if((0,x.readSignature)(e)!=="plcL")throw new Error("Invalid PlLd signature");if((0,x.readInt32)(e)!==3)throw new Error("Invalid PlLd version");var r=(0,x.readPascalString)(e,1),i=(0,x.readInt32)(e),o=(0,x.readInt32)(e);(0,x.readInt32)(e);var a=(0,x.readInt32)(e);if(!jo[a])throw new Error("Invalid PlLd type");for(var l=[],s=0;s<8;s++)l.push((0,x.readFloat64)(e));var u=(0,x.readInt32)(e);if(u!==0)throw new Error("Invalid Warp version ".concat(u));var c=(0,C.readVersionAndDescriptor)(e);t.placedLayer=t.placedLayer||{id:r,type:jo[a],pageNumber:i,totalPages:o,transform:l,warp:tw(c)},(0,x.skipBytes)(e,n())},function(e,t){var n=t.placedLayer;if((0,_.writeSignature)(e,"plcL"),(0,_.writeInt32)(e,3),!n.id||typeof n.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(n.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if((0,_.writePascalString)(e,n.id,1),(0,_.writeInt32)(e,1),(0,_.writeInt32)(e,1),(0,_.writeInt32)(e,16),jo.indexOf(n.type)===-1)throw new Error("Invalid placedLayer type");(0,_.writeInt32)(e,jo.indexOf(n.type));for(var r=0;r<8;r++)(0,_.writeFloat64)(e,n.transform[r]);(0,_.writeInt32)(e,0);var i=nw(n),o=yp(i),a=o?"quiltWarp":"warp";(0,C.writeVersionAndDescriptor)(e,"",a,zu(i),a)});function MC(e){return new Float32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}function RC(e){return new Uint32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}function hp(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function Bu(e){for(var t=[],n=0;n<e.length;n+=2)t.push({x:e[n],y:e[n+1]});return t}function yl(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].x,e[n].y);return t}function Y2(e){return Bu(MC(e))}function wl(e){return{x:(0,C.parseUnits)(e.Hrzn),y:(0,C.parseUnits)(e.Vrtc)}}function Sl(e){return{_name:"",_classID:"Pnt ",Hrzn:(0,C.unitsValue)(e.x,"x"),Vrtc:(0,C.unitsValue)(e.y,"y")}}function OC(e,t){var n={name:e["Nm  "],opacity:(0,C.parsePercent)(e.blendOptions.Opct),blendMode:C.BlnM.decode(e.blendOptions["Md  "]),enabled:e.enab,hasOptions:e.hasoptions,foregroundColor:(0,C.parseColor)(e.FrgC),backgroundColor:(0,C.parseColor)(e.BckC)};if("Fltr"in e)switch(e.Fltr._classID){case"boxblur":return E(E({},n),{type:"box blur",filter:{radius:(0,C.parseUnits)(e.Fltr["Rds "])}});case"GsnB":return E(E({},n),{type:"gaussian blur",filter:{radius:(0,C.parseUnits)(e.Fltr["Rds "])}});case"MtnB":return E(E({},n),{type:"motion blur",filter:{angle:e.Fltr.Angl,distance:(0,C.parseUnits)(e.Fltr.Dstn)}});case"RdlB":return E(E({},n),{type:"radial blur",filter:{amount:e.Fltr.Amnt,method:C.BlrM.decode(e.Fltr.BlrM),quality:C.BlrQ.decode(e.Fltr.BlrQ)}});case"shapeBlur":return E(E({},n),{type:"shape blur",filter:{radius:(0,C.parseUnits)(e.Fltr["Rds "]),customShape:{name:e.Fltr.customShape["Nm  "],id:e.Fltr.customShape.Idnt}}});case"SmrB":return E(E({},n),{type:"smart blur",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh,quality:C.SmBQ.decode(e.Fltr.SmBQ),mode:C.SmBM.decode(e.Fltr.SmBM)}});case"surfaceBlur":return E(E({},n),{type:"surface blur",filter:{radius:(0,C.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dspl":return E(E({},n),{type:"displace",filter:{horizontalScale:e.Fltr.HrzS,verticalScale:e.Fltr.VrtS,displacementMap:C.DspM.decode(e.Fltr.DspM),undefinedAreas:C.UndA.decode(e.Fltr.UndA),displacementFile:{signature:e.Fltr.DspF.sig,path:e.Fltr.DspF.path}}});case"Pnch":return E(E({},n),{type:"pinch",filter:{amount:e.Fltr.Amnt}});case"Plr ":return E(E({},n),{type:"polar coordinates",filter:{conversion:C.Cnvr.decode(e.Fltr.Cnvr)}});case"Rple":return E(E({},n),{type:"ripple",filter:{amount:e.Fltr.Amnt,size:C.RplS.decode(e.Fltr.RplS)}});case"Shr ":return E(E({},n),{type:"shear",filter:{shearPoints:e.Fltr.ShrP.map(function(l){return{x:l.Hrzn,y:l.Vrtc}}),shearStart:e.Fltr.ShrS,shearEnd:e.Fltr.ShrE,undefinedAreas:C.UndA.decode(e.Fltr.UndA)}});case"Sphr":return E(E({},n),{type:"spherize",filter:{amount:e.Fltr.Amnt,mode:C.SphM.decode(e.Fltr.SphM)}});case"Twrl":return E(E({},n),{type:"twirl",filter:{angle:e.Fltr.Angl}});case"Wave":return E(E({},n),{type:"wave",filter:{numberOfGenerators:e.Fltr.NmbG,type:C.Wvtp.decode(e.Fltr.Wvtp),wavelength:{min:e.Fltr.WLMn,max:e.Fltr.WLMx},amplitude:{min:e.Fltr.AmMn,max:e.Fltr.AmMx},scale:{x:e.Fltr.SclH,y:e.Fltr.SclV},randomSeed:e.Fltr.RndS,undefinedAreas:C.UndA.decode(e.Fltr.UndA)}});case"ZgZg":return E(E({},n),{type:"zigzag",filter:{amount:e.Fltr.Amnt,ridges:e.Fltr.NmbR,style:C.ZZTy.decode(e.Fltr.ZZTy)}});case"AdNs":return E(E({},n),{type:"add noise",filter:{amount:(0,C.parsePercent)(e.Fltr.Nose),distribution:C.Dstr.decode(e.Fltr.Dstr),monochromatic:e.Fltr.Mnch,randomSeed:e.Fltr.FlRs}});case"DstS":return E(E({},n),{type:"dust and scratches",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh}});case"Mdn ":return E(E({},n),{type:"median",filter:{radius:(0,C.parseUnits)(e.Fltr["Rds "])}});case"denoise":return E(E({},n),{type:"reduce noise",filter:{preset:e.Fltr.preset,removeJpegArtifact:e.Fltr.removeJPEGArtifact,reduceColorNoise:(0,C.parsePercent)(e.Fltr.ClNs),sharpenDetails:(0,C.parsePercent)(e.Fltr.Shrp),channelDenoise:e.Fltr.channelDenoise.map(function(l){return E({channels:l.Chnl.map(function(s){return C.Chnl.decode(s)}),amount:l.Amnt},l.EdgF?{preserveDetails:l.EdgF}:{})})}});case"ClrH":return E(E({},n),{type:"color halftone",filter:{radius:e.Fltr["Rds "],angle1:e.Fltr.Ang1,angle2:e.Fltr.Ang2,angle3:e.Fltr.Ang3,angle4:e.Fltr.Ang4}});case"Crst":return E(E({},n),{type:"crystallize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Mztn":return E(E({},n),{type:"mezzotint",filter:{type:C.MztT.decode(e.Fltr.MztT),randomSeed:e.Fltr.FlRs}});case"Msc ":return E(E({},n),{type:"mosaic",filter:{cellSize:(0,C.parseUnits)(e.Fltr.ClSz)}});case"Pntl":return E(E({},n),{type:"pointillize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Clds":return E(E({},n),{type:"clouds",filter:{randomSeed:e.Fltr.FlRs}});case"DfrC":return E(E({},n),{type:"difference clouds",filter:{randomSeed:e.Fltr.FlRs}});case"Fbrs":return E(E({},n),{type:"fibers",filter:{variance:e.Fltr.Vrnc,strength:e.Fltr.Strg,randomSeed:e.Fltr.RndS}});case"LnsF":return E(E({},n),{type:"lens flare",filter:{brightness:e.Fltr.Brgh,position:{x:e.Fltr.FlrC.Hrzn,y:e.Fltr.FlrC.Vrtc},lensType:C.Lns.decode(e.Fltr["Lns "])}});case"smartSharpen":return E(E({},n),{type:"smart sharpen",filter:{amount:(0,C.parsePercent)(e.Fltr.Amnt),radius:(0,C.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh,angle:e.Fltr.Angl,moreAccurate:e.Fltr.moreAccurate,blur:C.blurType.decode(e.Fltr.blur),preset:e.Fltr.preset,shadow:{fadeAmount:(0,C.parsePercent)(e.Fltr.sdwM.Amnt),tonalWidth:(0,C.parsePercent)(e.Fltr.sdwM.Wdth),radius:e.Fltr.sdwM["Rds "]},highlight:{fadeAmount:(0,C.parsePercent)(e.Fltr.hglM.Amnt),tonalWidth:(0,C.parsePercent)(e.Fltr.hglM.Wdth),radius:e.Fltr.hglM["Rds "]}}});case"UnsM":return E(E({},n),{type:"unsharp mask",filter:{amount:(0,C.parsePercent)(e.Fltr.Amnt),radius:(0,C.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dfs ":return E(E({},n),{type:"diffuse",filter:{mode:C.DfsM.decode(e.Fltr["Md  "]),randomSeed:e.Fltr.FlRs}});case"Embs":return E(E({},n),{type:"emboss",filter:{angle:e.Fltr.Angl,height:e.Fltr.Hght,amount:e.Fltr.Amnt}});case"Extr":return E(E({},n),{type:"extrude",filter:{type:C.ExtT.decode(e.Fltr.ExtT),size:e.Fltr.ExtS,depth:e.Fltr.ExtD,depthMode:C.ExtR.decode(e.Fltr.ExtR),randomSeed:e.Fltr.FlRs,solidFrontFaces:e.Fltr.ExtF,maskIncompleteBlocks:e.Fltr.ExtM}});case"Tls ":return E(E({},n),{type:"tiles",filter:{numberOfTiles:e.Fltr.TlNm,maximumOffset:e.Fltr.TlOf,fillEmptyAreaWith:C.FlCl.decode(e.Fltr.FlCl),randomSeed:e.Fltr.FlRs}});case"TrcC":return E(E({},n),{type:"trace contour",filter:{level:e.Fltr["Lvl "],edge:C.CntE.decode(e.Fltr["Edg "])}});case"Wnd ":return E(E({},n),{type:"wind",filter:{method:C.WndM.decode(e.Fltr.WndM),direction:C.Drct.decode(e.Fltr.Drct)}});case"Dntr":return E(E({},n),{type:"de-interlace",filter:{eliminate:C.IntE.decode(e.Fltr.IntE),newFieldsBy:C.IntC.decode(e.Fltr.IntC)}});case"Cstm":return E(E({},n),{type:"custom",filter:{scale:e.Fltr["Scl "],offset:e.Fltr.Ofst,matrix:e.Fltr.Mtrx}});case"HghP":return E(E({},n),{type:"high pass",filter:{radius:(0,C.parseUnits)(e.Fltr["Rds "])}});case"Mxm ":return E(E({},n),{type:"maximum",filter:{radius:(0,C.parseUnits)(e.Fltr["Rds "])}});case"Mnm ":return E(E({},n),{type:"minimum",filter:{radius:(0,C.parseUnits)(e.Fltr["Rds "])}});case"Ofst":return E(E({},n),{type:"offset",filter:{horizontal:e.Fltr.Hrzn,vertical:e.Fltr.Vrtc,undefinedAreas:C.FlMd.decode(e.Fltr["Fl  "])}});case"rigidTransform":return E(E({},n),{type:"puppet",filter:{rigidType:e.Fltr.rigidType,bounds:[{x:e.Fltr.PuX0,y:e.Fltr.PuY0},{x:e.Fltr.PuX1,y:e.Fltr.PuY1},{x:e.Fltr.PuX2,y:e.Fltr.PuY2},{x:e.Fltr.PuX3,y:e.Fltr.PuY3}],puppetShapeList:e.Fltr.puppetShapeList.map(function(l){return{rigidType:l.rigidType,originalVertexArray:Y2(l.originalVertexArray),deformedVertexArray:Y2(l.deformedVertexArray),indexArray:Array.from(RC(l.indexArray)),pinOffsets:Bu(l.pinOffsets),posFinalPins:Bu(l.posFinalPins),pinVertexIndices:l.pinVertexIndices,selectedPin:l.selectedPin,pinPosition:Bu(l.PinP),pinRotation:l.PnRt,pinOverlay:l.PnOv,pinDepth:l.PnDp,meshQuality:l.meshQuality,meshExpansion:l.meshExpansion,meshRigidity:l.meshRigidity,imageResolution:l.imageResolution,meshBoundaryPath:{pathComponents:l.meshBoundaryPath.pathComponents.map(function(s){return{shapeOperation:s.shapeOperation.split(".")[1],paths:s.SbpL.map(function(u){return{closed:u.Clsp,points:u["Pts "].map(function(c){return{anchor:wl(c.Anch),forward:wl(c["Fwd "]),backward:wl(c["Bwd "]),smooth:c.Smoo}})}})}})}}})}});case"PbPl":{for(var r=[],i=e.Fltr,o=0;o<rn.length&&i["PN".concat(rn[o],"a")];o++)for(var a=0;a<rn.length&&i["PN".concat(rn[o]).concat(rn[a])];a++)r.push({name:i["PN".concat(rn[o]).concat(rn[a])],value:i["PF".concat(rn[o]).concat(rn[a])]});return E(E({},n),{type:"oil paint plugin",filter:{name:e.Fltr.KnNm,gpu:e.Fltr.GpuY,lighting:e.Fltr.LIWy,parameters:r}})}case"HsbP":return E(E({},n),{type:"hsb/hsl",filter:{inputMode:C.ClrS.decode(e.Fltr.Inpt),rowOrder:C.ClrS.decode(e.Fltr.Otpt)}});case"oilPaint":return E(E({},n),{type:"oil paint",filter:{lightingOn:e.Fltr.lightingOn,stylization:e.Fltr.stylization,cleanliness:e.Fltr.cleanliness,brushScale:e.Fltr.brushScale,microBrush:e.Fltr.microBrush,lightDirection:e.Fltr.LghD,specularity:e.Fltr.specularity}});case"LqFy":return E(E({},n),{type:"liquify",filter:{liquifyMesh:e.Fltr.LqMe}});case"perspectiveWarpTransform":return E(E({},n),{type:"perspective warp",filter:{vertices:e.Fltr.vertices.map(wl),warpedVertices:e.Fltr.warpedVertices.map(wl),quads:e.Fltr.quads.map(function(l){return l.indices})}});case"Crvs":return E(E({},n),{type:"curves",filter:{presetKind:C.presetKindType.decode(e.Fltr.presetKind),adjustments:e.Fltr.Adjs.map(function(l){var s=l.Chnl.map(function(u){return C.Chnl.decode(u)});if(l["Crv "])return{channels:s,curve:l["Crv "].map(function(u){var c={x:u.Hrzn,y:u.Vrtc};return u.Cnty&&(c.curved=!0),c})};if(l.Mpng)return{channels:s,values:l.Mpng};throw new Error("Unknown curve adjustment")})}});default:if(t.throwForMissingFeatures)throw new Error("Unknown filter classId: ".concat(e.Fltr._classID));return}else switch(e.filterID){case 1098281575:return E(E({},n),{type:"average"});case 1114403360:return E(E({},n),{type:"blur"});case 1114403405:return E(E({},n),{type:"blur more"});case 1148416099:return E(E({},n),{type:"despeckle"});case 1180922912:return E(E({},n),{type:"facet"});case 1181902701:return E(E({},n),{type:"fragment"});case 1399353968:return E(E({},n),{type:"sharpen"});case 1399353925:return E(E({},n),{type:"sharpen edges"});case 1399353933:return E(E({},n),{type:"sharpen more"});case 1181639749:return E(E({},n),{type:"find edges"});case 1399616122:return E(E({},n),{type:"solarize"});case 1314149187:return E(E({},n),{type:"ntsc colors"});default:if(t.throwForMissingFeatures)throw new Error("Unknown filterID: ".concat(e.filterID))}}function FC(e,t){return{enabled:e.enab,validAtPosition:e.validAtPosition,maskEnabled:e.filterMaskEnable,maskLinked:e.filterMaskLinked,maskExtendWithWhite:e.filterMaskExtendWithWhite,list:e.filterFXList.map(function(n){return OC(n,t)}).filter(function(n){return!!n})}}function Jn(e){return(0,C.unitsValue)(e.radius,"radius")}function NC(e){var t={_name:"",_classID:"filterFX","Nm  ":e.name,blendOptions:{_name:"",_classID:"blendOptions",Opct:(0,C.unitsPercentF)(e.opacity),"Md  ":C.BlnM.encode(e.blendMode)},enab:e.enabled,hasoptions:e.hasOptions,FrgC:(0,C.serializeColor)(e.foregroundColor),BckC:(0,C.serializeColor)(e.backgroundColor)};switch(e.type){case"average":return E(E({},t),{filterID:1098281575});case"blur":return E(E({},t),{filterID:1114403360});case"blur more":return E(E({},t),{filterID:1114403405});case"box blur":return E(E({},t),{Fltr:{_name:"Box Blur",_classID:"boxblur","Rds ":Jn(e.filter)},filterID:697});case"gaussian blur":return E(E({},t),{Fltr:{_name:"Gaussian Blur",_classID:"GsnB","Rds ":Jn(e.filter)},filterID:1198747202});case"motion blur":return E(E({},t),{Fltr:{_name:"Motion Blur",_classID:"MtnB",Angl:e.filter.angle,Dstn:(0,C.unitsValue)(e.filter.distance,"distance")},filterID:1299476034});case"radial blur":return E(E({},t),{Fltr:{_name:"Radial Blur",_classID:"RdlB",Amnt:e.filter.amount,BlrM:C.BlrM.encode(e.filter.method),BlrQ:C.BlrQ.encode(e.filter.quality)},filterID:1382313026});case"shape blur":return E(E({},t),{Fltr:{_name:"Shape Blur",_classID:"shapeBlur","Rds ":Jn(e.filter),customShape:{_name:"",_classID:"customShape","Nm  ":e.filter.customShape.name,Idnt:e.filter.customShape.id}},filterID:702});case"smart blur":return E(E({},t),{Fltr:{_name:"Smart Blur",_classID:"SmrB","Rds ":e.filter.radius,Thsh:e.filter.threshold,SmBQ:C.SmBQ.encode(e.filter.quality),SmBM:C.SmBM.encode(e.filter.mode)},filterID:1399681602});case"surface blur":return E(E({},t),{Fltr:{_name:"Surface Blur",_classID:"surfaceBlur","Rds ":Jn(e.filter),Thsh:e.filter.threshold},filterID:701});case"displace":return E(E({},t),{Fltr:{_name:"Displace",_classID:"Dspl",HrzS:e.filter.horizontalScale,VrtS:e.filter.verticalScale,DspM:C.DspM.encode(e.filter.displacementMap),UndA:C.UndA.encode(e.filter.undefinedAreas),DspF:{sig:e.filter.displacementFile.signature,path:e.filter.displacementFile.path}},filterID:1148416108});case"pinch":return E(E({},t),{Fltr:{_name:"Pinch",_classID:"Pnch",Amnt:e.filter.amount},filterID:1349411688});case"polar coordinates":return E(E({},t),{Fltr:{_name:"Polar Coordinates",_classID:"Plr ",Cnvr:C.Cnvr.encode(e.filter.conversion)},filterID:1349284384});case"ripple":return E(E({},t),{Fltr:{_name:"Ripple",_classID:"Rple",Amnt:e.filter.amount,RplS:C.RplS.encode(e.filter.size)},filterID:1383099493});case"shear":return E(E({},t),{Fltr:{_name:"Shear",_classID:"Shr ",ShrP:e.filter.shearPoints.map(function(s){return{_name:"",_classID:"Pnt ",Hrzn:s.x,Vrtc:s.y}}),UndA:C.UndA.encode(e.filter.undefinedAreas),ShrS:e.filter.shearStart,ShrE:e.filter.shearEnd},filterID:1399353888});case"spherize":return E(E({},t),{Fltr:{_name:"Spherize",_classID:"Sphr",Amnt:e.filter.amount,SphM:C.SphM.encode(e.filter.mode)},filterID:1399875698});case"twirl":return E(E({},t),{Fltr:{_name:"Twirl",_classID:"Twrl",Angl:e.filter.angle},filterID:1417114220});case"wave":return E(E({},t),{Fltr:{_name:"Wave",_classID:"Wave",Wvtp:C.Wvtp.encode(e.filter.type),NmbG:e.filter.numberOfGenerators,WLMn:e.filter.wavelength.min,WLMx:e.filter.wavelength.max,AmMn:e.filter.amplitude.min,AmMx:e.filter.amplitude.max,SclH:e.filter.scale.x,SclV:e.filter.scale.y,UndA:C.UndA.encode(e.filter.undefinedAreas),RndS:e.filter.randomSeed},filterID:1466005093});case"zigzag":return E(E({},t),{Fltr:{_name:"ZigZag",_classID:"ZgZg",Amnt:e.filter.amount,NmbR:e.filter.ridges,ZZTy:C.ZZTy.encode(e.filter.style)},filterID:1516722791});case"add noise":return E(E({},t),{Fltr:{_name:"Add Noise",_classID:"AdNs",Dstr:C.Dstr.encode(e.filter.distribution),Nose:(0,C.unitsPercentF)(e.filter.amount),Mnch:e.filter.monochromatic,FlRs:e.filter.randomSeed},filterID:1097092723});case"despeckle":return E(E({},t),{filterID:1148416099});case"dust and scratches":return E(E({},t),{Fltr:{_name:"Dust & Scratches",_classID:"DstS","Rds ":e.filter.radius,Thsh:e.filter.threshold},filterID:1148417107});case"median":return E(E({},t),{Fltr:{_name:"Median",_classID:"Mdn ","Rds ":Jn(e.filter)},filterID:1298427424});case"reduce noise":return E(E({},t),{Fltr:{_name:"Reduce Noise",_classID:"denoise",ClNs:(0,C.unitsPercentF)(e.filter.reduceColorNoise),Shrp:(0,C.unitsPercentF)(e.filter.sharpenDetails),removeJPEGArtifact:e.filter.removeJpegArtifact,channelDenoise:e.filter.channelDenoise.map(function(s){return E({_name:"",_classID:"channelDenoiseParams",Chnl:s.channels.map(function(u){return C.Chnl.encode(u)}),Amnt:s.amount},s.preserveDetails?{EdgF:s.preserveDetails}:{})}),preset:e.filter.preset},filterID:633});case"color halftone":return E(E({},t),{Fltr:{_name:"Color Halftone",_classID:"ClrH","Rds ":e.filter.radius,Ang1:e.filter.angle1,Ang2:e.filter.angle2,Ang3:e.filter.angle3,Ang4:e.filter.angle4},filterID:1131180616});case"crystallize":return E(E({},t),{Fltr:{_name:"Crystallize",_classID:"Crst",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1131574132});case"facet":return E(E({},t),{filterID:1180922912});case"fragment":return E(E({},t),{filterID:1181902701});case"mezzotint":return E(E({},t),{Fltr:{_name:"Mezzotint",_classID:"Mztn",MztT:C.MztT.encode(e.filter.type),FlRs:e.filter.randomSeed},filterID:1299870830});case"mosaic":return E(E({},t),{Fltr:{_name:"Mosaic",_classID:"Msc ",ClSz:(0,C.unitsValue)(e.filter.cellSize,"cellSize")},filterID:1299407648});case"pointillize":return E(E({},t),{Fltr:{_name:"Pointillize",_classID:"Pntl",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1349416044});case"clouds":return E(E({},t),{Fltr:{_name:"Clouds",_classID:"Clds",FlRs:e.filter.randomSeed},filterID:1131177075});case"difference clouds":return E(E({},t),{Fltr:{_name:"Difference Clouds",_classID:"DfrC",FlRs:e.filter.randomSeed},filterID:1147564611});case"fibers":return E(E({},t),{Fltr:{_name:"Fibers",_classID:"Fbrs",Vrnc:e.filter.variance,Strg:e.filter.strength,RndS:e.filter.randomSeed},filterID:1180856947});case"lens flare":return E(E({},t),{Fltr:{_name:"Lens Flare",_classID:"LnsF",Brgh:e.filter.brightness,FlrC:{_name:"",_classID:"Pnt ",Hrzn:e.filter.position.x,Vrtc:e.filter.position.y},"Lns ":C.Lns.encode(e.filter.lensType)},filterID:1282306886});case"sharpen":return E(E({},t),{filterID:1399353968});case"sharpen edges":return E(E({},t),{filterID:1399353925});case"sharpen more":return E(E({},t),{filterID:1399353933});case"smart sharpen":return E(E({},t),{Fltr:{_name:"Smart Sharpen",_classID:"smartSharpen",Amnt:(0,C.unitsPercentF)(e.filter.amount),"Rds ":Jn(e.filter),Thsh:e.filter.threshold,Angl:e.filter.angle,moreAccurate:e.filter.moreAccurate,blur:C.blurType.encode(e.filter.blur),preset:e.filter.preset,sdwM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:(0,C.unitsPercentF)(e.filter.shadow.fadeAmount),Wdth:(0,C.unitsPercentF)(e.filter.shadow.tonalWidth),"Rds ":e.filter.shadow.radius},hglM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:(0,C.unitsPercentF)(e.filter.highlight.fadeAmount),Wdth:(0,C.unitsPercentF)(e.filter.highlight.tonalWidth),"Rds ":e.filter.highlight.radius}},filterID:698});case"unsharp mask":return E(E({},t),{Fltr:{_name:"Unsharp Mask",_classID:"UnsM",Amnt:(0,C.unitsPercentF)(e.filter.amount),"Rds ":Jn(e.filter),Thsh:e.filter.threshold},filterID:1433301837});case"diffuse":return E(E({},t),{Fltr:{_name:"Diffuse",_classID:"Dfs ","Md  ":C.DfsM.encode(e.filter.mode),FlRs:e.filter.randomSeed},filterID:1147564832});case"emboss":return E(E({},t),{Fltr:{_name:"Emboss",_classID:"Embs",Angl:e.filter.angle,Hght:e.filter.height,Amnt:e.filter.amount},filterID:1164796531});case"extrude":return E(E({},t),{Fltr:{_name:"Extrude",_classID:"Extr",ExtS:e.filter.size,ExtD:e.filter.depth,ExtF:e.filter.solidFrontFaces,ExtM:e.filter.maskIncompleteBlocks,ExtT:C.ExtT.encode(e.filter.type),ExtR:C.ExtR.encode(e.filter.depthMode),FlRs:e.filter.randomSeed},filterID:1165522034});case"find edges":return E(E({},t),{filterID:1181639749});case"solarize":return E(E({},t),{filterID:1399616122});case"tiles":return E(E({},t),{Fltr:{_name:"Tiles",_classID:"Tls ",TlNm:e.filter.numberOfTiles,TlOf:e.filter.maximumOffset,FlCl:C.FlCl.encode(e.filter.fillEmptyAreaWith),FlRs:e.filter.randomSeed},filterID:1416393504});case"trace contour":return E(E({},t),{Fltr:{_name:"Trace Contour",_classID:"TrcC","Lvl ":e.filter.level,"Edg ":C.CntE.encode(e.filter.edge)},filterID:1416782659});case"wind":return E(E({},t),{Fltr:{_name:"Wind",_classID:"Wnd ",WndM:C.WndM.encode(e.filter.method),Drct:C.Drct.encode(e.filter.direction)},filterID:1466852384});case"de-interlace":return E(E({},t),{Fltr:{_name:"De-Interlace",_classID:"Dntr",IntE:C.IntE.encode(e.filter.eliminate),IntC:C.IntC.encode(e.filter.newFieldsBy)},filterID:1148089458});case"ntsc colors":return E(E({},t),{filterID:1314149187});case"custom":return E(E({},t),{Fltr:{_name:"Custom",_classID:"Cstm","Scl ":e.filter.scale,Ofst:e.filter.offset,Mtrx:e.filter.matrix},filterID:1131639917});case"high pass":return E(E({},t),{Fltr:{_name:"High Pass",_classID:"HghP","Rds ":Jn(e.filter)},filterID:1214736464});case"maximum":return E(E({},t),{Fltr:{_name:"Maximum",_classID:"Mxm ","Rds ":Jn(e.filter)},filterID:1299737888});case"minimum":return E(E({},t),{Fltr:{_name:"Minimum",_classID:"Mnm ","Rds ":Jn(e.filter)},filterID:1299082528});case"offset":return E(E({},t),{Fltr:{_name:"Offset",_classID:"Ofst",Hrzn:e.filter.horizontal,Vrtc:e.filter.vertical,"Fl  ":C.FlMd.encode(e.filter.undefinedAreas)},filterID:1332114292});case"puppet":return E(E({},t),{Fltr:{_name:"Rigid Transform",_classID:"rigidTransform",null:["Ordn.Trgt"],rigidType:e.filter.rigidType,puppetShapeList:e.filter.puppetShapeList.map(function(s){return{_name:"",_classID:"puppetShape",rigidType:s.rigidType,VrsM:1,VrsN:0,originalVertexArray:hp(new Float32Array(yl(s.originalVertexArray))),deformedVertexArray:hp(new Float32Array(yl(s.deformedVertexArray))),indexArray:hp(new Uint32Array(s.indexArray)),pinOffsets:yl(s.pinOffsets),posFinalPins:yl(s.posFinalPins),pinVertexIndices:s.pinVertexIndices,PinP:yl(s.pinPosition),PnRt:s.pinRotation,PnOv:s.pinOverlay,PnDp:s.pinDepth,meshQuality:s.meshQuality,meshExpansion:s.meshExpansion,meshRigidity:s.meshRigidity,imageResolution:s.imageResolution,meshBoundaryPath:{_name:"",_classID:"pathClass",pathComponents:s.meshBoundaryPath.pathComponents.map(function(u){return{_name:"",_classID:"PaCm",shapeOperation:"shapeOperation.".concat(u.shapeOperation),SbpL:u.paths.map(function(c){return{_name:"",_classID:"Sbpl",Clsp:c.closed,"Pts ":c.points.map(function(p){return{_name:"",_classID:"Pthp",Anch:Sl(p.anchor),"Fwd ":Sl(p.forward),"Bwd ":Sl(p.backward),Smoo:p.smooth}})}})}})},selectedPin:s.selectedPin}}),PuX0:e.filter.bounds[0].x,PuX1:e.filter.bounds[1].x,PuX2:e.filter.bounds[2].x,PuX3:e.filter.bounds[3].x,PuY0:e.filter.bounds[0].y,PuY1:e.filter.bounds[1].y,PuY2:e.filter.bounds[2].y,PuY3:e.filter.bounds[3].y},filterID:991});case"oil paint plugin":{for(var n={},r=0;r<e.filter.parameters.length;r++){var i=e.filter.parameters[r],o=i.name,a=i.value,l="".concat(rn[Math.floor(r/rn.length)]).concat(rn[r%rn.length]);n["PN".concat(l)]=o,n["PT".concat(l)]=0,n["PF".concat(l)]=a}return E(E({},t),{Fltr:E({_name:"Oil Paint Plugin",_classID:"PbPl",KnNm:e.filter.name,GpuY:e.filter.gpu,LIWy:e.filter.lighting,FPth:"1"},n),filterID:1348620396})}case"oil paint":return E(E({},t),{Fltr:{_name:"Oil Paint",_classID:"oilPaint",lightingOn:e.filter.lightingOn,stylization:e.filter.stylization,cleanliness:e.filter.cleanliness,brushScale:e.filter.brushScale,microBrush:e.filter.microBrush,LghD:e.filter.lightDirection,specularity:e.filter.specularity},filterID:1122});case"liquify":return E(E({},t),{Fltr:{_name:"Liquify",_classID:"LqFy",LqMe:e.filter.liquifyMesh},filterID:1282492025});case"perspective warp":return E(E({},t),{Fltr:{_name:"Perspective Warp",_classID:"perspectiveWarpTransform",vertices:e.filter.vertices.map(Sl),warpedVertices:e.filter.warpedVertices.map(Sl),quads:e.filter.quads.map(function(s){return{indices:s}})},filterID:442});case"curves":return E(E({},t),{Fltr:{_name:"Curves",_classID:"Crvs",presetKind:C.presetKindType.encode(e.filter.presetKind),Adjs:e.filter.adjustments.map(function(s){return"curve"in s?{_name:"",_classID:"CrvA",Chnl:s.channels.map(function(u){return C.Chnl.encode(u)}),"Crv ":s.curve.map(function(u){return E({_name:"",_classID:"Pnt ",Hrzn:u.x,Vrtc:u.y},u.curved?{Cnty:!0}:{})})}:{_name:"",_classID:"CrvA",Chnl:s.channels.map(function(u){return C.Chnl.encode(u)}),Mpng:s.values}})},filterID:1131574899});default:throw new Error("Unknow filter type: ".concat(e.type))}}function nw(e){if(e.warp)return e.warp;if(!e.width||!e.height)throw new Error("You must provide width and height of the linked image in placedLayer");var t=e.width,n=e.height,r=0,i=t/3,o=t*2/3,a=t,l=0,s=n/3,u=n*2/3,c=n;return{style:"custom",value:0,perspective:0,perspectiveOther:0,rotate:"horizontal",bounds:{top:{value:0,units:"Pixels"},left:{value:0,units:"Pixels"},bottom:{value:n,units:"Pixels"},right:{value:t,units:"Pixels"}},uOrder:4,vOrder:4,customEnvelopeWarp:{meshPoints:[{x:r,y:l},{x:i,y:l},{x:o,y:l},{x:a,y:l},{x:r,y:s},{x:i,y:s},{x:o,y:s},{x:a,y:s},{x:r,y:u},{x:i,y:u},{x:o,y:u},{x:a,y:u},{x:r,y:c},{x:i,y:c},{x:o,y:c},{x:a,y:c}]}}}Y("SoLd",Le("placedLayer"),function(e,t,n){if((0,x.readSignature)(e)!=="soLD")throw new Error("Invalid SoLd type");var r=(0,x.readInt32)(e);if(r!==4&&r!==5)throw new Error("Invalid SoLd version");var i=(0,C.readVersionAndDescriptor)(e,!0);t.placedLayer={id:i.Idnt,placed:i.placed,type:jo[i.Type],pageNumber:i.PgNm,totalPages:i.totalPages,frameStep:(0,C.frac)(i.frameStep),duration:(0,C.frac)(i.duration),frameCount:i.frameCount,transform:i.Trnf,width:i["Sz  "].Wdth,height:i["Sz  "].Hght,resolution:(0,C.parseUnits)(i.Rslt),warp:tw(i.quiltWarp||i.warp)},i.nonAffineTransform&&i.nonAffineTransform.some(function(o,a){return o!==i.Trnf[a]})&&(t.placedLayer.nonAffineTransform=i.nonAffineTransform),i.Crop&&(t.placedLayer.crop=i.Crop),i.comp&&(t.placedLayer.comp=i.comp),i.compInfo&&(t.placedLayer.compInfo={compID:i.compInfo.compID,originalCompID:i.compInfo.originalCompID}),i.filterFX&&(t.placedLayer.filter=FC(i.filterFX,e)),(0,x.skipBytes)(e,n())},function(e,t){var n,r;(0,_.writeSignature)(e,"soLD"),(0,_.writeInt32)(e,4);var i=t.placedLayer;if(!i.id||typeof i.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(i.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");var o=E(E({Idnt:i.id,placed:(n=i.placed)!==null&&n!==void 0?n:i.id,PgNm:i.pageNumber||1,totalPages:i.totalPages||1},i.crop?{Crop:i.crop}:{}),{frameStep:i.frameStep||{numerator:0,denominator:600},duration:i.duration||{numerator:0,denominator:600},frameCount:i.frameCount||0,Annt:16,Type:jo.indexOf(i.type),Trnf:i.transform,nonAffineTransform:(r=i.nonAffineTransform)!==null&&r!==void 0?r:i.transform,warp:zu(nw(i)),"Sz  ":{_name:"",_classID:"Pnt ",Wdth:i.width||0,Hght:i.height||0},Rslt:i.resolution?(0,C.unitsValue)(i.resolution,"resolution"):{units:"Density",value:72}});if(i.filter&&(o.filterFX={_name:"",_classID:"filterFXStyle",enab:i.filter.enabled,validAtPosition:i.filter.validAtPosition,filterMaskEnable:i.filter.maskEnabled,filterMaskLinked:i.filter.maskLinked,filterMaskExtendWithWhite:i.filter.maskExtendWithWhite,filterFXList:i.filter.list.map(function(l){return NC(l)})}),i.warp&&yp(i.warp)){var a=zu(i.warp);o.quiltWarp=a,o.warp={warpStyle:"warpStyle.warpNone",warpValue:a.warpValue,warpPerspective:a.warpPerspective,warpPerspectiveOther:a.warpPerspectiveOther,warpRotate:a.warpRotate,bounds:a.bounds,uOrder:a.uOrder,vOrder:a.vOrder}}else delete o.quiltWarp;i.comp&&(o.comp=i.comp),i.compInfo&&(o.compInfo=i.compInfo),(0,C.writeVersionAndDescriptor)(e,"","null",o,o.quiltWarp?"quiltWarp":"warp")});$o("SoLE","SoLd");Y("fxrp",Le("referencePoint"),function(e,t){t.referencePoint={x:(0,x.readFloat64)(e),y:(0,x.readFloat64)(e)}},function(e,t){(0,_.writeFloat64)(e,t.referencePoint.x),(0,_.writeFloat64)(e,t.referencePoint.y)});Y("Lr16",function(){return!1},function(e,t,n,r,i){(0,x.readLayerInfo)(e,r,i)},function(e,t){});Y("Lr32",function(){return!1},function(e,t,n,r,i){(0,x.readLayerInfo)(e,r,i)},function(e,t){});Y("LMsk",Le("userMask"),function(e,t){t.userMask={colorSpace:(0,x.readColor)(e),opacity:(0,x.readUint16)(e)/255};var n=(0,x.readUint8)(e);if(n!==128)throw new Error("Invalid flag value");(0,x.skipBytes)(e,1)},function(e,t){var n=t.userMask;(0,_.writeColor)(e,n.colorSpace),(0,_.writeUint16)(e,(0,on.clamp)(n.opacity,0,1)*255),(0,_.writeUint8)(e,128),(0,_.writeZeros)(e,1)});on.MOCK_HANDLERS?Y("Patt",function(e){return e._Patt!==void 0},function(e,t,n){t._Patt=(0,x.readBytes)(e,n())},function(e,t){return!1}):Y("Patt",function(e){return!e},function(e,t,n){n()&&(0,x.skipBytes)(e,n())},function(e,t){});on.MOCK_HANDLERS&&Y("CAI ",function(e){return e._CAI_!==void 0},function(e,t,n){t._CAI_=(0,x.readBytes)(e,n())},function(e,t){(0,_.writeBytes)(e,t._CAI_)});on.MOCK_HANDLERS&&Y("OCIO",function(e){return e._OCIO!==void 0},function(e,t,n){t._OCIO=(0,x.readBytes)(e,n())},function(e,t){(0,_.writeBytes)(e,t._OCIO)});on.MOCK_HANDLERS&&Y("GenI",function(e){return e._GenI!==void 0},function(e,t,n){t._GenI=(0,x.readBytes)(e,n())},function(e,t){(0,_.writeBytes)(e,t._GenI)});function X2(e){var t=(0,x.readInt32)(e),n=(0,x.readInt32)(e),r=(0,x.readInt32)(e),i=(0,x.readInt32)(e);return{top:t,left:n,bottom:r,right:i}}function Z2(e,t){(0,_.writeInt32)(e,t.top),(0,_.writeInt32)(e,t.left),(0,_.writeInt32)(e,t.bottom),(0,_.writeInt32)(e,t.right)}Y("Anno",function(e){return e.annotations!==void 0},function(e,t,n){var r=(0,x.readUint16)(e),i=(0,x.readUint16)(e);if(r!==2||i!==1)throw new Error("Invalid Anno version");for(var o=(0,x.readUint32)(e),a=[],l=0;l<o;l++){(0,x.readUint32)(e);var s=(0,x.readSignature)(e),u=!!(0,x.readUint8)(e);(0,x.readUint8)(e),(0,x.readUint16)(e);var c=X2(e),p=X2(e),d=(0,x.readColor)(e),g=(0,x.readPascalString)(e,2),y=(0,x.readPascalString)(e,2),v=(0,x.readPascalString)(e,2);(0,x.readUint32)(e),(0,x.readSignature)(e);var S=(0,x.readUint32)(e),m=void 0;if(s==="txtA")S>=2&&(0,x.readUint16)(e)===65279?m=(0,x.readUnicodeStringWithLength)(e,(S-2)/2):(e.offset-=2,m=(0,x.readAsciiString)(e,S)),m=m.replace(/\r/g,`
`);else if(s==="sndA")m=(0,x.readBytes)(e,S);else throw new Error("Unknown annotation type");a.push({type:s==="txtA"?"text":"sound",open:u,iconLocation:c,popupLocation:p,color:d,author:g,name:y,date:v,data:m})}t.annotations=a,(0,x.skipBytes)(e,n())},function(e,t){var n=t.annotations;(0,_.writeUint16)(e,2),(0,_.writeUint16)(e,1),(0,_.writeUint32)(e,n.length);for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o.type==="sound";if(a&&!(o.data instanceof Uint8Array))throw new Error("Sound annotation data should be Uint8Array");if(!a&&typeof o.data!="string")throw new Error("Text annotation data should be string");var l=e.offset;(0,_.writeUint32)(e,0),(0,_.writeSignature)(e,a?"sndA":"txtA"),(0,_.writeUint8)(e,o.open?1:0),(0,_.writeUint8)(e,28),(0,_.writeUint16)(e,1),Z2(e,o.iconLocation),Z2(e,o.popupLocation),(0,_.writeColor)(e,o.color),(0,_.writePascalString)(e,o.author||"",2),(0,_.writePascalString)(e,o.name||"",2),(0,_.writePascalString)(e,o.date||"",2);var s=e.offset;(0,_.writeUint32)(e,0),(0,_.writeSignature)(e,a?"sndM":"txtC"),(0,_.writeUint32)(e,0);var u=e.offset;if(a)(0,_.writeBytes)(e,o.data);else{(0,_.writeUint16)(e,65279);for(var c=o.data.replace(/\n/g,"\r"),p=0;p<c.length;p++)(0,_.writeUint16)(e,c.charCodeAt(p))}e.view.setUint32(l,e.offset-l,!1),e.view.setUint32(s,e.offset-s,!1),e.view.setUint32(u-4,e.offset-u,!1)}});function rw(e){Y(e,function(t){var n=t;return!(!n.linkedFiles||!n.linkedFiles.length||e==="lnkE"&&!n.linkedFiles.some(function(r){return r.linkedFile}))},function(t,n,r,i){var o=n;for(o.linkedFiles=o.linkedFiles||[];r()>8;){var a=fp(t),l=t.offset,s=(0,x.readSignature)(t),u=(0,x.readInt32)(t),c=(0,x.readPascalString)(t,1),p=(0,x.readUnicodeString)(t),d=(0,x.readSignature)(t).trim(),g=(0,x.readSignature)(t).trim(),y=fp(t),v=(0,x.readUint8)(t),S=v?(0,C.readVersionAndDescriptor)(t):void 0,m=s==="liFE"?(0,C.readVersionAndDescriptor)(t):void 0,f={id:c,name:p};if(d&&(f.type=d),g&&(f.creator=g),S&&(f.descriptor={compInfo:{compID:S.compInfo.compID,originalCompID:S.compInfo.originalCompID}}),s==="liFE"&&u>3){var h=(0,x.readInt32)(t),w=(0,x.readUint8)(t),I=(0,x.readUint8)(t),T=(0,x.readUint8)(t),L=(0,x.readUint8)(t),A=(0,x.readFloat64)(t),O=Math.floor(A),R=(A-O)*1e3;f.time=new Date(Date.UTC(h,w,I,T,L,O,R)).toISOString()}var F=s==="liFE"?fp(t):0;for(s==="liFA"&&(0,x.skipBytes)(t,8),s==="liFD"&&(f.data=(0,x.readBytes)(t,y)),u>=5&&(f.childDocumentID=(0,x.readUnicodeString)(t)),u>=6&&(f.assetModTime=(0,x.readFloat64)(t)),u>=7&&(f.assetLockedState=(0,x.readUint8)(t)),s==="liFE"&&u===2&&(f.data=(0,x.readBytes)(t,F)),t.skipLinkedFilesData&&(f.data=void 0),e==="lnkE"&&(f.linkedFile={fileSize:F,name:(m==null?void 0:m["Nm  "])||"",fullPath:(m==null?void 0:m.fullPath)||"",originalPath:(m==null?void 0:m.originalPath)||"",relativePath:(m==null?void 0:m.relPath)||""}),o.linkedFiles.push(f);a%4;)a++;t.offset=l+a}(0,x.skipBytes)(t,r())},function(t,n){for(var r,i,o,a,l,s,u,c,p,d=n,g=0,y=d.linkedFiles;g<y.length;g++){var v=y[g];if(e==="lnkE"==!!v.linkedFile){var S=2;v.assetLockedState!=null?S=7:v.assetModTime!=null?S=6:v.childDocumentID!=null?S=5:e=="lnkE"&&(S=3),pp(t,0);var m=t.offset;if((0,_.writeSignature)(t,e==="lnkE"?"liFE":v.data?"liFD":"liFA"),(0,_.writeInt32)(t,S),!v.id||typeof v.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(v.id))throw new Error("Linked file ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if((0,_.writePascalString)(t,v.id,1),(0,_.writeUnicodeStringWithPadding)(t,v.name||""),(0,_.writeSignature)(t,v.type?"".concat(v.type,"    ").substring(0,4):"    "),(0,_.writeSignature)(t,v.creator?"".concat(v.creator,"    ").substring(0,4):"\0\0\0\0"),pp(t,v.data?v.data.byteLength:0),v.descriptor&&v.descriptor.compInfo){var f={compInfo:{compID:v.descriptor.compInfo.compID,originalCompID:v.descriptor.compInfo.originalCompID}};(0,_.writeUint8)(t,1),(0,C.writeVersionAndDescriptor)(t,"","null",f)}else(0,_.writeUint8)(t,0);if(e==="lnkE"){var f={descVersion:2,"Nm  ":(i=(r=v.linkedFile)===null||r===void 0?void 0:r.name)!==null&&i!==void 0?i:"",fullPath:(a=(o=v.linkedFile)===null||o===void 0?void 0:o.fullPath)!==null&&a!==void 0?a:"",originalPath:(s=(l=v.linkedFile)===null||l===void 0?void 0:l.originalPath)!==null&&s!==void 0?s:"",relPath:(c=(u=v.linkedFile)===null||u===void 0?void 0:u.relativePath)!==null&&c!==void 0?c:""};(0,C.writeVersionAndDescriptor)(t,"","ExternalFileLink",f);var h=v.time?new Date(v.time):new Date;(0,_.writeInt32)(t,h.getUTCFullYear()),(0,_.writeUint8)(t,h.getUTCMonth()),(0,_.writeUint8)(t,h.getUTCDate()),(0,_.writeUint8)(t,h.getUTCHours()),(0,_.writeUint8)(t,h.getUTCMinutes()),(0,_.writeFloat64)(t,h.getUTCSeconds()+h.getUTCMilliseconds()/1e3)}v.data?(0,_.writeBytes)(t,v.data):pp(t,((p=v.linkedFile)===null||p===void 0?void 0:p.fileSize)||0),S>=5&&(0,_.writeUnicodeStringWithPadding)(t,v.childDocumentID||""),S>=6&&(0,_.writeFloat64)(t,v.assetModTime||0),S>=7&&(0,_.writeUint8)(t,v.assetLockedState||0);var w=t.offset-m;for(t.view.setUint32(m-4,w,!1);w%4;)w++,(0,_.writeUint8)(t,0)}}})}rw("lnk2");rw("lnkE");$o("lnkD","lnk2");$o("lnk3","lnk2");Y("pths",Le("pathList"),function(e,t){var n=(0,C.readVersionAndDescriptor)(e,!0);t.pathList=[]},function(e,t){var n={pathList:[]};(0,C.writeVersionAndDescriptor)(e,"","pathsDataClass",n)});Y("lyvr",Le("version"),function(e,t){return t.version=(0,x.readUint32)(e)},function(e,t){return(0,_.writeUint32)(e,t.version)});Y("lfxs",function(){return!1},function(e,t,n){var r=(0,x.readUint32)(e);if(r!==0)throw new Error("Invalid lfxs version");var i=(0,C.readVersionAndDescriptor)(e);t.effects=(0,C.parseEffects)(i,!!e.logMissingFeatures),(0,x.skipBytes)(e,n())},function(e,t,n,r){var i=(0,C.serializeEffects)(t.effects,!!r.logMissingFeatures,!0);(0,_.writeUint32)(e,0),(0,C.writeVersionAndDescriptor)(e,"","null",i)});function Lt(e){return function(t){return!!t.adjustment&&t.adjustment.type===e}}Y("brit",Lt("brightness/contrast"),function(e,t,n){t.adjustment||(t.adjustment={type:"brightness/contrast",brightness:(0,x.readInt16)(e),contrast:(0,x.readInt16)(e),meanValue:(0,x.readInt16)(e),labColorOnly:!!(0,x.readUint8)(e),useLegacy:!0}),(0,x.skipBytes)(e,n())},function(e,t){var n,r=t.adjustment;(0,_.writeInt16)(e,r.brightness||0),(0,_.writeInt16)(e,r.contrast||0),(0,_.writeInt16)(e,(n=r.meanValue)!==null&&n!==void 0?n:127),(0,_.writeUint8)(e,r.labColorOnly?1:0),(0,_.writeZeros)(e,1)});function Ou(e){var t=(0,x.readInt16)(e),n=(0,x.readInt16)(e),r=(0,x.readInt16)(e),i=(0,x.readInt16)(e),o=(0,x.readInt16)(e)/100;return{shadowInput:t,highlightInput:n,shadowOutput:r,highlightOutput:i,midtoneInput:o}}function xl(e,t){(0,_.writeInt16)(e,t.shadowInput),(0,_.writeInt16)(e,t.highlightInput),(0,_.writeInt16)(e,t.shadowOutput),(0,_.writeInt16)(e,t.highlightOutput),(0,_.writeInt16)(e,Math.round(t.midtoneInput*100))}Y("levl",Lt("levels"),function(e,t,n){if((0,x.readUint16)(e)!==2)throw new Error("Invalid levl version");t.adjustment=E(E({},t.adjustment),{type:"levels",rgb:Ou(e),red:Ou(e),green:Ou(e),blue:Ou(e)}),(0,x.skipBytes)(e,n())},function(e,t){var n=t.adjustment,r={shadowInput:0,highlightInput:255,shadowOutput:0,highlightOutput:255,midtoneInput:1};(0,_.writeUint16)(e,2),xl(e,n.rgb||r),xl(e,n.red||r),xl(e,n.blue||r),xl(e,n.green||r);for(var i=0;i<59;i++)xl(e,r)});function Fu(e){for(var t=(0,x.readUint16)(e),n=[],r=0;r<t;r++){var i=(0,x.readInt16)(e),o=(0,x.readInt16)(e);n.push({input:o,output:i})}return n}function oi(e,t){(0,_.writeUint16)(e,t.length);for(var n=0,r=t;n<r.length;n++){var i=r[n];(0,_.writeUint16)(e,i.output),(0,_.writeUint16)(e,i.input)}}Y("curv",Lt("curves"),function(e,t,n){if((0,x.readUint8)(e),(0,x.readUint16)(e)!==1)throw new Error("Invalid curv version");(0,x.readUint16)(e);var r=(0,x.readUint16)(e),i={type:"curves"};r&1&&(i.rgb=Fu(e)),r&2&&(i.red=Fu(e)),r&4&&(i.green=Fu(e)),r&8&&(i.blue=Fu(e)),t.adjustment=E(E({},t.adjustment),i),(0,x.skipBytes)(e,n())},function(e,t){var n=t.adjustment,r=n.rgb,i=n.red,o=n.green,a=n.blue,l=0,s=0;r&&r.length&&(l|=1,s++),i&&i.length&&(l|=2,s++),o&&o.length&&(l|=4,s++),a&&a.length&&(l|=8,s++),(0,_.writeUint8)(e,0),(0,_.writeUint16)(e,1),(0,_.writeUint16)(e,0),(0,_.writeUint16)(e,l),r&&r.length&&oi(e,r),i&&i.length&&oi(e,i),o&&o.length&&oi(e,o),a&&a.length&&oi(e,a),(0,_.writeSignature)(e,"Crv "),(0,_.writeUint16)(e,4),(0,_.writeUint16)(e,0),(0,_.writeUint16)(e,s),r&&r.length&&((0,_.writeUint16)(e,0),oi(e,r)),i&&i.length&&((0,_.writeUint16)(e,1),oi(e,i)),o&&o.length&&((0,_.writeUint16)(e,2),oi(e,o)),a&&a.length&&((0,_.writeUint16)(e,3),oi(e,a)),(0,_.writeZeros)(e,2)});Y("expA",Lt("exposure"),function(e,t,n){if((0,x.readUint16)(e)!==1)throw new Error("Invalid expA version");t.adjustment=E(E({},t.adjustment),{type:"exposure",exposure:(0,x.readFloat32)(e),offset:(0,x.readFloat32)(e),gamma:(0,x.readFloat32)(e)}),(0,x.skipBytes)(e,n())},function(e,t){var n=t.adjustment;(0,_.writeUint16)(e,1),(0,_.writeFloat32)(e,n.exposure),(0,_.writeFloat32)(e,n.offset),(0,_.writeFloat32)(e,n.gamma),(0,_.writeZeros)(e,2)});Y("vibA",Lt("vibrance"),function(e,t,n){var r=(0,C.readVersionAndDescriptor)(e);t.adjustment={type:"vibrance"},r.vibrance!==void 0&&(t.adjustment.vibrance=r.vibrance),r.Strt!==void 0&&(t.adjustment.saturation=r.Strt),(0,x.skipBytes)(e,n())},function(e,t){var n=t.adjustment,r={};n.vibrance!==void 0&&(r.vibrance=n.vibrance),n.saturation!==void 0&&(r.Strt=n.saturation),(0,C.writeVersionAndDescriptor)(e,"","null",r)});function Ni(e){return{a:(0,x.readInt16)(e),b:(0,x.readInt16)(e),c:(0,x.readInt16)(e),d:(0,x.readInt16)(e),hue:(0,x.readInt16)(e),saturation:(0,x.readInt16)(e),lightness:(0,x.readInt16)(e)}}function Ui(e,t){var n=t||{};(0,_.writeInt16)(e,n.a||0),(0,_.writeInt16)(e,n.b||0),(0,_.writeInt16)(e,n.c||0),(0,_.writeInt16)(e,n.d||0),(0,_.writeInt16)(e,n.hue||0),(0,_.writeInt16)(e,n.saturation||0),(0,_.writeInt16)(e,n.lightness||0)}Y("hue2",Lt("hue/saturation"),function(e,t,n){if((0,x.readUint16)(e)!==2)throw new Error("Invalid hue2 version");t.adjustment=E(E({},t.adjustment),{type:"hue/saturation",master:Ni(e),reds:Ni(e),yellows:Ni(e),greens:Ni(e),cyans:Ni(e),blues:Ni(e),magentas:Ni(e)}),(0,x.skipBytes)(e,n())},function(e,t){var n=t.adjustment;(0,_.writeUint16)(e,2),Ui(e,n.master),Ui(e,n.reds),Ui(e,n.yellows),Ui(e,n.greens),Ui(e,n.cyans),Ui(e,n.blues),Ui(e,n.magentas)});function mp(e){return{cyanRed:(0,x.readInt16)(e),magentaGreen:(0,x.readInt16)(e),yellowBlue:(0,x.readInt16)(e)}}function gp(e,t){(0,_.writeInt16)(e,t.cyanRed||0),(0,_.writeInt16)(e,t.magentaGreen||0),(0,_.writeInt16)(e,t.yellowBlue||0)}Y("blnc",Lt("color balance"),function(e,t,n){t.adjustment={type:"color balance",shadows:mp(e),midtones:mp(e),highlights:mp(e),preserveLuminosity:!!(0,x.readUint8)(e)},(0,x.skipBytes)(e,n())},function(e,t){var n=t.adjustment;gp(e,n.shadows||{}),gp(e,n.midtones||{}),gp(e,n.highlights||{}),(0,_.writeUint8)(e,n.preserveLuminosity?1:0),(0,_.writeZeros)(e,1)});Y("blwh",Lt("black & white"),function(e,t,n){var r=(0,C.readVersionAndDescriptor)(e);t.adjustment={type:"black & white",reds:r["Rd  "],yellows:r.Yllw,greens:r["Grn "],cyans:r["Cyn "],blues:r["Bl  "],magentas:r.Mgnt,useTint:!!r.useTint,presetKind:r.bwPresetKind,presetFileName:r.blackAndWhitePresetFileName},r.tintColor!==void 0&&(t.adjustment.tintColor=(0,C.parseColor)(r.tintColor)),(0,x.skipBytes)(e,n())},function(e,t){var n=t.adjustment,r={"Rd  ":n.reds||0,Yllw:n.yellows||0,"Grn ":n.greens||0,"Cyn ":n.cyans||0,"Bl  ":n.blues||0,Mgnt:n.magentas||0,useTint:!!n.useTint,tintColor:(0,C.serializeColor)(n.tintColor),bwPresetKind:n.presetKind||0,blackAndWhitePresetFileName:n.presetFileName||""};(0,C.writeVersionAndDescriptor)(e,"","null",r)});Y("phfl",Lt("photo filter"),function(e,t,n){var r=(0,x.readUint16)(e);if(r!==2&&r!==3)throw new Error("Invalid phfl version");var i;r===2?i=(0,x.readColor)(e):i={l:(0,x.readInt32)(e)/100,a:(0,x.readInt32)(e)/100,b:(0,x.readInt32)(e)/100},t.adjustment={type:"photo filter",color:i,density:(0,x.readUint32)(e)/100,preserveLuminosity:!!(0,x.readUint8)(e)},(0,x.skipBytes)(e,n())},function(e,t){var n=t.adjustment;(0,_.writeUint16)(e,2),(0,_.writeColor)(e,n.color||{l:0,a:0,b:0}),(0,_.writeUint32)(e,(n.density||0)*100),(0,_.writeUint8)(e,n.preserveLuminosity?1:0),(0,_.writeZeros)(e,3)});function Nu(e){var t=(0,x.readInt16)(e),n=(0,x.readInt16)(e),r=(0,x.readInt16)(e);(0,x.skipBytes)(e,2);var i=(0,x.readInt16)(e);return{red:t,green:n,blue:r,constant:i}}function _l(e,t){var n=t||{};(0,_.writeInt16)(e,n.red),(0,_.writeInt16)(e,n.green),(0,_.writeInt16)(e,n.blue),(0,_.writeZeros)(e,2),(0,_.writeInt16)(e,n.constant)}Y("mixr",Lt("channel mixer"),function(e,t,n){if((0,x.readUint16)(e)!==1)throw new Error("Invalid mixr version");var r=t.adjustment=E(E({},t.adjustment),{type:"channel mixer",monochrome:!!(0,x.readUint16)(e)});r.monochrome||(r.red=Nu(e),r.green=Nu(e),r.blue=Nu(e)),r.gray=Nu(e),(0,x.skipBytes)(e,n())},function(e,t){var n=t.adjustment;(0,_.writeUint16)(e,1),(0,_.writeUint16)(e,n.monochrome?1:0),n.monochrome?(_l(e,n.gray),(0,_.writeZeros)(e,3*5*2)):(_l(e,n.red),_l(e,n.green),_l(e,n.blue),_l(e,n.gray))});var K2=(0,on.createEnum)("colorLookupType","3DLUT",{"3dlut":"3DLUT",abstractProfile:"abstractProfile",deviceLinkProfile:"deviceLinkProfile"}),q2=(0,on.createEnum)("LUTFormatType","look",{look:"LUTFormatLOOK",cube:"LUTFormatCUBE","3dl":"LUTFormat3DL"}),Uu=(0,on.createEnum)("colorLookupOrder","rgb",{rgb:"rgbOrder",bgr:"bgrOrder"});Y("clrL",Lt("color lookup"),function(e,t,n){if((0,x.readUint16)(e)!==1)throw new Error("Invalid clrL version");var r=(0,C.readVersionAndDescriptor)(e);t.adjustment={type:"color lookup"};var i=t.adjustment;r.lookupType!==void 0&&(i.lookupType=K2.decode(r.lookupType)),r["Nm  "]!==void 0&&(i.name=r["Nm  "]),r.Dthr!==void 0&&(i.dither=r.Dthr),r.profile!==void 0&&(i.profile=r.profile),r.LUTFormat!==void 0&&(i.lutFormat=q2.decode(r.LUTFormat)),r.dataOrder!==void 0&&(i.dataOrder=Uu.decode(r.dataOrder)),r.tableOrder!==void 0&&(i.tableOrder=Uu.decode(r.tableOrder)),r.LUT3DFileData!==void 0&&(i.lut3DFileData=r.LUT3DFileData),r.LUT3DFileName!==void 0&&(i.lut3DFileName=r.LUT3DFileName),(0,x.skipBytes)(e,n())},function(e,t){var n=t.adjustment,r={};n.lookupType!==void 0&&(r.lookupType=K2.encode(n.lookupType)),n.name!==void 0&&(r["Nm  "]=n.name),n.dither!==void 0&&(r.Dthr=n.dither),n.profile!==void 0&&(r.profile=n.profile),n.lutFormat!==void 0&&(r.LUTFormat=q2.encode(n.lutFormat)),n.dataOrder!==void 0&&(r.dataOrder=Uu.encode(n.dataOrder)),n.tableOrder!==void 0&&(r.tableOrder=Uu.encode(n.tableOrder)),n.lut3DFileData!==void 0&&(r.LUT3DFileData=n.lut3DFileData),n.lut3DFileName!==void 0&&(r.LUT3DFileName=n.lut3DFileName),(0,_.writeUint16)(e,1),(0,C.writeVersionAndDescriptor)(e,"","null",r)});Y("nvrt",Lt("invert"),function(e,t,n){t.adjustment={type:"invert"},(0,x.skipBytes)(e,n())},function(){});Y("post",Lt("posterize"),function(e,t,n){t.adjustment={type:"posterize",levels:(0,x.readUint16)(e)},(0,x.skipBytes)(e,n())},function(e,t){var n,r=t.adjustment;(0,_.writeUint16)(e,(n=r.levels)!==null&&n!==void 0?n:4),(0,_.writeZeros)(e,2)});Y("thrs",Lt("threshold"),function(e,t,n){t.adjustment={type:"threshold",level:(0,x.readUint16)(e)},(0,x.skipBytes)(e,n())},function(e,t){var n,r=t.adjustment;(0,_.writeUint16)(e,(n=r.level)!==null&&n!==void 0?n:128),(0,_.writeZeros)(e,2)});var Q2=["","","","rgb","hsb","","lab"];Y("grdm",Lt("gradient map"),function(e,t,n){if((0,x.readUint16)(e)!==1)throw new Error("Invalid grdm version");var r={type:"gradient map",gradientType:"solid"};r.reverse=!!(0,x.readUint8)(e),r.dither=!!(0,x.readUint8)(e),r.name=(0,x.readUnicodeString)(e),r.colorStops=[],r.opacityStops=[];for(var i=(0,x.readUint16)(e),o=0;o<i;o++)r.colorStops.push({location:(0,x.readUint32)(e),midpoint:(0,x.readUint32)(e)/100,color:(0,x.readColor)(e)}),(0,x.skipBytes)(e,2);for(var a=(0,x.readUint16)(e),o=0;o<a;o++)r.opacityStops.push({location:(0,x.readUint32)(e),midpoint:(0,x.readUint32)(e)/100,opacity:(0,x.readUint16)(e)/255});var l=(0,x.readUint16)(e);if(l!==2)throw new Error("Invalid grdm expansion count");var s=(0,x.readUint16)(e);r.smoothness=s/4096;var u=(0,x.readUint16)(e);if(u!==32)throw new Error("Invalid grdm length");r.gradientType=(0,x.readUint16)(e)?"noise":"solid",r.randomSeed=(0,x.readUint32)(e),r.addTransparency=!!(0,x.readUint16)(e),r.restrictColors=!!(0,x.readUint16)(e),r.roughness=(0,x.readUint32)(e)/4096,r.colorModel=Q2[(0,x.readUint16)(e)]||"rgb",r.min=[(0,x.readUint16)(e)/32768,(0,x.readUint16)(e)/32768,(0,x.readUint16)(e)/32768,(0,x.readUint16)(e)/32768],r.max=[(0,x.readUint16)(e)/32768,(0,x.readUint16)(e)/32768,(0,x.readUint16)(e)/32768,(0,x.readUint16)(e)/32768],(0,x.skipBytes)(e,n());for(var c=0,p=r.colorStops;c<p.length;c++){var d=p[c];d.location/=s}for(var g=0,y=r.opacityStops;g<y.length;g++){var d=y[g];d.location/=s}t.adjustment=r},function(e,t){var n,r,i,o=t.adjustment;(0,_.writeUint16)(e,1),(0,_.writeUint8)(e,o.reverse?1:0),(0,_.writeUint8)(e,o.dither?1:0),(0,_.writeUnicodeStringWithPadding)(e,o.name||""),(0,_.writeUint16)(e,o.colorStops&&o.colorStops.length||0);for(var a=Math.round(((n=o.smoothness)!==null&&n!==void 0?n:1)*4096),l=0,s=o.colorStops||[];l<s.length;l++){var u=s[l];(0,_.writeUint32)(e,Math.round(u.location*a)),(0,_.writeUint32)(e,Math.round(u.midpoint*100)),(0,_.writeColor)(e,u.color),(0,_.writeZeros)(e,2)}(0,_.writeUint16)(e,o.opacityStops&&o.opacityStops.length||0);for(var c=0,p=o.opacityStops||[];c<p.length;c++){var u=p[c];(0,_.writeUint32)(e,Math.round(u.location*a)),(0,_.writeUint32)(e,Math.round(u.midpoint*100)),(0,_.writeUint16)(e,Math.round(u.opacity*255))}(0,_.writeUint16)(e,2),(0,_.writeUint16)(e,a),(0,_.writeUint16)(e,32),(0,_.writeUint16)(e,o.gradientType==="noise"?1:0),(0,_.writeUint32)(e,o.randomSeed||0),(0,_.writeUint16)(e,o.addTransparency?1:0),(0,_.writeUint16)(e,o.restrictColors?1:0),(0,_.writeUint32)(e,Math.round(((r=o.roughness)!==null&&r!==void 0?r:1)*4096));var d=Q2.indexOf((i=o.colorModel)!==null&&i!==void 0?i:"rgb");(0,_.writeUint16)(e,d===-1?3:d);for(var g=0;g<4;g++)(0,_.writeUint16)(e,Math.round((o.min&&o.min[g]||0)*32768));for(var g=0;g<4;g++)(0,_.writeUint16)(e,Math.round((o.max&&o.max[g]||0)*32768));(0,_.writeZeros)(e,4)});function yr(e){return{c:(0,x.readInt16)(e),m:(0,x.readInt16)(e),y:(0,x.readInt16)(e),k:(0,x.readInt16)(e)}}function wr(e,t){var n=t||{};(0,_.writeInt16)(e,n.c),(0,_.writeInt16)(e,n.m),(0,_.writeInt16)(e,n.y),(0,_.writeInt16)(e,n.k)}Y("selc",Lt("selective color"),function(e,t){if((0,x.readUint16)(e)!==1)throw new Error("Invalid selc version");var n=(0,x.readUint16)(e)?"absolute":"relative";(0,x.skipBytes)(e,8),t.adjustment={type:"selective color",mode:n,reds:yr(e),yellows:yr(e),greens:yr(e),cyans:yr(e),blues:yr(e),magentas:yr(e),whites:yr(e),neutrals:yr(e),blacks:yr(e)}},function(e,t){var n=t.adjustment;(0,_.writeUint16)(e,1),(0,_.writeUint16)(e,n.mode==="absolute"?1:0),(0,_.writeZeros)(e,8),wr(e,n.reds),wr(e,n.yellows),wr(e,n.greens),wr(e,n.cyans),wr(e,n.blues),wr(e,n.magentas),wr(e,n.whites),wr(e,n.neutrals),wr(e,n.blacks)});Y("CgEd",function(e){var t=e.adjustment;return t?t.type==="brightness/contrast"&&!t.useLegacy||(t.type==="levels"||t.type==="curves"||t.type==="exposure"||t.type==="channel mixer"||t.type==="hue/saturation")&&t.presetFileName!==void 0:!1},function(e,t,n){var r=(0,C.readVersionAndDescriptor)(e);if(r.Vrsn!==1)throw new Error("Invalid CgEd version");"presetFileName"in r?t.adjustment=E(E({},t.adjustment),{presetKind:r.presetKind,presetFileName:r.presetFileName}):"curvesPresetFileName"in r?t.adjustment=E(E({},t.adjustment),{presetKind:r.curvesPresetKind,presetFileName:r.curvesPresetFileName}):"mixerPresetFileName"in r?t.adjustment=E(E({},t.adjustment),{presetKind:r.mixerPresetKind,presetFileName:r.mixerPresetFileName}):t.adjustment={type:"brightness/contrast",brightness:r.Brgh,contrast:r.Cntr,meanValue:r.means,useLegacy:!!r.useLegacy,labColorOnly:!!r["Lab "],auto:!!r.Auto},(0,x.skipBytes)(e,n())},function(e,t){var n,r,i,o,a=t.adjustment;if(a.type==="levels"||a.type==="exposure"||a.type==="hue/saturation"){var l={Vrsn:1,presetKind:(n=a.presetKind)!==null&&n!==void 0?n:1,presetFileName:a.presetFileName||""};(0,C.writeVersionAndDescriptor)(e,"","null",l)}else if(a.type==="curves"){var l={Vrsn:1,curvesPresetKind:(r=a.presetKind)!==null&&r!==void 0?r:1,curvesPresetFileName:a.presetFileName||""};(0,C.writeVersionAndDescriptor)(e,"","null",l)}else if(a.type==="channel mixer"){var l={Vrsn:1,mixerPresetKind:(i=a.presetKind)!==null&&i!==void 0?i:1,mixerPresetFileName:a.presetFileName||""};(0,C.writeVersionAndDescriptor)(e,"","null",l)}else if(a.type==="brightness/contrast"){var l={Vrsn:1,Brgh:a.brightness||0,Cntr:a.contrast||0,means:(o=a.meanValue)!==null&&o!==void 0?o:127,"Lab ":!!a.labColorOnly,useLegacy:!!a.useLegacy,Auto:!!a.auto};(0,C.writeVersionAndDescriptor)(e,"","null",l)}else throw new Error("Unhandled CgEd case")});function UC(e){var t=[];function n(r){var i;if(r.children)for(var o=0,a=r.children;o<a.length;o++){var l=a[o];((i=l.text)===null||i===void 0?void 0:i.index)!==void 0&&(t[l.text.index]=l),n(l)}}return n(e),t}Y("Txt2",Le("engineData"),function(e,t,n,r){var i=(0,x.readBytes)(e,n());t.engineData=(0,W2.fromByteArray)(i);var o=UC(r),a=(0,vp.parseEngineData)(i),l=(0,kC.decodeEngineData2)(a),s=l.ResourceDict.TextFrameSet;if(s)for(var u=0;u<s.length;u++){var c=o[u];s[u].path&&(c!=null&&c.text)&&(c.text.textPath=s[u].path)}},function(e,t){var n=(0,W2.toByteArray)(t.engineData);(0,_.writeBytes)(e,n)});Y("FEid",Le("filterEffectsMasks"),function(e,t,n){var r=(0,x.readInt32)(e);if(r<1||r>3)throw new Error("Invalid filterEffects version ".concat(r));for(t.filterEffectsMasks=[];n()>8;){if((0,x.readUint32)(e))throw new Error("filterEffects: 64 bit length is not supported");var i=(0,x.readUint32)(e),o=e.offset+i,a=(0,x.readPascalString)(e,1),l=(0,x.readInt32)(e);if(l!==1)throw new Error("Invalid filterEffect version ".concat(l));if((0,x.readUint32)(e))throw new Error("filterEffect: 64 bit length is not supported");(0,x.readUint32)(e);for(var s=(0,x.readInt32)(e),u=(0,x.readInt32)(e),c=(0,x.readInt32)(e),p=(0,x.readInt32)(e),d=(0,x.readInt32)(e),g=(0,x.readInt32)(e),y=[],v=0;v<g+2;v++){var S=(0,x.readInt32)(e);if(S){if((0,x.readUint32)(e))throw new Error("filterEffect: 64 bit length is not supported");var m=(0,x.readUint32)(e);if(!m)throw new Error("filterEffect: Empty channel");var f=(0,x.readUint16)(e),h=(0,x.readBytes)(e,m-2);y.push({compressionMode:f,data:h})}else y.push(void 0)}if(t.filterEffectsMasks.push({id:a,top:s,left:u,bottom:c,right:p,depth:d,channels:y}),e.offset<o&&(0,x.readUint8)(e)){var w=(0,x.readInt32)(e),I=(0,x.readInt32)(e),T=(0,x.readInt32)(e),L=(0,x.readInt32)(e);if((0,x.readUint32)(e))throw new Error("filterEffect: 64 bit length is not supported");var A=(0,x.readUint32)(e),f=(0,x.readUint16)(e),h=(0,x.readBytes)(e,A-2);t.filterEffectsMasks[t.filterEffectsMasks.length-1].extra={top:w,left:I,bottom:T,right:L,compressionMode:f,data:h}}e.offset=o;for(var O=i;O%4;)e.offset++,O++}},function(e,t){var n;(0,_.writeInt32)(e,3);for(var r=0,i=t.filterEffectsMasks;r<i.length;r++){var o=i[r];(0,_.writeUint32)(e,0),(0,_.writeUint32)(e,0);var a=e.offset;(0,_.writePascalString)(e,o.id,1),(0,_.writeInt32)(e,1),(0,_.writeUint32)(e,0),(0,_.writeUint32)(e,0);var l=e.offset;(0,_.writeInt32)(e,o.top),(0,_.writeInt32)(e,o.left),(0,_.writeInt32)(e,o.bottom),(0,_.writeInt32)(e,o.right),(0,_.writeInt32)(e,o.depth);var s=Math.max(0,o.channels.length-2);(0,_.writeInt32)(e,s);for(var u=0;u<s+2;u++){var c=o.channels[u];(0,_.writeInt32)(e,c?1:0),c&&((0,_.writeUint32)(e,0),(0,_.writeUint32)(e,c.data.length+2),(0,_.writeUint16)(e,c.compressionMode),(0,_.writeBytes)(e,c.data))}e.view.setUint32(l-4,e.offset-l,!1);var p=(n=t.filterEffectsMasks[t.filterEffectsMasks.length-1])===null||n===void 0?void 0:n.extra;p&&((0,_.writeUint8)(e,1),(0,_.writeInt32)(e,p.top),(0,_.writeInt32)(e,p.left),(0,_.writeInt32)(e,p.bottom),(0,_.writeInt32)(e,p.right),(0,_.writeUint32)(e,0),(0,_.writeUint32)(e,p.data.byteLength+2),(0,_.writeUint16)(e,p.compressionMode),(0,_.writeBytes)(e,p.data));var d=e.offset-a;for(e.view.setUint32(a-4,d,!1);d%4;)(0,_.writeZeros)(e,1),d++}});$o("FXid","FEid");Y("FMsk",Le("filterMask"),function(e,t){t.filterMask={colorSpace:(0,x.readColor)(e),opacity:(0,x.readUint16)(e)/255}},function(e,t){var n;(0,_.writeColor)(e,t.filterMask.colorSpace),(0,_.writeUint16)(e,(0,on.clamp)((n=t.filterMask.opacity)!==null&&n!==void 0?n:1,0,1)*255)});Y("artd",function(e){return e.artboards!==void 0},function(e,t,n){var r=(0,C.readVersionAndDescriptor)(e);t.artboards={count:r["Cnt "],autoExpandOffset:{horizontal:r.autoExpandOffset.Hrzn,vertical:r.autoExpandOffset.Vrtc},origin:{horizontal:r.origin.Hrzn,vertical:r.origin.Vrtc},autoExpandEnabled:r.autoExpandEnabled,autoNestEnabled:r.autoNestEnabled,autoPositionEnabled:r.autoPositionEnabled,shrinkwrapOnSaveEnabled:!!r.shrinkwrapOnSaveEnabled,docDefaultNewArtboardBackgroundColor:(0,C.parseColor)(r.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:r.docDefaultNewArtboardBackgroundType},(0,x.skipBytes)(e,n())},function(e,t){var n,r,i,o,a,l=t.artboards,s={"Cnt ":l.count,autoExpandOffset:l.autoExpandOffset?{Hrzn:l.autoExpandOffset.horizontal,Vrtc:l.autoExpandOffset.vertical}:{Hrzn:0,Vrtc:0},origin:l.origin?{Hrzn:l.origin.horizontal,Vrtc:l.origin.vertical}:{Hrzn:0,Vrtc:0},autoExpandEnabled:(n=l.autoExpandEnabled)!==null&&n!==void 0?n:!0,autoNestEnabled:(r=l.autoNestEnabled)!==null&&r!==void 0?r:!0,autoPositionEnabled:(i=l.autoPositionEnabled)!==null&&i!==void 0?i:!0,shrinkwrapOnSaveEnabled:(o=l.shrinkwrapOnSaveEnabled)!==null&&o!==void 0?o:!0,docDefaultNewArtboardBackgroundColor:(0,C.serializeColor)(l.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:(a=l.docDefaultNewArtboardBackgroundType)!==null&&a!==void 0?a:1};(0,C.writeVersionAndDescriptor)(e,"","null",s,"artd")});function wp(e){return Object.keys(e).map(function(t){return e[t]}).some(function(t){return Array.isArray(t)&&t.length>1})}Qe.hasMultiEffects=wp;Y("lfx2",function(e){return e.effects!==void 0&&!wp(e.effects)},function(e,t,n){var r=(0,x.readUint32)(e);if(r!==0)throw new Error("Invalid lfx2 version");var i=(0,C.readVersionAndDescriptor)(e);t.effects=(0,C.parseEffects)(i,!!e.logMissingFeatures),(0,x.skipBytes)(e,n())},function(e,t,n,r){var i=(0,C.serializeEffects)(t.effects,!!r.logMissingFeatures,!0);(0,_.writeUint32)(e,0),(0,C.writeVersionAndDescriptor)(e,"","null",i)});Y("cinf",Le("compositorUsed"),function(e,t,n){var r=(0,C.readVersionAndDescriptor)(e);function i(o){return o.split(".")[1]}t.compositorUsed={description:r.description,reason:r.reason,engine:i(r.Engn)},r.Vrsn&&(t.compositorUsed.version=r.Vrsn),r.psVersion&&(t.compositorUsed.photoshopVersion=r.psVersion),r.enableCompCore&&(t.compositorUsed.enableCompCore=i(r.enableCompCore)),r.enableCompCoreGPU&&(t.compositorUsed.enableCompCoreGPU=i(r.enableCompCoreGPU)),r.enableCompCoreThreads&&(t.compositorUsed.enableCompCoreThreads=i(r.enableCompCoreThreads)),r.compCoreSupport&&(t.compositorUsed.compCoreSupport=i(r.compCoreSupport)),r.compCoreGPUSupport&&(t.compositorUsed.compCoreGPUSupport=i(r.compCoreGPUSupport)),(0,x.skipBytes)(e,n())},function(e,t){var n=t.compositorUsed,r={Vrsn:n.version||{major:1,minor:0,fix:0}};n.photoshopVersion&&(r.psVersion=n.photoshopVersion),r.description=n.description,r.reason=n.reason,r.Engn="Engn.".concat(n.engine),n.enableCompCore&&(r.enableCompCore="enable.".concat(n.enableCompCore)),n.enableCompCoreGPU&&(r.enableCompCoreGPU="enable.".concat(n.enableCompCoreGPU)),n.enableCompCoreThreads&&(r.enableCompCoreThreads="enable.".concat(n.enableCompCoreThreads)),n.compCoreSupport&&(r.compCoreSupport="reason.".concat(n.compCoreSupport)),n.compCoreGPUSupport&&(r.compCoreGPUSupport="reason.".concat(n.compCoreGPUSupport)),(0,C.writeVersionAndDescriptor)(e,"","null",r)});Y("extn",function(e){return e._extn!==void 0},function(e,t){var n=(0,C.readVersionAndDescriptor)(e);on.MOCK_HANDLERS&&(t._extn=n)},function(e,t){on.MOCK_HANDLERS&&(0,C.writeVersionAndDescriptor)(e,"","null",t._extn)});Y("iOpa",Le("fillOpacity"),function(e,t){t.fillOpacity=(0,x.readUint8)(e)/255,(0,x.skipBytes)(e,3)},function(e,t){(0,_.writeUint8)(e,t.fillOpacity*255),(0,_.writeZeros)(e,3)});Y("brst",Le("channelBlendingRestrictions"),function(e,t,n){for(t.channelBlendingRestrictions=[];n()>4;)t.channelBlendingRestrictions.push((0,x.readInt32)(e))},function(e,t){for(var n=0,r=t.channelBlendingRestrictions;n<r.length;n++){var i=r[n];(0,_.writeInt32)(e,i)}});Y("tsly",Le("transparencyShapesLayer"),function(e,t){t.transparencyShapesLayer=!!(0,x.readUint8)(e),(0,x.skipBytes)(e,3)},function(e,t){(0,_.writeUint8)(e,t.transparencyShapesLayer?1:0),(0,_.writeZeros)(e,3)})});var Oo=de(ie=>{"use strict";var ai=ie&&ie.__assign||function(){return ai=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ai.apply(this,arguments)};Object.defineProperty(ie,"__esModule",{value:!0});ie.writeColor=ie.writePsd=ie.writeSection=ie.writeUnicodeStringWithPadding=ie.writeUnicodeString=ie.writeUnicodeStringWithoutLengthLE=ie.writeUnicodeStringWithoutLength=ie.writePascalString=ie.writeSignature=ie.writeZeros=ie.writeBytes=ie.writeFixedPointPath32=ie.writeFixedPoint32=ie.writeFloat64=ie.writeFloat32=ie.writeUint32=ie.writeInt32LE=ie.writeInt32=ie.writeUint16LE=ie.writeUint16=ie.writeInt16=ie.writeUint8=ie.getWriterBufferNoCopy=ie.getWriterBuffer=ie.createWriter=void 0;var ct=ti(),BC=ku(),zC=K0();function VC(e){e===void 0&&(e=4096);var t=new ArrayBuffer(e),n=new DataView(t),r=0;return{buffer:t,view:n,offset:r,tempBuffer:void 0}}ie.createWriter=VC;function HC(e){return e.buffer.slice(0,e.offset)}ie.getWriterBuffer=HC;function GC(e){return new Uint8Array(e.buffer,0,e.offset)}ie.getWriterBufferNoCopy=GC;function Be(e,t){var n=xr(e,1);e.view.setUint8(n,t)}ie.writeUint8=Be;function Yo(e,t){var n=xr(e,2);e.view.setInt16(n,t,!1)}ie.writeInt16=Yo;function ce(e,t){var n=xr(e,2);e.view.setUint16(n,t,!1)}ie.writeUint16=ce;function lw(e,t){var n=xr(e,2);e.view.setUint16(n,t,!0)}ie.writeUint16LE=lw;function Nt(e,t){var n=xr(e,4);e.view.setInt32(n,t,!1)}ie.writeInt32=Nt;function WC(e,t){var n=xr(e,4);e.view.setInt32(n,t,!0)}ie.writeInt32LE=WC;function Sr(e,t){var n=xr(e,4);e.view.setUint32(n,t,!1)}ie.writeUint32=Sr;function jC(e,t){var n=xr(e,4);e.view.setFloat32(n,t,!1)}ie.writeFloat32=jC;function Sp(e,t){var n=xr(e,8);e.view.setFloat64(n,t,!1)}ie.writeFloat64=Sp;function $C(e,t){Nt(e,t*65536)}ie.writeFixedPoint32=$C;function YC(e,t){Nt(e,t*(1<<24))}ie.writeFixedPointPath32=YC;function Hu(e,t){if(t){pw(e,e.offset+t.length);var n=new Uint8Array(e.buffer);n.set(t,e.offset),e.offset+=t.length}}ie.writeBytes=Hu;function Xo(e,t){for(var n=0;n<t;n++)Be(e,0)}ie.writeZeros=Xo;function Bi(e,t){if(t.length!==4)throw new Error("Invalid signature: '".concat(t,"'"));for(var n=0;n<4;n++)Be(e,t.charCodeAt(n))}ie.writeSignature=Bi;function xp(e,t,n){var r=t.length;if(r>255)throw new Error("String too long");Be(e,r);for(var i=0;i<r;i++){var o=t.charCodeAt(i);Be(e,o<128?o:63)}for(;++r%n;)Be(e,0)}ie.writePascalString=xp;function sw(e,t){for(var n=0;n<t.length;n++)ce(e,t.charCodeAt(n))}ie.writeUnicodeStringWithoutLength=sw;function XC(e,t){for(var n=0;n<t.length;n++)lw(e,t.charCodeAt(n))}ie.writeUnicodeStringWithoutLengthLE=XC;function ZC(e,t){Sr(e,t.length),sw(e,t)}ie.writeUnicodeString=ZC;function KC(e,t){Sr(e,t.length+1);for(var n=0;n<t.length;n++)ce(e,t.charCodeAt(n));ce(e,0)}ie.writeUnicodeStringWithPadding=KC;function uw(e){e===void 0&&(e=[]);for(var t=0,n=0,r=e;n<r.length;n++){var i=r[n];if(i.canvas||i.imageData){var o=_p(i),a=o.width,l=o.height;t=Math.max(t,2*l+2*a*l)}i.children&&(t=Math.max(t,uw(i.children)))}return t}function Mn(e,t,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=!1),i&&Sr(e,0);var o=e.offset;Sr(e,0),n();for(var a=e.offset-o-4,l=a;l%t!==0;)Be(e,0),l++;r&&(a=l),e.view.setUint32(o,a,!1)}ie.writeSection=Mn;function cw(e){var t;(t=e.children)===null||t===void 0||t.forEach(cw);var n=e.imageData;if(n&&(n.data instanceof Uint32Array||n.data instanceof Uint16Array))throw new Error("imageData has incorrect bitDepth");if("mask"in e&&e.mask){var r=e.mask.imageData;if(r&&(r.data instanceof Uint32Array||r.data instanceof Uint16Array))throw new Error("mask imageData has incorrect bitDepth")}}function qC(e,t,n){var r;if(n===void 0&&(n={}),!(+t.width>0&&+t.height>0))throw new Error("Invalid document size");if((t.width>3e4||t.height>3e4)&&!n.psb)throw new Error("Document size is too large (max is 30000x30000, use PSB format instead)");var i=(r=t.bitsPerChannel)!==null&&r!==void 0?r:8;if(i!==8)throw new Error("bitsPerChannel other than 8 are not supported for writing");cw(t);var o=ai({},t.imageResources),a=ai(ai({},n),{layerIds:new Set,layerToId:new Map});a.generateThumbnail&&(o.thumbnail=rI(t));var l=t.imageData;if(!l&&t.canvas&&(l=t.canvas.getContext("2d").getImageData(0,0,t.canvas.width,t.canvas.height)),l&&(t.width!==l.width||t.height!==l.height))throw new Error("Document canvas must have the same size as document");var s=!!l&&(0,ct.hasAlpha)(l),u=Math.max(uw(t.children),4*2*t.width*t.height+2*t.height);e.tempBuffer=new Uint8Array(u),Bi(e,"8BPS"),ce(e,n.psb?2:1),Xo(e,6),ce(e,s?4:3),Sr(e,t.height),Sr(e,t.width),ce(e,i),ce(e,3),Mn(e,1,function(){var I,T,L;if(t.palette){for(var A=0;A<256;A++)Be(e,((I=t.palette[A])===null||I===void 0?void 0:I.r)||0);for(var A=0;A<256;A++)Be(e,((T=t.palette[A])===null||T===void 0?void 0:T.g)||0);for(var A=0;A<256;A++)Be(e,((L=t.palette[A])===null||L===void 0?void 0:L.b)||0)}});var c=[];fw(c,t.children),c.length||c.push({}),o.layersGroup=c.map(function(I){return I.linkGroup||0}),o.layerGroupsEnabledId=c.map(function(I){return I.linkGroupEnabled==!1?0:1}),Mn(e,1,function(){for(var I=function(O){for(var R=O.has(o),F=R===!1?0:R===!0?1:R,q=function(b){Bi(e,"8BIM"),ce(e,O.key),xp(e,"",2),Mn(e,2,function(){return O.write(e,o,b)})},D=0;D<F;D++)q(D)},T=0,L=zC.resourceHandlers;T<L.length;T++){var A=L[T];I(A)}}),Mn(e,2,function(){QC(e,c,t,s,a),tI(e,t.globalLayerMaskInfo),dw(e,t,t,a)},void 0,!!a.psb);var p=s?[0,1,2,3]:[0,1,2],d=l?l.width:t.width,g=l?l.height:t.height,y={data:new Uint8Array(d*g*4),width:d,height:g};if(ce(e,1),ct.RAW_IMAGE_DATA&&t.imageDataRaw)console.log("writing raw image data"),Hu(e,t.imageDataRaw);else{if(l&&y.data.set(new Uint8Array(l.data.buffer,l.data.byteOffset,l.data.byteLength)),s)for(var v=y.width*y.height*4,S=y.data,m=0;m<v;m+=4){var f=S[m+3];if(f!=0&&f!=255){var h=f/255,w=255*(1-h);S[m+0]=S[m+0]*h+w,S[m+1]=S[m+1]*h+w,S[m+2]=S[m+2]*h+w}}Hu(e,(0,ct.writeDataRLE)(e.tempBuffer,y,p,!!n.psb))}}ie.writePsd=qC;function QC(e,t,n,r,i){Mn(e,4,function(){var o;Yo(e,r?-t.length:t.length);for(var a=t.map(function(S,m){return iI(e.tempBuffer,S,m===0,i)}),l=function(S){var m=S.layer,f=S.top,h=S.left,w=S.bottom,I=S.right,T=S.channels;Nt(e,f),Nt(e,h),Nt(e,w),Nt(e,I),ce(e,T.length);for(var L=0,A=T;L<A.length;L++){var O=A[L];Yo(e,O.channelId),i.psb&&Sr(e,0),Sr(e,O.length)}Bi(e,"8BIM"),Bi(e,ct.fromBlendMode[m.blendMode]||"norm"),Be(e,Math.round((0,ct.clamp)((o=m.opacity)!==null&&o!==void 0?o:1,0,1)*255)),Be(e,m.clipping?1:0);var R=8;m.transparencyProtected&&(R|=1),m.hidden&&(R|=2),(m.vectorMask||m.sectionDivider&&m.sectionDivider.type!==0||m.adjustment)&&(R|=16),m.effectsOpen&&(R|=32),Be(e,R),Be(e,0),Mn(e,1,function(){JC(e,m,S),eI(e,m),xp(e,(m.name||"").substring(0,255),4),dw(e,m,n,i)})},s=0,u=a;s<u.length;s++){var c=u[s];l(c)}for(var p=0,d=a;p<d.length;p++)for(var c=d[p],g=0,y=c.channels;g<y.length;g++){var v=y[g];ce(e,v.compression),v.buffer&&Hu(e,v.buffer)}},!0,i.psb)}function JC(e,t,n){var r=t.mask,i=t.realMask;Mn(e,1,function(){if(!(!r&&!i)){var o=0,a=0,l=0;r&&(r.userMaskDensity!==void 0&&(o|=1),r.userMaskFeather!==void 0&&(o|=2),r.vectorMaskDensity!==void 0&&(o|=4),r.vectorMaskFeather!==void 0&&(o|=8),r.disabled&&(a|=2),r.positionRelativeToLayer&&(a|=1),r.fromVectorData&&(a|=8),o&&(a|=16));var s=n.mask||{};if(Nt(e,s.top||0),Nt(e,s.left||0),Nt(e,s.bottom||0),Nt(e,s.right||0),Be(e,r&&r.defaultColor||0),Be(e,a),i){i.disabled&&(l|=2),i.positionRelativeToLayer&&(l|=1),i.fromVectorData&&(l|=8);var u=n.realMask||{};Be(e,l),Be(e,i.defaultColor||0),Nt(e,u.top||0),Nt(e,u.left||0),Nt(e,u.bottom||0),Nt(e,u.right||0)}o&&r&&(Be(e,o),r.userMaskDensity!==void 0&&Be(e,Math.round(r.userMaskDensity*255)),r.userMaskFeather!==void 0&&Sp(e,r.userMaskFeather),r.vectorMaskDensity!==void 0&&Be(e,Math.round(r.vectorMaskDensity*255)),r.vectorMaskFeather!==void 0&&Sp(e,r.vectorMaskFeather)),Xo(e,2)}})}function Vu(e,t){Be(e,t[0]),Be(e,t[1]),Be(e,t[2]),Be(e,t[3])}function eI(e,t){Mn(e,1,function(){var n=t.blendingRanges;if(n){Vu(e,n.compositeGrayBlendSource),Vu(e,n.compositeGraphBlendDestinationRange);for(var r=0,i=n.ranges;r<i.length;r++){var o=i[r];Vu(e,o.sourceRange),Vu(e,o.destRange)}}})}function tI(e,t){Mn(e,1,function(){t&&(ce(e,t.overlayColorSpace),ce(e,t.colorSpace1),ce(e,t.colorSpace2),ce(e,t.colorSpace3),ce(e,t.colorSpace4),ce(e,t.opacity*255),Be(e,t.kind),Xo(e,3))})}function dw(e,t,n,r){for(var i=function(s){var u=s.key;if(u==="Txt2"&&r.invalidateTextLayers)return"continue";if(u==="vmsk"&&r.psb&&(u="vsms"),s.has(t)){var c=r.psb&&ct.largeAdditionalInfoKeys.indexOf(u)!==-1,p=u!=="Txt2"&&u!=="cinf"&&u!=="extn"&&u!=="CAI "&&u!=="OCIO",d=u==="Txt2"||u==="luni"||u==="vmsk"||u==="artb"||u==="artd"||u==="vogk"||u==="SoLd"||u==="lnk2"||u==="vscg"||u==="vsms"||u==="GdFl"||u==="lmfx"||u==="lrFX"||u==="cinf"||u==="PlLd"||u==="Anno"||u==="CAI "||u==="OCIO"||u==="GenI"||u==="FEid";Bi(e,c?"8B64":"8BIM"),Bi(e,u),Mn(e,d?4:2,function(){s.write(e,t,n,r)},p,c)}},o=0,a=BC.infoHandlers;o<a.length;o++){var l=a[o];i(l)}}function fw(e,t){if(t)for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i.children&&i.canvas)throw new Error("Invalid layer, cannot have both 'canvas' and 'children' properties");if(i.children&&i.imageData)throw new Error("Invalid layer, cannot have both 'imageData' and 'children' properties");i.children?(e.push({name:"</Layer group>",sectionDivider:{type:3}}),fw(e,i.children),e.push(ai(ai({},i),{blendMode:i.blendMode==="pass through"?"normal":i.blendMode,sectionDivider:{type:i.opened===!1?2:1,key:ct.fromBlendMode[i.blendMode]||"pass",subType:0}}))):e.push(ai({},i))}}function nI(e,t){var n=e.buffer.byteLength;do n*=2;while(t>n);var r=new ArrayBuffer(n),i=new Uint8Array(r),o=new Uint8Array(e.buffer);i.set(o),e.buffer=r,e.view=new DataView(e.buffer)}function pw(e,t){t>e.buffer.byteLength&&nI(e,t)}function xr(e,t){var n=e.offset;return pw(e,e.offset+=t),n}function rI(e){var t=(0,ct.createCanvas)(10,10),n=1;e.width>e.height?(t.width=160,t.height=Math.floor(e.height*(t.width/e.width)),n=t.width/e.width):(t.height=160,t.width=Math.floor(e.width*(t.height/e.height)),n=t.height/e.height);var r=t.getContext("2d");return r.scale(n,n),e.imageData?r.drawImage((0,ct.imageDataToCanvas)(e.imageData),0,0):e.canvas&&r.drawImage(e.canvas,0,0),t}function iw(e,t,n,r,i,o){var a=r.top|0,l=r.left|0,s=r.right|0,u=r.bottom|0,c=_p(r),p=c.width,d=c.height,g=r.imageData;if(!g&&r.canvas&&p&&d&&(g=r.canvas.getContext("2d").getImageData(0,0,p,d)),p&&d&&g){if(s=l+p,u=a+d,g.width!==p||g.height!==d)throw new Error("Invalid imageData dimentions");var y=void 0,v=void 0;ct.RAW_IMAGE_DATA&&n[o?"realMaskDataRaw":"maskDataRaw"]?(y=n[o?"realMaskDataRaw":"maskDataRaw"],v=n[o?"realMaskDataRawCompression":"maskDataRawCompression"]):i.compress?(y=(0,ct.writeDataZipWithoutPrediction)(g,[0]),v=2):(y=(0,ct.writeDataRLE)(e,g,[0],!!i.psb),v=1),t.channels.push({channelId:o?-3:-2,compression:v,buffer:y,length:2+y.length})}t[o?"realMask":"mask"]={top:a,left:l,right:s,bottom:u}}function iI(e,t,n,r){var i=aI(e,t,n,r);return t.mask&&iw(e,i,t,t.mask,r,!1),t.realMask&&iw(e,i,t,t.realMask,r,!0),i}function _p(e){var t=e.canvas,n=e.imageData;return n||t||{width:0,height:0}}function oI(e,t,n,r,i){if(e.data instanceof Uint32Array||e.data instanceof Uint16Array)throw new Error("imageData has incorrect bit depth");for(var o=(0,ct.createImageData)(r,i),a=e.data,l=o.data,s=0;s<i;s++)for(var u=0;u<r;u++){var c=(u+t+(s+n)*e.width)*4,p=(u+s*r)*4;l[p]=a[c],l[p+1]=a[c+1],l[p+2]=a[c+2],l[p+3]=a[c+3]}return o}function aI(e,t,n,r){var i,o=t.top|0,a=t.left|0,l=t.right|0,s=t.bottom|0,u=[{channelId:-1,compression:0,buffer:void 0,length:2},{channelId:0,compression:0,buffer:void 0,length:2},{channelId:1,compression:0,buffer:void 0,length:2},{channelId:2,compression:0,buffer:void 0,length:2}],c=_p(t),p=c.width,d=c.height;if(!(t.canvas||t.imageData)||!p||!d)return l=a,s=o,{layer:t,top:o,left:a,right:l,bottom:s,channels:u};l=a+p,s=o+d;var g=t.imageData||t.canvas.getContext("2d").getImageData(0,0,p,d);if(r.trimImageData){var y=lI(g);if(y.left!==0||y.top!==0||y.right!==g.width||y.bottom!==g.height){if(a+=y.left,o+=y.top,l-=g.width-y.right,s-=g.height-y.bottom,p=l-a,d=s-o,!p||!d)return{layer:t,top:o,left:a,right:l,bottom:s,channels:u};g=oI(g,y.left,y.top,p,d)}}var v=[0,1,2];return(!n||r.noBackground||t.mask||(0,ct.hasAlpha)(g)||ct.RAW_IMAGE_DATA&&(!((i=t.imageDataRaw)===null||i===void 0)&&i[-1]))&&v.unshift(-1),u=v.map(function(S){var m=(0,ct.offsetForChannel)(S,!1),f,h;return ct.RAW_IMAGE_DATA&&t.imageDataRaw?(f=t.imageDataRaw[S],h=t.imageDataRawCompression[S]):r.compress?(f=(0,ct.writeDataZipWithoutPrediction)(g,[m]),h=2):(f=(0,ct.writeDataRLE)(e,g,[m],!!r.psb),h=1),{channelId:S,compression:h,buffer:f,length:2+f.length}}),{layer:t,top:o,left:a,right:l,bottom:s,channels:u}}function ow(e,t,n,r){for(var i=e.data,o=e.width,a=(t*o+n)*4+3|0,l=a+(r-n)*4|0,s=a;s<l;s=s+4|0)if(i[s]!==0)return!1;return!0}function aw(e,t,n,r){for(var i=e.data,o=e.width,a=o*4|0,l=n*a+t*4+3|0,s=n,u=l;s<r;s++,u=u+a|0)if(i[u]!==0)return!1;return!0}function lI(e){for(var t=0,n=0,r=e.width,i=e.height;t<i&&ow(e,t,n,r);)t++;for(;i>t&&ow(e,i-1,n,r);)i--;for(;n<r&&aw(e,n,t,i);)n++;for(;r>n&&aw(e,r-1,t,i);)r--;return{top:t,left:n,right:r,bottom:i}}function sI(e,t){t?"r"in t?(ce(e,0),ce(e,Math.round(t.r*257)),ce(e,Math.round(t.g*257)),ce(e,Math.round(t.b*257)),ce(e,0)):"fr"in t?(ce(e,0),ce(e,Math.round(t.fr*255*257)),ce(e,Math.round(t.fg*255*257)),ce(e,Math.round(t.fb*255*257)),ce(e,0)):"l"in t?(ce(e,7),Yo(e,Math.round(t.l*1e4)),Yo(e,Math.round(t.a<0?t.a*12800:t.a*12700)),Yo(e,Math.round(t.b<0?t.b*12800:t.b*12700)),ce(e,0)):"h"in t?(ce(e,1),ce(e,Math.round(t.h*65535)),ce(e,Math.round(t.s*65535)),ce(e,Math.round(t.b*65535)),ce(e,0)):"c"in t?(ce(e,2),ce(e,Math.round(t.c*257)),ce(e,Math.round(t.m*257)),ce(e,Math.round(t.y*257)),ce(e,Math.round(t.k*257))):(ce(e,8),ce(e,Math.round(t.k*1e4/255)),Xo(e,6)):(ce(e,0),Xo(e,8))}ie.writeColor=sI});var mw=de(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.readAbr=void 0;var We=Su(),dt=ni(),uI=["off","fade","pen pressure","pen tilt","stylus wheel","initial direction","direction","initial rotation","rotation"],cI={_:"brush",MixB:"mixer brush",SmTl:"smudge brush"};function Pt(e){return{control:uI[e.bVTy],steps:e.fStp,jitter:(0,We.parsePercent)(e.jitter),minimum:(0,We.parsePercent)(e["Mnm "])}}function hw(e){var t={size:(0,We.parseUnitsToNumber)(e.Dmtr,"Pixels"),angle:(0,We.parseAngle)(e.Angl),roundness:(0,We.parsePercent)(e.Rndn),spacingOn:e.Intr,spacing:(0,We.parsePercent)(e.Spcn),flipX:e.flipX,flipY:e.flipY};return e["Nm  "]&&(t.name=e["Nm  "]),e.Hrdn&&(t.hardness=(0,We.parsePercent)(e.Hrdn)),e.sampledData&&(t.sampledData=e.sampledData),t}function dI(e,t){var n,r,i,o;t===void 0&&(t={});var a=(0,dt.createReader)(e.buffer,e.byteOffset,e.byteLength),l=(0,dt.readInt16)(a),s=[],u=[],c=[];if(l===1||l===2)throw new Error("Unsupported ABR version (".concat(l,")"));if(l===6||l===7||l===9||l===10){var p=(0,dt.readInt16)(a);if(p!==1&&p!==2)throw new Error("Unsupported ABR minor version");for(;a.offset<a.view.byteLength;){(0,dt.checkSignature)(a,"8BIM");var d=(0,dt.readSignature)(a),g=(0,dt.readUint32)(a),y=a.offset+g;switch(d){case"samp":{for(;a.offset<y;){for(var v=(0,dt.readUint32)(a);v&3;)v++;var S=a.offset+v,m=(0,dt.readPascalString)(a,1);(0,dt.skipBytes)(a,p===1?10:264);var f=(0,dt.readInt32)(a),h=(0,dt.readInt32)(a),w=(0,dt.readInt32)(a)-f,I=(0,dt.readInt32)(a)-h;if(I<=0||w<=0)throw new Error("Invalid bounds");var T=(0,dt.readInt16)(a),L=(0,dt.readUint8)(a),A=new Uint8Array(I*w);if(T===8)if(L===0)A.set((0,dt.readBytes)(a,A.byteLength));else if(L===1)(0,dt.readDataRLE)(a,{width:I,height:w,data:A},I,w,T,1,[0],!1);else throw new Error("Invalid compression");else if(T===16)if(L===0)for(var O=0;O<A.byteLength;O++)A[O]=(0,dt.readUint16)(a)>>8;else throw L===1?new Error("not implemented (16bit RLE)"):new Error("Invalid compression");else throw new Error("Invalid depth");s.push({id:m,bounds:{x:h,y:f,w:I,h:w},alpha:A}),a.offset=S}break}case"desc":{for(var R=(0,We.readVersionAndDescriptor)(a,!0),F=0,q=R.Brsh;F<q.length;F++){var D=q[F],b={name:D["Nm  "],shape:hw(D.Brsh),spacing:(0,We.parsePercent)(D.Spcn),wetEdges:D.Wtdg,noise:D.Nose,useBrushSize:D.useBrushSize};D.interpretation!=null&&(b.interpretation=D.interpretation),D.protectTexture!=null&&(b.protectTexture=D.protectTexture),D.useTipDynamics&&(b.shapeDynamics={tiltScale:(0,We.parsePercent)(D.tiltScale),sizeDynamics:Pt(D.szVr),angleDynamics:Pt(D.angleDynamics),roundnessDynamics:Pt(D.roundnessDynamics),flipX:D.flipX,flipY:D.flipY,brushProjection:D.brushProjection,minimumDiameter:(0,We.parsePercent)(D.minimumDiameter),minimumRoundness:(0,We.parsePercent)(D.minimumRoundness)}),D.useScatter&&(b.scatter={count:D["Cnt "],bothAxes:D.bothAxes,countDynamics:Pt(D.countDynamics),scatterDynamics:Pt(D.scatterDynamics)}),D.useTexture&&D.Txtr&&(b.texture={id:D.Txtr.Idnt,name:D.Txtr["Nm  "],blendMode:We.BlnM.decode(D.textureBlendMode),depth:(0,We.parsePercent)(D.textureDepth),depthMinimum:(0,We.parsePercent)(D.minimumDepth),depthDynamics:Pt(D.textureDepthDynamics),scale:(0,We.parsePercent)(D.textureScale),invert:D.InvT,brightness:D.textureBrightness,contrast:D.textureContrast});var k=D.dualBrush;k&&k.useDualBrush&&(b.dualBrush={flip:k.Flip,shape:hw(k.Brsh),blendMode:We.BlnM.decode(k.BlnM),useScatter:k.useScatter,spacing:(0,We.parsePercent)(k.Spcn),count:k["Cnt "],bothAxes:k.bothAxes,countDynamics:Pt(k.countDynamics),scatterDynamics:Pt(k.scatterDynamics)}),D.useColorDynamics&&(b.colorDynamics={foregroundBackground:Pt(D.clVr),hue:(0,We.parsePercent)(D["H   "]),saturation:(0,We.parsePercent)(D.Strt),brightness:(0,We.parsePercent)(D.Brgh),purity:(0,We.parsePercent)(D.purity),perTip:D.colorDynamicsPerTip}),D.usePaintDynamics&&(b.transfer={flowDynamics:Pt(D.prVr),opacityDynamics:Pt(D.opVr),wetnessDynamics:Pt(D.wtVr),mixDynamics:Pt(D.mxVr)}),D.useBrushPose&&(b.brushPose={overrideAngle:D.overridePoseAngle,overrideTiltX:D.overridePoseTiltX,overrideTiltY:D.overridePoseTiltY,overridePressure:D.overridePosePressure,pressure:(0,We.parsePercent)(D.brushPosePressure),tiltX:D.brushPoseTiltX,tiltY:D.brushPoseTiltY,angle:D.brushPoseAngle});var M=D.toolOptions;M&&(b.toolOptions={type:cI[M._classID]||"brush",brushPreset:M.brushPreset,flow:(n=M.flow)!==null&&n!==void 0?n:100,smooth:(r=M.Smoo)!==null&&r!==void 0?r:0,mode:We.BlnM.decode(M["Md  "]||"BlnM.Nrml"),opacity:(i=M.Opct)!==null&&i!==void 0?i:100,smoothing:!!M.smoothing,smoothingValue:M.smoothingValue||0,smoothingRadiusMode:!!M.smoothingRadiusMode,smoothingCatchup:!!M.smoothingCatchup,smoothingCatchupAtEnd:!!M.smoothingCatchupAtEnd,smoothingZoomCompensation:!!M.smoothingZoomCompensation,pressureSmoothing:!!M.pressureSmoothing,usePressureOverridesSize:!!M.usePressureOverridesSize,usePressureOverridesOpacity:!!M.usePressureOverridesOpacity,useLegacy:!!M.useLegacy},M.prVr&&(b.toolOptions.flowDynamics=Pt(M.prVr)),M.opVr&&(b.toolOptions.opacityDynamics=Pt(M.opVr)),M.szVr&&(b.toolOptions.sizeDynamics=Pt(M.szVr)),"wetness"in M&&(b.toolOptions.wetness=M.wetness),"dryness"in M&&(b.toolOptions.dryness=M.dryness),"mix"in M&&(b.toolOptions.mix=M.mix),"autoFill"in M&&(b.toolOptions.autoFill=M.autoFill),"autoClean"in M&&(b.toolOptions.autoClean=M.autoClean),"loadSolidColorOnly"in M&&(b.toolOptions.loadSolidColorOnly=M.loadSolidColorOnly),"sampleAllLayers"in M&&(b.toolOptions.sampleAllLayers=M.sampleAllLayers),"SmdF"in M&&(b.toolOptions.smudgeFingerPainting=M.SmdF),"SmdS"in M&&(b.toolOptions.smudgeSampleAllLayers=M.SmdS),"Prs "in M&&(b.toolOptions.strength=M["Prs "]),"SmdF"in M&&(b.toolOptions.smudgeFingerPainting=M.SmdF),"SmdS"in M&&(b.toolOptions.smudgeSampleAllLayers=M.SmdS)),u.push(b)}break}case"patt":{a.offset<y&&(c.push((0,dt.readPattern)(a)),a.offset=y);break}case"phry":{var R=(0,We.readVersionAndDescriptor)(a);t.logMissingFeatures&&!((o=R.hierarchy)===null||o===void 0)&&o.length&&console.log("unhandled phry section",R);break}default:throw new Error("Invalid brush type: ".concat(d))}for(;g%4;)a.offset++,g++}}else throw new Error("Unsupported ABR version (".concat(l,")"));return{samples:s,patterns:c,brushes:u}}Gu.readAbr=dI});var gw=de(Zo=>{"use strict";var Ep=Zo&&Zo.__assign||function(){return Ep=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ep.apply(this,arguments)};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.readCsh=void 0;var fI=ku(),Sn=ni();function pI(e){var t=(0,Sn.createReader)(e.buffer,e.byteOffset,e.byteLength),n={shapes:[]};if((0,Sn.checkSignature)(t,"cush"),(0,Sn.readUint32)(t)!==2)throw new Error("Invalid version");for(var r=(0,Sn.readUint32)(t),i=0;i<r;i++){for(var o=(0,Sn.readUnicodeString)(t);t.offset%4;)t.offset++;if((0,Sn.readUint32)(t)!==1)throw new Error("Invalid shape version");var a=(0,Sn.readUint32)(t),l=t.offset+a,s=(0,Sn.readPascalString)(t,1),u=(0,Sn.readUint32)(t),c=(0,Sn.readUint32)(t),p=(0,Sn.readUint32)(t),d=(0,Sn.readUint32)(t),g=d-c,y=p-u,v={paths:[]};(0,fI.readVectorMask)(t,v,g,y,l-t.offset),n.shapes.push(Ep({name:o,id:s,width:g,height:y},v)),t.offset=l}return n}Zo.readCsh=pI});var vw=de(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.LayerCompCapturedInfo=Rn.SectionDividerType=Rn.ColorMode=void 0;var hI;(function(e){e[e.Bitmap=0]="Bitmap",e[e.Grayscale=1]="Grayscale",e[e.Indexed=2]="Indexed",e[e.RGB=3]="RGB",e[e.CMYK=4]="CMYK",e[e.Multichannel=7]="Multichannel",e[e.Duotone=8]="Duotone",e[e.Lab=9]="Lab"})(hI=Rn.ColorMode||(Rn.ColorMode={}));var mI;(function(e){e[e.Other=0]="Other",e[e.OpenFolder=1]="OpenFolder",e[e.ClosedFolder=2]="ClosedFolder",e[e.BoundingSectionDivider=3]="BoundingSectionDivider"})(mI=Rn.SectionDividerType||(Rn.SectionDividerType={}));var gI;(function(e){e[e.None=0]="None",e[e.Visibility=1]="Visibility",e[e.Position=2]="Position",e[e.Appearance=4]="Appearance"})(gI=Rn.LayerCompCapturedInfo||(Rn.LayerCompCapturedInfo={}))});var El=de(nt=>{"use strict";var vI=nt&&nt.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Cp=nt&&nt.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&vI(t,e,n)};Object.defineProperty(nt,"__esModule",{value:!0});nt.writePsdBuffer=nt.writePsdUint8Array=nt.writePsd=nt.readPsd=nt.byteArrayToBase64=nt.initializeCanvas=void 0;var Ko=Oo(),bp=ni(),yI=qa();Cp(mw(),nt);Cp(gw(),nt);var wI=ti();Object.defineProperty(nt,"initializeCanvas",{enumerable:!0,get:function(){return wI.initializeCanvas}});Cp(vw(),nt);nt.byteArrayToBase64=yI.fromByteArray;function SI(e,t){var n="buffer"in e?(0,bp.createReader)(e.buffer,e.byteOffset,e.byteLength):(0,bp.createReader)(e);return(0,bp.readPsd)(n,t)}nt.readPsd=SI;function xI(e,t){var n=(0,Ko.createWriter)();return(0,Ko.writePsd)(n,e,t),(0,Ko.getWriterBuffer)(n)}nt.writePsd=xI;function yw(e,t){var n=(0,Ko.createWriter)();return(0,Ko.writePsd)(n,e,t),(0,Ko.getWriterBufferNoCopy)(n)}nt.writePsdUint8Array=yw;function _I(e,t){if(typeof Buffer=="undefined")throw new Error("Buffer not supported on this platform");return Buffer.from(yw(e,t))}nt.writePsdBuffer=_I});var zw=de(uc=>{"use strict";var AI=ft(),kI=Symbol.for("react.element"),DI=Symbol.for("react.fragment"),MI=Object.prototype.hasOwnProperty,RI=AI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OI={key:!0,ref:!0,__self:!0,__source:!0};function Bw(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)MI.call(t,r)&&!OI.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:kI,type:e,key:o,ref:a,props:i,_owner:RI.current}}uc.Fragment=DI;uc.jsx=Bw;uc.jsxs=Bw});var ke=de((BP,Vw)=>{"use strict";Vw.exports=zw()});var $w=de((dc,jw)=>{(function(e,t){typeof dc=="object"&&typeof jw!="undefined"?t(dc):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.spectral={}))})(dc,function(e){"use strict";class r{constructor(...k){Al(this,"inGamut",({epsilon:k=0}={})=>i(this.lRGB,k));Al(this,"toGamut",({method:k="map"}={})=>{switch(k.toLowerCase()){case"clip":return new r(this.sRGB.map(M=>O.clamp(M,0,255)));case"map":return a(this);default:throw new TypeError(`Unknown method: '${k}'`)}});Al(this,"toString",({format:k="hex",method:M="map"}={})=>{let H;if(this.inGamut())H=this.sRGB;else switch(M.toLowerCase()){case"clip":H=this.sRGB.map(j=>O.clamp(j,0,255));break;case"map":H=a(this).sRGB;break;default:throw new TypeError(`Unknown method: '${M}'`)}switch(k.toLowerCase()){case"hex":return`#${H.map(j=>j.toString(16).padStart(2,"0")).join("").toUpperCase()}`;case"rgb":return`rgb(${H.join(", ")})`;default:throw new TypeError(`Unknown format: '${k}'`)}});k.length===1&&(typeof k[0]=="string"&&(this.sRGB=R(k[0]).slice(0,3),this.lRGB=y(this.sRGB),this.R=A(this.lRGB),this.XYZ=L(this.R)),Array.isArray(k[0])&&(k[0].length===38?(this.R=k[0],this.XYZ=L(this.R),this.lRGB=S(this.XYZ),this.sRGB=v(this.lRGB)):(this.sRGB=k[0],this.lRGB=y(this.sRGB),this.R=A(this.lRGB),this.XYZ=L(this.R))))}get OKLab(){var k;return(k=this._OKLab)!=null?k:this._OKLab=h(this.XYZ)}get OKLCh(){var k;return(k=this._OKLCh)!=null?k:this._OKLCh=I(this.OKLab)}get KS(){var k;return(k=this._KS)!=null?k:this._KS=this.R.map(M=>l(M))}get luminance(){var k;return(k=this._luminance)!=null?k:this._luminance=Math.max(Number.EPSILON,this.XYZ[1])}get tintingStrength(){var k;return(k=this._tintingStrength)!=null?k:this._tintingStrength=1}set tintingStrength(k){this._tintingStrength=k}}let i=(b,{epsilon:k=0}={})=>b.every(M=>M>=-k&&M<=1+k),o=(b,k)=>{let[M,H,j]=b,[ne,U,z]=k;return((M-ne)**2+(H-U)**2+(j-z)**2)**.5},a=(b,{jnd:k=.03,e:M=1e-4}={})=>{let H=b.OKLCh[0];if(H>=1)return new r([255,255,255]);if(H<=0)return new r([0,0,0]);if(i(b.lRGB))return b;let j=b.OKLCh[2],ne=0,U=b.OKLCh[1],z=!0,Q=b.lRGB,ee=f(Q.map(J=>O.clamp(J))),_e=o(ee,f(Q));if(_e<k)return new r(v(S(w(ee))));for(;U-ne>M;){let J=(ne+U)/2,ze=T([H,J,j]),sn=w(ze);if(Q=S(sn),z&&i(Q))ne=J;else if(ee=f(Q.map(xn=>O.clamp(xn))),_e=o(ee,ze),_e<k){if(k-_e<M)break;z=!1,ne=J}else U=J}return new r(v(S(w(ee))))},l=b=>(1-b)**2/(2*b),s=b=>1+b-(b**2+2*b)**.5,u=(...b)=>{let k=new Array(38);for(let M=0;M<38;M++){let H=0,j=0;for(let[ne,U]of b){let z=U**2*ne.tintingStrength**2*ne.luminance;j+=z,H+=ne.KS[M]*z}k[M]=s(H/j)}return new r(k)},c=(b,k,M)=>{let H=new Array(M);for(let j=0;j<M;j++)H[j]=u([b,M-1-j],[k,j]);return H},p=(b,...k)=>{let M=null,H=null;for(let[ne,U]of k)U<=b&&(!M||U>M[1])&&(M=[ne,U]),U>=b&&(!H||U<H[1])&&(H=[ne,U]);if(!M)return H[0];if(!H||M[1]===H[1])return M[0];let j=(b-M[1])/(H[1]-M[1]);return u([M[0],1-j],[H[0],j])},d=b=>b>.04045?((b+.055)/1.055)**2.4:b/12.92,g=b=>b>.0031308?1.055*b**(1/2.4)-.055:b*12.92,y=b=>b.map(k=>d(k/255)),v=b=>b.map(k=>Math.round(g(k)*255)),S=b=>O.mulMatVec(D.XYZ_RGB,b),m=b=>O.mulMatVec(D.RGB_XYZ,b),f=b=>h(m(b)),h=b=>{let k=O.mulMatVec(D.XYZ_LMS,b).map(M=>Math.cbrt(M));return O.mulMatVec(D.LMS_LAB,k)},w=b=>{let k=O.mulMatVec(D.LAB_LMS,b).map(M=>M**3);return O.mulMatVec(D.LMS_XYZ,k)},I=b=>{let[k,M,H]=b,j=(M*M+H*H)**.5,ne=Math.atan2(H,M)*180/Math.PI;return[k,j,ne>=0?ne:ne+360]},T=b=>{let[k,M,H]=b,j=M*Math.cos(H*Math.PI/180),ne=M*Math.sin(H*Math.PI/180);return[k,j,ne]},L=b=>O.mulMatVec(q.CMF,b),A=b=>{let k=Math.min(...b);b=[b[0]-k,b[1]-k,b[2]-k];let M=Math.min(b[1],b[2]),H=Math.min(b[0],b[2]),j=Math.min(b[0],b[1]),ne=Math.max(0,Math.min(b[0]-b[2],b[0]-b[1])),U=Math.max(0,Math.min(b[1]-b[2],b[1]-b[0])),z=Math.max(0,Math.min(b[2]-b[1],b[2]-b[0])),Q=new Array(38);for(let ee=0;ee<38;ee++)Q[ee]=Math.max(Number.EPSILON,k*F.W[ee]+M*F.C[ee]+H*F.M[ee]+j*F.Y[ee]+ne*F.R[ee]+U*F.G[ee]+z*F.B[ee]);return Q},O={lerp:(b,k,M)=>b+(k-b)*M,clamp:(b,k=0,M=1)=>Math.min(Math.max(b,k),M),dot:(b,k)=>b.reduce((M,H,j)=>M+H*k[j],0),mulMatVec:(b,k)=>b.map(M=>O.dot(M,k))},R=b=>b[0]==="#"?(b=b.length===4?b.replace(/./g,k=>k+k).slice(1):b.slice(1),[parseInt(b.substring(0,2),16),parseInt(b.substring(2,4),16),parseInt(b.substring(4,6),16),b.length===8?parseInt(b.substring(6,8),16)/255:1]):b.startsWith("rgb")?b.slice(b.indexOf("(")+1,-1).split(",").map((k,M)=>M<3&&k.includes("%")?Math.round(parseFloat(k)*2.55):parseFloat(k)):NaN,F=Object.freeze({W:[1.00116072718764,1.00116065159728,1.00116031922747,1.00115867270789,1.00115259844552,1.00113252528998,1.00108500663327,1.00099687889453,1.00086525152274,1.0006962900094,1.00050496114888,1.00030808187992,1.00011966602013,.999952765968407,.999821836899297,.999738609557593,.999709551639612,.999731930210627,.999799436346195,.999900330316671,1.00002040652611,1.00014478793658,1.00025997903412,1.00035579697089,1.00042753780269,1.00047623344888,1.00050720967508,1.00052519156373,1.00053509606896,1.00054022097482,1.00054272816784,1.00054389569087,1.00054448212151,1.00054476959992,1.00054489887762,1.00054496254689,1.00054498927058,1.000544996993],C:[.970585001322962,.970592498143425,.970625348729891,.970786806119017,.971368673228248,.973163230621252,.976740223158765,.981587605491377,.986280265652949,.989949147689134,.99249270153842,.994145680405256,.995183975033212,.995756750110818,.99591281828671,.995606157834528,.994597600961854,.99221571549237,.986236452783249,.967943337264541,.891285004244943,.536202477862053,.154108119001878,.0574575093228929,.0315349873107007,.0222633920086335,.0182022841492439,.016299055973264,.0153656239334613,.0149111568733976,.0146954339898235,.0145964146717719,.0145470156699655,.0145228771899495,.0145120341118965,.0145066940939832,.0145044507314479,.0145038009464639],M:[.990673557319988,.990671524961979,.990662582353421,.990618107644795,.99045148087871,.989871081400204,.98828660875964,.984290692797504,.973934905625306,.941817838460145,.817390326195156,.432472805065729,.13845397825887,.0537347216940033,.0292174996673231,.021313651750859,.0201349530181136,.0241323096280662,.0372236145223627,.0760506552706601,.205375471942399,.541268903460439,.815841685086486,.912817704123976,.946339830166962,.959927696331991,.966260595230312,.969325970058424,.970854536721399,.971605066528128,.971962769757392,.972127272274509,.972209417745812,.972249577678424,.972267621998742,.97227650946215,.972280243306874,.97228132482656],Y:[.0210523371789306,.0210564627517414,.0210746178695038,.0211649058448753,.0215027957272504,.0226738799041561,.0258235649693629,.0334879385639851,.0519069663740307,.100749014833473,.239129899706847,.534804312272748,.79780757864303,.911449894067384,.953797963004507,.971241615465429,.979303123807588,.983380119507575,.985461246567755,.986435046976605,.986738250670141,.986617882445032,.986277776758643,.985860592444056,.98547492767621,.985176934765558,.984971574014181,.984846303415712,.984775351811199,.984738066625265,.984719648311765,.984711023391939,.984706683300676,.984704554393091,.98470359630937,.984703124077552,.98470292561509,.984702868122795],R:[.0315605737777207,.0315520718330149,.0315148215513658,.0313318044982702,.0306729857725527,.0286480476989607,.0246450407045709,.0192960753663651,.0142066612220556,.0102942608878609,.0076191460521811,.005898041083542,.0048233247781713,.0042298748350633,.0040599171299341,.0043533695594676,.0053434425970201,.0076917201010463,.0135969795736536,.0316975442661115,.107861196355249,.463812603168704,.847055405272011,.943185409393918,.968862150696558,.978030667473603,.982043643854306,.983923623718707,.984845484154382,.985294275814596,.985507295219825,.985605071539837,.985653849933578,.985677685033883,.985688391806122,.985693664690031,.985695879848205,.985696521463762],G:[.0095560747554212,.0095581580120851,.0095673245444588,.0096129126297349,.0097837090401843,.010378622705871,.0120026452378567,.0160977721473922,.026706190223168,.0595555440185881,.186039826532826,.570579820116159,.861467768400292,.945879089767658,.970465486474305,.97841363028445,.979589031411224,.975533536908632,.962288755397813,.92312157451312,.793434018943111,.459270135902429,.185574103666303,.0881774959955372,.05436302287667,.0406288447060719,.034221520431697,.0311185790956966,.0295708898336134,.0288108739348928,.0284486271324597,.0282820301724731,.0281988376490237,.0281581655342037,.0281398910216386,.0281308901665811,.0281271086805816,.0281260133612096],B:[.979404752502014,.97940070684313,.979382903470261,.979294364945594,.97896301460857,.977814466694043,.974724321133836,.967198482343973,.949079657530575,.900850128940977,.76315044546224,.465922171649319,.201263280451005,.0877524413419623,.0457176793291679,.0284706050521843,.020527176756985,.0165302792310211,.0145135107212858,.0136003508637687,.0133604258769571,.013548894314568,.0139594356366992,.014443425575357,.0148854440621406,.0152254296999746,.0154592848180209,.0156018026485961,.0156824871281936,.0157248764360615,.0157458108784121,.0157556123350225,.0157605443964911,.0157629637515278,.0157640525629106,.015764589232951,.0157648147772649,.0157648801149616]}),q=Object.freeze({CMF:[[646919989576e-16,.0002194098998132,.0011205743509343,.0037666134117111,.011880553603799,.0232864424191771,.0345594181969747,.0372237901162006,.0324183761091486,.021233205609381,.0104909907685421,.0032958375797931,.0005070351633801,.0009486742057141,.0062737180998318,.0168646241897775,.028689649025981,.0426748124691731,.0562547481311377,.0694703972677158,.0830531516998291,.0861260963002257,.0904661376847769,.0850038650591277,.0709066691074488,.0506288916373645,.035473961885264,.0214682102597065,.0125164567619117,.0068045816390165,.0034645657946526,.0014976097506959,.000769700480928,.0004073680581315,.0001690104031614,952245150365e-16,490309872958e-16,199961492222e-16],[1844289444e-15,62053235865e-16,310096046799e-16,.0001047483849269,.0003536405299538,.0009514714056444,.0022822631748318,.004207329043473,.0066887983719014,.0098883960193565,.0152494514496311,.0214183109449723,.0334229301575068,.0513100134918512,.070402083939949,.0878387072603517,.0942490536184085,.0979566702718931,.0941521856862608,.0867810237486753,.0788565338632013,.0635267026203555,.05374141675682,.042646064357412,.0316173492792708,.020885205921391,.0138601101360152,.0081026402038399,.004630102258803,.0024913800051319,.0012593033677378,.000541646522168,.0002779528920067,.0001471080673854,610327472927e-16,343873229523e-16,177059860053e-16,7220974913e-15],[.000305017147638,.0010368066663574,.0053131363323992,.0179543925899536,.0570775815345485,.113651618936287,.17335872618355,.196206575558657,.186082370706296,.139950475383207,.0891745294268649,.0478962113517075,.0281456253957952,.0161376622950514,.0077591019215214,.0042961483736618,.0020055092122156,.0008614711098802,.0003690387177652,.0001914287288574,.0001495555858975,923109285104e-16,681349182337e-16,288263655696e-16,157671820553e-16,39406041027e-16,1584012587e-15,0,0,0,0,0,0,0,0,0,0,0]]}),D=Object.freeze({RGB_XYZ:[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],XYZ_RGB:[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]],XYZ_LMS:[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],LMS_XYZ:[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],LMS_LAB:[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],LAB_LMS:[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]]});e.Color=r,e.mix=u,e.palette=c,e.gradient=p})});var ZI={};IS(ZI,{default:()=>Ic});module.exports=TS(ZI);var gS=require("obsidian");var wc=require("obsidian");var uS=ae(Yf(),1),cS=ae(ft(),1);var qo=require("obsidian");var Zv=require("obsidian");var j_={STORYBOARD_TOGGLE:"\u7D75\u30B3\u30F3\u30C6\u5207\u66FF",CHARACTER_EDIT:"\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\u7DE8\u96C6",CHARACTER_NAME:"\u30AD\u30E3\u30E9\u540D",DESCRIPTION:"\u8AAC\u660E",DELETE:"\u524A\u9664",CANCEL:"\u30AD\u30E3\u30F3\u30BB\u30EB",SAVE:"\u4FDD\u5B58",NO_SPEAKER:"\u8A71\u8005\u306A\u3057",EDIT_CHARACTERS:"\u30AD\u30E3\u30E9\u30AF\u30BF\u30FC\u60C5\u5831\u3092\u8FFD\u52A0\u30FB\u7DE8\u96C6",DIALOGUE_PLACEHOLDER:"\u53F0\u8A5E",AI_GENERATE:"AI\u751F\u6210",FILE_SELECT:"\u30D5\u30A1\u30A4\u30EB\u9078\u629E",GENERATING:"\u751F\u6210\u4E2D",MOVE_ROW_UP:"\u884C\u3092\u4E0A\u306B\u79FB\u52D5",MOVE_ROW_DOWN:"\u884C\u3092\u4E0B\u306B\u79FB\u52D5",INSERT_ROW_BELOW:"\u4E00\u3064\u4E0B\u306B\u65B0\u898F\u8FFD\u52A0",PROMPT_REQUIRED:"\u30D7\u30ED\u30F3\u30D7\u30C8\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",HEADER_IMAGE:"\u753B\u50CF",HEADER_DIALOGUE:"\u8A71\u8005\u3068\u30BB\u30EA\u30D5",HEADER_SE:"SE",HEADER_PREVIEW:"\u30D7\u30ED\u30F3\u30D7\u30C8",LOADING:"\u8AAD\u307F\u8FBC\u307F\u4E2D...",NEW_CHAPTER_PLACEHOLDER:"\u65B0\u3057\u3044BGM\u30D7\u30ED\u30F3\u30D7\u30C8\u3092\u8FFD\u52A0",PROMPT_PLACEHOLDER:"\u30D7\u30ED\u30F3\u30D7\u30C8",IMAGE_PROMPT_PLACEHOLDER:"\u753B\u50CF\u751F\u6210\u30D7\u30ED\u30F3\u30D7\u30C8(\u4EFB\u610F)",PSD_THUMBNAIL:"PSD\u30B5\u30E0\u30CD\u30A4\u30EB",CLEAR_PATH:"\u30AF\u30EA\u30A2",TOOL_BRUSH:"\u30D6\u30E9\u30B7",TOOL_ERASER:"\u6D88\u3057\u30B4\u30E0",TOOL_SELECTION:"\u9078\u629E",TOOL_HAND:"\u624B\u306E\u3072\u3089",TOOL_PEN:"\u30DA\u30F3",TOOL_PAINT_BRUSH:"\u7B46",TOOL_COLOR_MIXER:"\u8272\u6DF7\u305C",BRUSH_SIZE:"\u30D6\u30E9\u30B7\u30B5\u30A4\u30BA",BRUSH_OPACITY:"\u30D6\u30E9\u30B7\u4E0D\u900F\u660E\u5EA6",COLOR_MIX_RATIO:"\u6DF7\u8272\u6BD4\u7387\uFF08\u30AD\u30E3\u30F3\u30D0\u30B9\uFF1A\u30DA\u30F3\uFF1D{canvas}:{pen}\uFF09",BLEND_STRENGTH:"\u306B\u3058\u307F\u5F37\u5EA6",SELECTION_TYPE:"\u9078\u629E\u7A2E\u5225",SELECT_RECT:"\u77E9\u5F62",SELECT_LASSO:"\u6295\u3052\u7E04",SELECT_MAGIC:"\u30DE\u30B8\u30C3\u30AF\u30EF\u30F3\u30C9",SELECT_PEN:"\u9078\u629E\u30D6\u30E9\u30B7",SELECT_ERASER:"\u9078\u629E\u6D88\u3057\u30B4\u30E0",CANVAS_SIZE:"\u30AD\u30E3\u30F3\u30D0\u30B9\u30B5\u30A4\u30BA",ZOOM_LEVEL:"\u62E1\u5927\u7387",ROTATION_ANGLE:"\u56DE\u8EE2\u89D2",LAYERS:"\u30EC\u30A4\u30E4\u30FC",NEW_LAYER:"\u65B0\u898F\u30EC\u30A4\u30E4\u30FC",IMAGE_LAYER:"\u753B\u50CF\u30EC\u30A4\u30E4\u30FC",DELETE_LAYER:"\u30EC\u30A4\u30E4\u30FC\u524A\u9664",ENTER_LAYER_NAME:"\u30EC\u30A4\u30E4\u30FC\u540D\u3092\u5165\u529B",BACKGROUND:"\u80CC\u666F",AI_RESPONSE_ERROR:"AI\u5FDC\u7B54\u30A8\u30E9\u30FC",BACK_TO_STORYBOARD:"\u30B9\u30C8\u30FC\u30EA\u30FC\u30DC\u30FC\u30C9\u306B\u623B\u308B",BGM_LABEL:"BGM",BGM_PROMPT_PLACEHOLDER:"BGM\u751F\u6210\u30D7\u30ED\u30F3\u30D7\u30C8(\u4EFB\u610F)",CHAT_INPUT_PLACEHOLDER:"\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u5165\u529B...",NO_LAYERS:"\u30EC\u30A4\u30E4\u30FC\u304C\u3042\u308A\u307E\u305B\u3093",ATTACH_IMAGE:"i2i\u753B\u50CF",ATTACH_MASK:"\u30DE\u30B9\u30AF",ATTACH_REFERENCE:"\u53C2\u8003",SEND:"\u9001\u4FE1",CREATE_PSD:"PSD\u30DA\u30A4\u30F3\u30BF\u30FC\u3092\u65B0\u898F\u4F5C\u6210",EXPORT_IMAGE:"\u753B\u50CF\u51FA\u529B",EXPORT_VIDEO:"\u52D5\u753B\u51FA\u529B",NEW_CHAPTER_BGM_LABEL:"BGM\u30D7\u30ED\u30F3\u30D7\u30C8",NEW_CHAPTER_BGM_PLACEHOLDER:"calm acoustic guitar, soft piano, peaceful ambient, instrumental",ADD_SILENT_SECTION:"\u7121\u97F3\u30BB\u30AF\u30B7\u30E7\u30F3\u3092\u8FFD\u52A0",OPEN_PSD:"PSD\u30DA\u30A4\u30F3\u30BF\u30FC\u3092\u958B\u304F",LAYER:"\u30EC\u30A4\u30E4\u30FC",UNDO:"\u5143\u306B\u623B\u3059",REDO:"\u3084\u308A\u76F4\u3057",LAYOUT_SETTINGS:"\u30EC\u30A4\u30A2\u30A6\u30C8\u8A2D\u5B9A",LAYOUT_HORIZONTAL:"\u6A2A\u4E26\u3073",LAYOUT_VERTICAL:"\u7E26\u4E26\u3073",DRAWING_MODE:"\u63CF\u753B\u30E2\u30FC\u30C9",DRAWING_MODE_NORMAL:"\u901A\u5E38\u63CF\u753B",DRAWING_MODE_SPECTRAL:"\u30B9\u30DA\u30AF\u30C8\u30E9\u30EB\u6DF7\u8272",DRAWING_MODE_ERASE_SOFT:"\u6D88\u3057\u30B4\u30E0",BLEND_MODE_NORMAL:"\u901A\u5E38",BLEND_MODE_MULTIPLY:"\u4E57\u7B97",BLEND_MODE_SCREEN:"\u30B9\u30AF\u30EA\u30FC\u30F3",BLEND_MODE_OVERLAY:"\u30AA\u30FC\u30D0\u30FC\u30EC\u30A4",BLEND_MODE_DARKEN:"\u6BD4\u8F03\uFF08\u6697\uFF09",BLEND_MODE_LIGHTEN:"\u6BD4\u8F03\uFF08\u660E\uFF09",BLEND_MODE_COLOR_DODGE:"\u8986\u3044\u713C\u304D",BLEND_MODE_COLOR_BURN:"\u713C\u304D\u8FBC\u307F",BLEND_MODE_HARD_LIGHT:"\u30CF\u30FC\u30C9\u30E9\u30A4\u30C8",BLEND_MODE_SOFT_LIGHT:"\u30BD\u30D5\u30C8\u30E9\u30A4\u30C8",BLEND_MODE_DIFFERENCE:"\u5DEE\u306E\u7D76\u5BFE\u5024",BLEND_MODE_EXCLUSION:"\u9664\u5916",BLEND_MODE_HUE:"\u8272\u76F8",BLEND_MODE_SATURATION:"\u5F69\u5EA6",BLEND_MODE_COLOR:"\u30AB\u30E9\u30FC",BLEND_MODE_LUMINOSITY:"\u8F1D\u5EA6",CLIPPING_MASK:"\u30AF\u30EA\u30C3\u30D4\u30F3\u30B0\u30DE\u30B9\u30AF",EDIT_MENU:"\u7DE8\u96C6",FILE_MENU:"\u30D5\u30A1\u30A4\u30EB",EXPORT_MERGED_IMAGE:"\u753B\u50CF\u3092\u7D71\u5408\u3057\u3066\u66F8\u304D\u51FA\u3057",TOOL_SETTINGS:"\u8A2D\u5B9A"},$v=j_;var $_={STORYBOARD_TOGGLE:"Toggle storyboard",CHARACTER_EDIT:"Edit characters",CHARACTER_NAME:"Character name",DESCRIPTION:"Description",DELETE:"Delete",CANCEL:"Cancel",SAVE:"Save",NO_SPEAKER:"No speaker",EDIT_CHARACTERS:"Add/edit character information",DIALOGUE_PLACEHOLDER:"Dialogue",AI_GENERATE:"AI generate",FILE_SELECT:"Select file",GENERATING:"Generating",MOVE_ROW_UP:"Move row up",MOVE_ROW_DOWN:"Move row down",INSERT_ROW_BELOW:"Insert row below",PROMPT_REQUIRED:"Please enter a prompt",HEADER_IMAGE:"Image",HEADER_DIALOGUE:"Speaker and dialogue",HEADER_SE:"SE",HEADER_PREVIEW:"Prompt",LOADING:"Loading...",NEW_CHAPTER_PLACEHOLDER:"Add new BGM prompt",PROMPT_PLACEHOLDER:"Prompt",IMAGE_PROMPT_PLACEHOLDER:"Image generation prompt (optional)",PSD_THUMBNAIL:"PSD thumbnail",CLEAR_PATH:"Clear",TOOL_BRUSH:"Brush",TOOL_ERASER:"Eraser",TOOL_SELECTION:"Select",TOOL_HAND:"Hand",TOOL_PEN:"Pen",TOOL_PAINT_BRUSH:"Paint brush",TOOL_COLOR_MIXER:"Color mixer",BRUSH_SIZE:"Brush size",BRUSH_OPACITY:"Brush opacity",COLOR_MIX_RATIO:"Color mix ratio (Canvas:Pen = {canvas}:{pen})",BLEND_STRENGTH:"Blend strength",SELECTION_TYPE:"Selection mode",SELECT_RECT:"Rectangle",SELECT_LASSO:"Lasso",SELECT_MAGIC:"Magic wand",SELECT_PEN:"Brush add",SELECT_ERASER:"Brush erase",CANVAS_SIZE:"Canvas Size",ZOOM_LEVEL:"Zoom",ROTATION_ANGLE:"Rotation",LAYERS:"Layers",NEW_LAYER:"New Layer",IMAGE_LAYER:"Image Layer",DELETE_LAYER:"Delete Layer",ENTER_LAYER_NAME:"Enter layer name",AI_RESPONSE_ERROR:"AI response error",BACK_TO_STORYBOARD:"Back to storyboard",BGM_LABEL:"BGM",BGM_PROMPT_PLACEHOLDER:"BGM prompt (optional)",CHAT_INPUT_PLACEHOLDER:"Enter message...",NO_LAYERS:"No layers",ATTACH_IMAGE:"i2i Image",ATTACH_MASK:"Mask",ATTACH_REFERENCE:"Reference",SEND:"Send",CREATE_PSD:"Create PSD Painter",EXPORT_IMAGE:"Export image",EXPORT_VIDEO:"Export video",NEW_CHAPTER_BGM_LABEL:"BGM prompt",NEW_CHAPTER_BGM_PLACEHOLDER:"calm acoustic guitar, soft piano, peaceful ambient, instrumental",ADD_SILENT_SECTION:"Add silent section",OPEN_PSD:"Open PSD Painter",BACKGROUND:"Background",LAYER:"Layer",UNDO:"Undo",REDO:"Redo",LAYOUT_SETTINGS:"Layout settings",LAYOUT_HORIZONTAL:"Horizontal",LAYOUT_VERTICAL:"Vertical",DRAWING_MODE:"Drawing mode",DRAWING_MODE_NORMAL:"Normal",DRAWING_MODE_SPECTRAL:"Spectral mixing",DRAWING_MODE_ERASE_SOFT:"Soft eraser",BLEND_MODE_NORMAL:"Normal",BLEND_MODE_MULTIPLY:"Multiply",BLEND_MODE_SCREEN:"Screen",BLEND_MODE_OVERLAY:"Overlay",BLEND_MODE_DARKEN:"Darken",BLEND_MODE_LIGHTEN:"Lighten",BLEND_MODE_COLOR_DODGE:"Color Dodge",BLEND_MODE_COLOR_BURN:"Color Burn",BLEND_MODE_HARD_LIGHT:"Hard Light",BLEND_MODE_SOFT_LIGHT:"Soft Light",BLEND_MODE_DIFFERENCE:"Difference",BLEND_MODE_EXCLUSION:"Exclusion",BLEND_MODE_HUE:"Hue",BLEND_MODE_SATURATION:"Saturation",BLEND_MODE_COLOR:"Color",BLEND_MODE_LUMINOSITY:"Luminosity",CLIPPING_MASK:"Clipping Mask",EDIT_MENU:"Edit",FILE_MENU:"File",EXPORT_MERGED_IMAGE:"Export flattened image",TOOL_SETTINGS:"Settings"},Yv=$_;var Kv=null;function qv(e){Kv=e}var Xv={ja:$v,en:Yv};function te(e){var r,i;if(!Kv)return console.warn("App instance not set for i18n"),e;let t=Zv.moment.locale();return(i=((r=Xv[t])!=null?r:Xv.en)[e])!=null?i:e}var $r;(i=>{function r(o,a,l){i.tools=o,i.aiEnabledTools=a,i.config=l}i.initialize=r})($r||($r={}));var Yr=class{static initialize(t,n,r){$r.initialize(t,n,r)}static async executeTool(t,n){let r=$r.tools.get(t);if(!r){let i=Array.from($r.tools.keys()).join(", ");throw new Error(`Tool "${t}" not found. Available tools: ${i}`)}try{return await r.execute(n)}catch(i){throw new Error(`Tool execution failed for "${t}": ${i}`)}}static isAiEnabled(t){return $r.aiEnabledTools.has(t)}static hasToolRegistered(t){return $r.tools.has(t)}static getTool(t){return $r.tools.get(t)}};var wt={CREATE_PAINTER_FILE:"create_painter_file",LOAD_PAINTER_FILE:"load_painter_file",SAVE_PAINTER_FILE:"save_painter_file",GENERATE_THUMBNAIL:"generate_thumbnail",EXPORT_MERGED_IMAGE:"export_merged_image",UNDO_PAINTER:"undo_painter",REDO_PAINTER:"redo_painter",ADD_LAYER:"add_layer",REMOVE_LAYER:"remove_layer",SET_LAYER_OPACITY:"set_layer_opacity",SET_LAYER_BLEND_MODE:"set_layer_blend_mode",SET_LAYER_CLIPPING:"set_layer_clipping",RENAME_LAYER:"rename_layer",TOGGLE_LAYER_VISIBILITY:"toggle_layer_visibility",GENERATE_IMAGE:"generate_image"},Rt={PAINTER:"painter",AI:"ai"},Qv={tools:[{name:wt.CREATE_PAINTER_FILE,modulePath:"../api/painter-tool/create-painter-file",exportName:"createPainterFileTool",ai_enabled:!1,description:"Create new PSD file",category:Rt.PAINTER},{name:wt.LOAD_PAINTER_FILE,modulePath:"../api/painter-tool/load-painter-file",exportName:"loadPainterFileTool",ai_enabled:!1,description:"Load PSD file",category:Rt.PAINTER},{name:wt.SAVE_PAINTER_FILE,modulePath:"../api/painter-tool/save-painter-file",exportName:"savePainterFileTool",ai_enabled:!1,description:"Save PSD file",category:Rt.PAINTER},{name:wt.EXPORT_MERGED_IMAGE,modulePath:"../api/painter-tool/export-merged-image",exportName:"exportMergedImageTool",ai_enabled:!1,description:"Export merged image as PNG",category:Rt.PAINTER},{name:wt.GENERATE_THUMBNAIL,modulePath:"../api/painter-tool/generate-thumbnail",exportName:"generateThumbnailTool",ai_enabled:!1,description:"Generate thumbnail from PSD file",category:Rt.PAINTER},{name:wt.UNDO_PAINTER,modulePath:"../api/painter-tool/undo-painter",exportName:"undoPainterTool",ai_enabled:!1,description:"Undo painter view",category:Rt.PAINTER},{name:wt.REDO_PAINTER,modulePath:"../api/painter-tool/redo-painter",exportName:"redoPainterTool",ai_enabled:!1,description:"Redo painter view",category:Rt.PAINTER},{name:wt.ADD_LAYER,modulePath:"../api/layer-tool/add-layer",exportName:"addLayerTool",ai_enabled:!1,description:"Add new layer to painter view (supports fileData)",category:Rt.PAINTER},{name:wt.REMOVE_LAYER,modulePath:"../api/layer-tool/remove-layer",exportName:"removeLayerTool",ai_enabled:!1,description:"Remove layer from painter view",category:Rt.PAINTER},{name:wt.SET_LAYER_OPACITY,modulePath:"../api/layer-tool/set-layer-opacity",exportName:"setLayerOpacityTool",ai_enabled:!1,description:"Set layer opacity in painter view",category:Rt.PAINTER},{name:wt.SET_LAYER_BLEND_MODE,modulePath:"../api/layer-tool/set-layer-blend-mode",exportName:"setLayerBlendModeTool",ai_enabled:!1,description:"Set layer blend mode in painter view",category:Rt.PAINTER},{name:wt.SET_LAYER_CLIPPING,modulePath:"../api/layer-tool/set-layer-clipping",exportName:"setLayerClippingTool",ai_enabled:!1,description:"Set layer clipping in painter view",category:Rt.PAINTER},{name:wt.RENAME_LAYER,modulePath:"../api/layer-tool/rename-layer",exportName:"renameLayerTool",ai_enabled:!1,description:"Rename layer in painter view",category:Rt.PAINTER},{name:wt.TOGGLE_LAYER_VISIBILITY,modulePath:"../api/layer-tool/toggle-layer-visibility",exportName:"toggleLayerVisibilityTool",ai_enabled:!1,description:"Toggle layer visibility in painter view",category:Rt.PAINTER},{name:wt.GENERATE_IMAGE,modulePath:"../api/ai-tool/generate-image",exportName:"generateImageTool",ai_enabled:!1,description:"Generate image via AI",category:Rt.AI}],config:{autoRegister:!0,enableLogging:!0,failOnError:!1}};var ww=ae(El(),1),Wu;(i=>{i.CREATE_PAINTER_FILE_METADATA={name:"create_painter_file",description:"Create new PSD file",parameters:{type:"object",properties:{app:{type:"object",description:"Obsidian app instance"},imageFile:{type:"object",description:"Source image file",nullable:!0}},required:["app"]}};async function r(o){let{app:a,imageFile:l}=o,s=document.createElement("canvas"),u=s.getContext("2d");if(!u)throw new Error("2D\u30B3\u30F3\u30C6\u30AD\u30B9\u30C8\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F");if(l){let S=await a.vault.readBinary(l),m=new Blob([S]),f=URL.createObjectURL(m),h=await new Promise((w,I)=>{let T=new Image;T.onload=()=>w(T),T.onerror=I,T.src=f});s.width=h.width,s.height=h.height,u.drawImage(h,0,0),URL.revokeObjectURL(f)}else s.width=800,s.height=600,u.fillStyle="white",u.fillRect(0,0,s.width,s.height);let c={width:s.width,height:s.height,children:[{name:l?l.basename:"Background",hidden:!1,opacity:1,blendMode:"normal",canvas:s,left:0,top:0}],canvas:s},p=ww.writePsd(c,{generateThumbnail:!1}),d=1,g=`untitled-${d}.psd`;for(;a.vault.getAbstractFileByPath(g);)d++,g=`untitled-${d}.psd`;let v={filePath:(await a.vault.createBinary(g,p)).path,message:`PSD\u30D5\u30A1\u30A4\u30EB\u300C${g}\u300D\u3092\u4F5C\u6210\u3057\u307E\u3057\u305F`};return JSON.stringify(v)}i.executeCreatePainterFile=r})(Wu||(Wu={}));var Ip={name:"create_painter_file",description:"Create new PSD file",parameters:Wu.CREATE_PAINTER_FILE_METADATA.parameters,execute:Wu.executeCreatePainterFile};var Sw=ae(El(),1);function EI(e,t,n){if(typeof document=="undefined"||typeof HTMLCanvasElement=="undefined")return e;let r=document.createElement("canvas");r.width=t,r.height=n;let i=r.getContext("2d");if(!i)return r;if(e&&e.canvas&&typeof HTMLCanvasElement!="undefined"&&e.canvas instanceof HTMLCanvasElement)i.drawImage(e.canvas,0,0);else if(e&&e.canvas&&e.canvas.data)try{let o=new ImageData(new Uint8ClampedArray(e.canvas.data),e.canvas.width||t,e.canvas.height||n);i.putImageData(o,0,0)}catch(o){console.error(o)}else if(e&&e.data)try{let o=new ImageData(new Uint8ClampedArray(e.data),e.width||t,e.height||n);i.putImageData(o,0,0)}catch(o){console.error(o)}else i.fillStyle="white",i.fillRect(0,0,t,n);return r}var ju;(r=>{r.LOAD_PAINTER_FILE_METADATA={name:"load_painter_file",description:"Load PSD file",parameters:{type:"object",properties:{app:{type:"object",description:"Obsidian app instance"},file:{type:"object",description:"Target file"}},required:["app","file"]}};function t(i,o,a){var u,c;let l=((u=i.canvas)==null?void 0:u.width)||i.width||o,s=((c=i.canvas)==null?void 0:c.height)||i.height||a;return{canvas:EI(i,l,s),width:l,height:s}}async function n(i){let{app:o,file:a}=i,l=await o.vault.readBinary(a),s=Sw.readPsd(l),u=(s.children||[]).map((p,d)=>{var m,f,h;let y=t(p,s.width,s.height).canvas,v=typeof HTMLCanvasElement!="undefined",S="";if(v&&y instanceof HTMLCanvasElement)try{S=y.toDataURL("image/png")}catch(w){console.error(w)}return{name:(m=p.name)!=null?m:`Layer ${d}`,visible:!p.hidden,opacity:p.opacity!==void 0?p.opacity:1,blendMode:(f=p.blendMode)!=null?f:"normal",clippingMask:(h=p.clipping)!=null?h:!1,width:s.width,height:s.height,...v?{canvasDataUrl:S}:{canvas:p.canvas}}}),c={width:s.width,height:s.height,layers:u};return JSON.stringify(c)}r.executeLoadPainterFile=n})(ju||(ju={}));var Tp={name:"load_painter_file",description:"Load PSD file",parameters:ju.LOAD_PAINTER_FILE_METADATA.parameters,execute:ju.executeLoadPainterFile};var xw=ae(El(),1);function Lp(e,t,n){var a,l,s,u;if(typeof HTMLCanvasElement!="undefined"&&e.canvas instanceof HTMLCanvasElement||typeof document=="undefined"||typeof HTMLCanvasElement=="undefined")return e.canvas;let r=document.createElement("canvas");r.width=(l=(a=e.canvas)==null?void 0:a.width)!=null?l:t,r.height=(u=(s=e.canvas)==null?void 0:s.height)!=null?u:n;let i=r.getContext("2d",{willReadFrequently:!0});if(!i)return e.canvas=r,r;let o=e.canvas;if(o&&"data"in o&&o.data instanceof Uint8ClampedArray)try{let c=new ImageData(o.data,r.width,r.height);i.putImageData(c,0,0)}catch(c){i.fillStyle="white",i.fillRect(0,0,r.width,r.height)}else if(o&&"getContext"in o&&typeof o.getContext=="function")try{i.drawImage(o,0,0)}catch(c){console.error(c)}else i.fillStyle="white",i.fillRect(0,0,r.width,r.height);return e.canvas=r,r}var $u;(n=>{n.SAVE_PAINTER_FILE_METADATA={name:"save_painter_file",description:"Save PSD file",parameters:{type:"object",properties:{app:{type:"object",description:"Obsidian app instance"},file:{type:"object",description:"Target file"},layers:{type:"array",description:"Layer data"}},required:["app","file","layers"]}};async function t(r){var y,v;let{app:i,file:o,layers:a}=r;if(!a||a.length===0)return"no-op";let l=Lp(a[0],((y=a[0].canvas)==null?void 0:y.width)||800,((v=a[0].canvas)==null?void 0:v.height)||600),s=l.width,u=l.height,c=document.createElement("canvas");c.width=s,c.height=u;let p=c.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("2D\u30B3\u30F3\u30C6\u30AD\u30B9\u30C8\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F");p.clearRect(0,0,s,u);for(let S of a)if(S.visible&&S.canvas)try{p.globalAlpha=S.opacity!==void 0?S.opacity:1;let m=S.blendMode==="normal"?"source-over":S.blendMode;p.globalCompositeOperation=m;let f=Lp(S,s,u);f instanceof HTMLCanvasElement&&p.drawImage(f,0,0)}catch(m){console.error(m)}let d={width:s,height:u,children:a.map(S=>{let m=Lp(S,s,u);return{name:S.name,canvas:m,hidden:!S.visible,opacity:S.opacity,blendMode:S.blendMode,clipping:S.clippingMask||!1,left:0,top:0}}),canvas:c},g=xw.writePsd(d,{generateThumbnail:!1});return await i.vault.modifyBinary(o,g),"saved"}n.executeSavePainterFile=t})($u||($u={}));var Pp={name:"save_painter_file",description:"Save PSD file",parameters:$u.SAVE_PAINTER_FILE_METADATA.parameters,execute:$u.executeSavePainterFile};var _w=ae(El(),1),Yu;(n=>{n.GENERATE_THUMBNAIL_METADATA={name:"generate_thumbnail",description:"Generate thumbnail from PSD file",parameters:{type:"object",properties:{app:{type:"object",description:"Obsidian app instance"},file:{type:"object",description:"PSD file to generate thumbnail from"}},required:["app","file"]}};async function t(r){var a;let{app:i,file:o}=r;try{let l=await i.vault.readBinary(o),s=_w.readPsd(l);if((a=s.imageResources)!=null&&a.thumbnail){if(s.imageResources.thumbnail instanceof HTMLCanvasElement){let c={thumbnailData:s.imageResources.thumbnail.toDataURL("image/jpeg"),message:"\u30B5\u30E0\u30CD\u30A4\u30EB\u53D6\u5F97\u306B\u6210\u529F\u3057\u307E\u3057\u305F"};return JSON.stringify(c)}}else{let c=document.createElement("canvas");c.width=s.width,c.height=s.height;let p=c.getContext("2d");if(!p)throw new Error("2D\u30B3\u30F3\u30C6\u30AD\u30B9\u30C8\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F");p.clearRect(0,0,s.width,s.height);let d=[...s.children||[]].reverse();for(let f of d)if(!f.hidden){p.globalAlpha=f.opacity!==void 0?f.opacity:1;let h=f.blendMode==="normal"?"source-over":f.blendMode;p.globalCompositeOperation=h,f.canvas&&p.drawImage(f.canvas,0,0)}let g=document.createElement("canvas"),y=512,v=Math.min(y/s.width,y/s.height);g.width=s.width*v,g.height=s.height*v;let S=g.getContext("2d");if(!S)throw new Error("2D\u30B3\u30F3\u30C6\u30AD\u30B9\u30C8\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F");S.drawImage(c,0,0,g.width,g.height);let m={thumbnailData:g.toDataURL("image/jpeg",.8),message:"\u30B5\u30E0\u30CD\u30A4\u30EB\u751F\u6210\u306B\u6210\u529F\u3057\u307E\u3057\u305F"};return JSON.stringify(m)}return JSON.stringify({thumbnailData:null,message:"\u30B5\u30E0\u30CD\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F"})}catch(l){let s={thumbnailData:null,message:"\u30B5\u30E0\u30CD\u30A4\u30EB\u751F\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F: "+l.message};return JSON.stringify(s)}}n.executeGenerateThumbnail=t})(Yu||(Yu={}));var Ap={name:"generate_thumbnail",description:"Generate thumbnail from PSD file",parameters:Yu.GENERATE_THUMBNAIL_METADATA.parameters,execute:Yu.executeGenerateThumbnail};var kp=require("obsidian");function Ew(e,t,n){var a,l,s,u;if(typeof HTMLCanvasElement!="undefined"&&e.canvas instanceof HTMLCanvasElement||typeof document=="undefined"||typeof HTMLCanvasElement=="undefined")return e.canvas;let r=document.createElement("canvas");r.width=(l=(a=e.canvas)==null?void 0:a.width)!=null?l:t,r.height=(u=(s=e.canvas)==null?void 0:s.height)!=null?u:n;let i=r.getContext("2d",{willReadFrequently:!0});if(!i)return e.canvas=r,r;let o=e.canvas;if(o&&"data"in o&&o.data instanceof Uint8ClampedArray)try{let c=new ImageData(o.data,r.width,r.height);i.putImageData(c,0,0)}catch(c){i.fillStyle="white",i.fillRect(0,0,r.width,r.height)}else if(o&&"getContext"in o&&typeof o.getContext=="function")try{i.drawImage(o,0,0)}catch(c){console.error(c)}else i.fillStyle="white",i.fillRect(0,0,r.width,r.height);return e.canvas=r,r}var Xu;(r=>{r.EXPORT_MERGED_IMAGE_METADATA={name:"export_merged_image",description:"Export merged image as PNG",parameters:{type:"object",properties:{app:{type:"object",description:"Obsidian app instance"},layers:{type:"array",description:"Layer data"},fileName:{type:"string",description:"File name",nullable:!0}},required:["app","layers"]}};function t(i){let o=i.split(",")[1];return Uint8Array.from(atob(o),a=>a.charCodeAt(0))}async function n(i){var L,A,O,R;let{app:o,layers:a,fileName:l}=i;if(!a||a.length===0)throw new Error("no layers");let s=Ew(a[0],((L=a[0].canvas)==null?void 0:L.width)||800,((A=a[0].canvas)==null?void 0:A.height)||600),u=s.width,c=s.height,p=document.createElement("canvas");p.width=u,p.height=c;let d=p.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("2D\u30B3\u30F3\u30C6\u30AD\u30B9\u30C8\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F");d.clearRect(0,0,u,c);for(let F of a)if(F.visible&&F.canvas)try{d.globalAlpha=F.opacity!==void 0?F.opacity:1;let q=F.blendMode==="normal"?"source-over":F.blendMode;d.globalCompositeOperation=q;let D=Ew(F,u,c);D instanceof HTMLCanvasElement&&d.drawImage(D,0,0)}catch(q){console.error(q)}let g=p.toDataURL("image/png"),y=t(g),v=((R=(O=o.workspace.getActiveFile())==null?void 0:O.parent)==null?void 0:R.path)||"",S=(0,kp.normalizePath)(`${v}/assets`);try{o.vault.getAbstractFileByPath(S)||await o.vault.createFolder(S)}catch(F){}let m="png",f=l!=null?l:`merged-${Date.now()}.${m}`;f.endsWith(`.${m}`)||(f+=`.${m}`);let h=(0,kp.normalizePath)(`${S}/${f}`),w=1;for(;o.vault.getAbstractFileByPath(h);)h=`${S}/${Date.now()}_${w}.${m}`,w++;let I=await o.vault.createBinary(h,y),T={filePath:I.path,message:`\u753B\u50CF\u3092\u66F8\u304D\u51FA\u3057\u307E\u3057\u305F: ${I.path}`};return JSON.stringify(T)}r.executeExportMergedImage=n})(Xu||(Xu={}));var Dp={name:"export_merged_image",description:"Export merged image as PNG",parameters:Xu.EXPORT_MERGED_IMAGE_METADATA.parameters,execute:Xu.executeExportMergedImage};var bw=e=>{let t,n=new Set,r=(u,c)=>{let p=typeof u=="function"?u(t):u;if(!Object.is(p,t)){let d=t;t=(c!=null?c:typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(g=>g(t,d))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>s,subscribe:u=>(n.add(u),()=>n.delete(u))},s=t=e(r,i,l);return l},Cw=e=>e?bw(e):bw;var Mp=ae(ft(),1);var bI=e=>e;function CI(e,t=bI){let n=Mp.default.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return Mp.default.useDebugValue(n),n}var Iw=e=>{let t=Cw(e),n=r=>CI(t,r);return Object.assign(n,t),n},er=e=>e?Iw(e):Iw;var II=e=>(t,n,r)=>{let i=r.subscribe;return r.subscribe=(a,l,s)=>{let u=a;if(l){let c=(s==null?void 0:s.equalityFn)||Object.is,p=a(r.getState());u=d=>{let g=a(d);if(!c(p,g)){let y=p;l(p=g,y)}},s!=null&&s.fireImmediately&&l(p,p)}return i(u)},e(t,n,r)},Tw=II;function TI(e,t){let n;try{n=e()}catch(i){return}return{getItem:i=>{var o;let a=s=>s===null?null:JSON.parse(s,t==null?void 0:t.reviver),l=(o=n.getItem(i))!=null?o:null;return l instanceof Promise?l.then(a):a(l)},setItem:(i,o)=>n.setItem(i,JSON.stringify(o,t==null?void 0:t.replacer)),removeItem:i=>n.removeItem(i)}}var Rp=e=>t=>{try{let n=e(t);return n instanceof Promise?n:{then(r){return Rp(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Rp(r)(n)}}}},LI=(e,t)=>(n,r,i)=>{let o={storage:TI(()=>localStorage),partialize:v=>v,version:0,merge:(v,S)=>({...S,...v}),...t},a=!1,l=new Set,s=new Set,u=o.storage;if(!u)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...v)},r,i);let c=()=>{let v=o.partialize({...r()});return u.setItem(o.name,{state:v,version:o.version})},p=i.setState;i.setState=(v,S)=>{p(v,S),c()};let d=e((...v)=>{n(...v),c()},r,i);i.getInitialState=()=>d;let g,y=()=>{var v,S;if(!u)return;a=!1,l.forEach(f=>{var h;return f((h=r())!=null?h:d)});let m=((S=o.onRehydrateStorage)==null?void 0:S.call(o,(v=r())!=null?v:d))||void 0;return Rp(u.getItem.bind(u))(o.name).then(f=>{if(f)if(typeof f.version=="number"&&f.version!==o.version){if(o.migrate){let h=o.migrate(f.state,f.version);return h instanceof Promise?h.then(w=>[!0,w]):[!0,h]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,f.state];return[!1,void 0]}).then(f=>{var h;let[w,I]=f;if(g=o.merge(I,(h=r())!=null?h:d),n(g,!0),w)return c()}).then(()=>{m==null||m(g,void 0),g=r(),a=!0,s.forEach(f=>f(g))}).catch(f=>{m==null||m(void 0,f)})};return i.persist={setOptions:v=>{o={...o,...v},v.storage&&(u=v.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(s.add(v),()=>{s.delete(v)})},o.skipHydration||y(),g||d},Lw=LI;var Zu=class{constructor(t){this.func=t;this.timeout=null;this.saveHistory=[]}execute(...t){let n=Date.now();this.saveHistory=this.saveHistory.filter(i=>n-i<6e4);let r=this.saveHistory.length;if(r===0)this.saveHistory.push(n),this.func(...t);else{let i=Math.min(r,5)*1e3;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.saveHistory.push(Date.now()),this.func(...t)},i)}}getCurrentDelay(){let t=this.saveHistory.filter(n=>Date.now()-n<6e4).length;return Math.min(t,5)*1e3}};var li=new Zu(async(e,t)=>{if(!(e.length===0||!t||t.extension!=="psd"))try{let n=window.app;n?await Ie.executeTool("save_painter_file",{app:n,file:t,layers:e}):console.warn("\u26A0\uFE0F Obsidian app\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093")}catch(n){console.error("\u274C \u81EA\u52D5\u4FDD\u5B58\u30A8\u30E9\u30FC:",n)}}),se=er()(Tw((e,t)=>({layers:[],currentPsdFile:null,updateLayers:n=>{e({layers:n});let r=t();r.layers.length>0&&li.execute(r.layers,r.currentPsdFile)},initializeLayers:n=>{e({layers:n})},addLayer:n=>e(r=>({layers:[...r.layers,n]})),removeLayer:n=>e(r=>({layers:r.layers.filter((i,o)=>o!==n)})),toggleLayerVisibility:n=>{e(i=>({layers:i.layers.map((o,a)=>a===n?{...o,visible:!o.visible}:o)}));let r=t();r.layers.length>0&&li.execute(r.layers,r.currentPsdFile)},setLayerOpacity:(n,r)=>{e(o=>({layers:o.layers.map((a,l)=>l===n?{...a,opacity:r}:a)}));let i=t();i.layers.length>0&&li.execute(i.layers,i.currentPsdFile)},setLayerBlendMode:(n,r)=>{e(o=>({layers:o.layers.map((a,l)=>l===n?{...a,blendMode:r}:a)}));let i=t();i.layers.length>0&&li.execute(i.layers,i.currentPsdFile)},setLayerClippingMask:(n,r)=>{e(o=>({layers:o.layers.map((a,l)=>l===n?{...a,clippingMask:r}:a)}));let i=t();i.layers.length>0&&li.execute(i.layers,i.currentPsdFile)},renameLayer:(n,r)=>{e(o=>({layers:o.layers.map((a,l)=>l===n?{...a,name:r}:a)}));let i=t();i.layers.length>0&&li.execute(i.layers,i.currentPsdFile)},clearLayers:()=>e({layers:[],currentPsdFile:null}),setCurrentPsdFile:n=>e({currentPsdFile:n}),clearCurrentPsdFile:()=>e({currentPsdFile:null}),getCurrentSaveDelay:()=>li.getCurrentDelay(),triggerAutoSave:()=>{let n=t();n.layers.length>0&&li.execute(n.layers,n.currentPsdFile)}})));var De=er(e=>({currentLayerIndex:0,setCurrentLayerIndex:t=>e({currentLayerIndex:t})}));var rt=er((e,t)=>({history:[],currentIndex:-1,maxHistorySize:20,saveHistory:(n,r)=>{let i=t(),a={layers:n.map(s=>{let u=document.createElement("canvas");u.width=s.canvas.width,u.height=s.canvas.height;let c=u.getContext("2d");return c&&c.drawImage(s.canvas,0,0),{...s,canvas:u}}),currentLayerIndex:r,timestamp:Date.now()},l=i.history.slice(0,i.currentIndex+1);l.push(a),l.length>i.maxHistorySize?l.shift():e({currentIndex:i.currentIndex+1}),e({history:l})},undo:()=>{let n=t();if(n.currentIndex>0){let r=n.currentIndex-1;return e({currentIndex:r}),n.history[r]}return null},redo:()=>{let n=t();if(n.currentIndex<n.history.length-1){let r=n.currentIndex+1;return e({currentIndex:r}),n.history[r]}return null},canUndo:()=>t().currentIndex>0,canRedo:()=>{let n=t();return n.currentIndex<n.history.length-1},clearHistory:()=>e({history:[],currentIndex:-1})}));var Ku;(n=>{n.UNDO_PAINTER_METADATA={name:"undo_painter",description:"Undo current painter view",parameters:{type:"object",properties:{},required:[]}};async function t(r){let i=rt.getState();if(!i.canUndo())return"no-undo-available";let o=i.undo();return o?(se.getState().updateLayers(o.layers),De.getState().setCurrentLayerIndex(o.currentLayerIndex),"undo-success"):"undo-failed"}n.executeUndoPainter=t})(Ku||(Ku={}));var Op={name:"undo_painter",description:"Undo current painter view",parameters:Ku.UNDO_PAINTER_METADATA.parameters,execute:Ku.executeUndoPainter};var qu;(n=>{n.REDO_PAINTER_METADATA={name:"redo_painter",description:"Redo painter view",parameters:{type:"object",properties:{},required:[]}};async function t(r){let i=rt.getState();if(!i.canRedo())return"no-redo-available";let o=i.redo();return o?(se.getState().updateLayers(o.layers),De.getState().setCurrentLayerIndex(o.currentLayerIndex),"redo-success"):"redo-failed"}n.executeRedoPainter=t})(qu||(qu={}));var Fp={name:"redo_painter",description:"Redo painter view",parameters:qu.REDO_PAINTER_METADATA.parameters,execute:qu.executeRedoPainter};var Qu;(i=>{i.ADD_LAYER_METADATA={name:"add_layer",description:"Create and add new layer",parameters:{type:"object",properties:{name:{type:"string",description:"Layer name",nullable:!0},imageFile:{type:"object",description:"Image file",nullable:!0},fileData:{type:"object",description:"Image data",nullable:!0},width:{type:"number",description:"Canvas width",default:800},height:{type:"number",description:"Canvas height",default:600},app:{type:"object",description:"Obsidian app instance",nullable:!0}},required:[]}};let t=800,n=600;async function r(o){let{name:a="New Layer",imageFile:l,fileData:s,width:u=t,height:c=n,app:p}=o,d=se.getState(),g=De.getState();rt.getState().saveHistory(d.layers,g.currentLayerIndex);let v=document.createElement("canvas");v.width=u,v.height=c;let S=v.getContext("2d");if(!S)throw new Error("2D\u30B3\u30F3\u30C6\u30AD\u30B9\u30C8\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F");let m;if(l&&p?m=await p.vault.readBinary(l):s&&(s instanceof Blob?m=await s.arrayBuffer():m=s),m){let h=new Blob([m]),w=URL.createObjectURL(h),I=await new Promise((A,O)=>{let R=new Image;R.onload=()=>A(R),R.onerror=O,R.src=w}),T=(v.width-I.width)/2,L=(v.height-I.height)/2;S.drawImage(I,T,L),URL.revokeObjectURL(w)}else S.fillStyle="transparent",S.fillRect(0,0,v.width,v.height);let f={name:a,visible:!0,opacity:1,blendMode:"normal",canvas:v};return d.addLayer(f),"layer_added"}i.executeAddLayer=r})(Qu||(Qu={}));var Np={name:"add_layer",description:"Create and add new layer",parameters:Qu.ADD_LAYER_METADATA.parameters,execute:Qu.executeAddLayer};var Ju;(n=>{n.REMOVE_LAYER_METADATA={name:"remove_layer",description:"Remove layer at specified index",parameters:{type:"object",properties:{index:{type:"number",description:"Layer index to remove"}},required:["index"]}};async function t(r){let{index:i}=r,o=se.getState(),a=De.getState(),l=rt.getState(),s=o.layers,u=a.currentLayerIndex;if(s.length<=1||i<0||i>=s.length)return"no-op";l.saveHistory(s,u),o.removeLayer(i);let c=u;return c>=s.length-1&&(c=s.length-2),a.setCurrentLayerIndex(c),"layer_removed"}n.executeRemoveLayer=t})(Ju||(Ju={}));var Up={name:"remove_layer",description:"Remove layer at specified index",parameters:Ju.REMOVE_LAYER_METADATA.parameters,execute:Ju.executeRemoveLayer};var ec;(n=>{n.SET_LAYER_OPACITY_METADATA={name:"set_layer_opacity",description:"Set layer opacity",parameters:{type:"object",properties:{index:{type:"number",description:"Layer index"},opacity:{type:"number",description:"Opacity value (0-1)"}},required:["index","opacity"]}};async function t(r){let{index:i,opacity:o}=r,a=se.getState().layers;return i<0||i>=a.length?"no-op":(se.getState().setLayerOpacity(i,o),"layer_opacity_set")}n.executeSetLayerOpacity=t})(ec||(ec={}));var Bp={name:"set_layer_opacity",description:"Set layer opacity",parameters:ec.SET_LAYER_OPACITY_METADATA.parameters,execute:ec.executeSetLayerOpacity};var tc;(n=>{n.SET_LAYER_BLEND_MODE_METADATA={name:"set_layer_blend_mode",description:"Set layer blend mode",parameters:{type:"object",properties:{index:{type:"number",description:"Layer index"},blendMode:{type:"string",description:"Blend mode (normal, multiply, screen, etc.)"}},required:["index","blendMode"]}};async function t(r){let{index:i,blendMode:o}=r,a=se.getState().layers;return i<0||i>=a.length?"no-op":(se.getState().setLayerBlendMode(i,o),"layer_blend_mode_set")}n.executeSetLayerBlendMode=t})(tc||(tc={}));var zp={name:"set_layer_blend_mode",description:"Set layer blend mode",parameters:tc.SET_LAYER_BLEND_MODE_METADATA.parameters,execute:tc.executeSetLayerBlendMode};var nc;(n=>{n.SET_LAYER_CLIPPING_METADATA={name:"set_layer_clipping",description:"Set layer clipping mask",parameters:{type:"object",properties:{index:{type:"number",description:"Layer index"},clippingMask:{type:"boolean",description:"Enable clipping"}},required:["index","clippingMask"]}};async function t(r){let{index:i,clippingMask:o}=r,a=se.getState().layers;return i<0||i>=a.length?"no-op":(se.getState().setLayerClippingMask(i,o),"layer_clipping_set")}n.executeSetLayerClipping=t})(nc||(nc={}));var Vp={name:"set_layer_clipping",description:"Set layer clipping mask",parameters:nc.SET_LAYER_CLIPPING_METADATA.parameters,execute:nc.executeSetLayerClipping};var rc;(n=>{n.RENAME_LAYER_METADATA={name:"rename_layer",description:"Rename layer",parameters:{type:"object",properties:{index:{type:"number",description:"Layer index"},name:{type:"string",description:"New layer name"}},required:["index","name"]}};async function t(r){let{index:i,name:o}=r,a=se.getState(),l=De.getState(),s=rt.getState(),u=a.layers;return i<0||i>=u.length?"no-op":(s.saveHistory(u,l.currentLayerIndex),a.renameLayer(i,o),"layer_renamed")}n.executeRenameLayer=t})(rc||(rc={}));var Hp={name:"rename_layer",description:"Rename layer",parameters:rc.RENAME_LAYER_METADATA.parameters,execute:rc.executeRenameLayer};var ic;(n=>{n.TOGGLE_LAYER_VISIBILITY_METADATA={name:"toggle_layer_visibility",description:"Toggle layer visibility",parameters:{type:"object",properties:{index:{type:"number",description:"Layer index"}},required:["index"]}};async function t(r){let{index:i}=r,o=se.getState().layers;return i<0||i>=o.length?"no-op":(se.getState().toggleLayerVisibility(i),"layer_visibility_toggled")}n.executeToggleLayerVisibility=t})(ic||(ic={}));var Gp={name:"toggle_layer_visibility",description:"Toggle layer visibility",parameters:ic.TOGGLE_LAYER_VISIBILITY_METADATA.parameters,execute:ic.executeToggleLayerVisibility};var Ow=require("obsidian");var Pw=null;function Aw(e){Pw=e}function kw(){return Pw}var oc=class{constructor(t){this.comfyUrl=t;this.ws=null;this.listeners=new Map;this.clientId=this.generateClientId()}generateClientId(){return Math.random().toString(36).substring(2,15)}async connect(){return new Promise((t,n)=>{let r=this.comfyUrl.replace("http://","ws://").replace("https://","wss://");this.ws=new WebSocket(`${r}/ws?clientId=${this.clientId}`),this.ws.onopen=()=>{console.log("ComfyUI WebSocket connected"),t()},this.ws.onerror=i=>{console.error("ComfyUI WebSocket error:",i),n(new Error("WebSocket connection failed"))},this.ws.onmessage=i=>{try{let o=JSON.parse(i.data);this.handleMessage(o)}catch(o){console.error("Failed to parse WebSocket message:",o)}},this.ws.onclose=()=>{console.log("ComfyUI WebSocket disconnected"),this.ws=null}})}handleMessage(t){let{type:n,data:r}=t;r!=null&&r.prompt_id&&(this.listeners.get(r.prompt_id)||[]).forEach(a=>{a({type:n,data:r})}),(this.listeners.get("*")||[]).forEach(o=>{o({type:n,data:r})})}addProgressListener(t,n){this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t).push(n)}removeProgressListener(t,n){let r=this.listeners.get(t);if(r){let i=r.indexOf(n);i>-1&&r.splice(i,1)}}async queueWorkflow(t){let n=await fetch(`${this.comfyUrl}/prompt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t,client_id:this.clientId})});if(!n.ok)throw new Error(`ComfyUI API error: ${n.status}`);return(await n.json()).prompt_id}async waitForCompletion(t,n=3e5){return new Promise((r,i)=>{let o=setTimeout(()=>{this.removeProgressListener(t,a),i(new Error("ComfyUI\u51E6\u7406\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8"))},n),a=l=>{var s,u;l.type==="executed"&&((s=l.data)==null?void 0:s.prompt_id)===t?(clearTimeout(o),this.removeProgressListener(t,a),this.getHistory(t).then(r).catch(i)):l.type==="execution_error"&&(clearTimeout(o),this.removeProgressListener(t,a),i(new Error(((u=l.data)==null?void 0:u.exception_message)||"ComfyUI\u5B9F\u884C\u30A8\u30E9\u30FC")))};this.addProgressListener(t,a)})}async getHistory(t){let n=await fetch(`${this.comfyUrl}/history/${t}`);if(!n.ok)throw new Error(`Failed to get history: ${n.status}`);return n.json()}async uploadImage(t,n){let r=new FormData;r.append("image",t,n);let i=await fetch(`${this.comfyUrl}/upload/image`,{method:"POST",body:r});if(!i.ok)throw new Error(`Image upload failed: ${i.status}`);return(await i.json()).name}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.listeners.clear()}getClientId(){return this.clientId}};function Dw(e){let{prompt:t,negativePrompt:n="bad quality, blurry, low resolution",width:r=1024,height:i=1024,steps:o=20,cfg:a=8,seed:l=Math.floor(Math.random()*1e6),checkpointName:s="sd_xl_base_1.0.safetensors"}=e;return{3:{inputs:{seed:l,steps:o,cfg:a,sampler_name:"euler",scheduler:"normal",denoise:1,model:["4",0],positive:["6",0],negative:["7",0],latent_image:["5",0]},class_type:"KSampler"},4:{inputs:{ckpt_name:s},class_type:"CheckpointLoaderSimple"},5:{inputs:{width:r,height:i,batch_size:1},class_type:"EmptyLatentImage"},6:{inputs:{text:t,clip:["4",1]},class_type:"CLIPTextEncode"},7:{inputs:{text:n,clip:["4",1]},class_type:"CLIPTextEncode"},8:{inputs:{samples:["3",0],vae:["4",2]},class_type:"VAEDecode"},9:{inputs:{filename_prefix:"obsidian_generated",images:["8",0]},class_type:"SaveImage"}}}function Mw(e){let{prompt:t,negativePrompt:n="bad quality, blurry, low resolution",steps:r=20,cfg:i=8,seed:o=Math.floor(Math.random()*1e6),checkpointName:a="sd_xl_base_1.0.safetensors",i2iImageName:l,denoise:s=.7}=e;if(!l)throw new Error("i2iImageName is required for image-to-image workflow");return{3:{inputs:{seed:o,steps:r,cfg:i,sampler_name:"euler",scheduler:"normal",denoise:s,model:["4",0],positive:["6",0],negative:["7",0],latent_image:["11",0]},class_type:"KSampler"},4:{inputs:{ckpt_name:a},class_type:"CheckpointLoaderSimple"},6:{inputs:{text:t,clip:["4",1]},class_type:"CLIPTextEncode"},7:{inputs:{text:n,clip:["4",1]},class_type:"CLIPTextEncode"},8:{inputs:{samples:["3",0],vae:["4",2]},class_type:"VAEDecode"},9:{inputs:{filename_prefix:"obsidian_i2i",images:["8",0]},class_type:"SaveImage"},10:{inputs:{image:l,upload:"image"},class_type:"LoadImage"},11:{inputs:{pixels:["10",0],vae:["4",2]},class_type:"VAEEncode"}}}function Rw(e){let{prompt:t,negativePrompt:n="bad quality, blurry, low resolution",steps:r=20,cfg:i=8,seed:o=Math.floor(Math.random()*1e6),checkpointName:a="sd_xl_base_1.0.safetensors",i2iImageName:l,maskImageName:s,denoise:u=1}=e;if(!l||!s)throw new Error("Both i2iImageName and maskImageName are required for inpainting workflow");return{3:{inputs:{seed:o,steps:r,cfg:i,sampler_name:"euler",scheduler:"normal",denoise:u,model:["4",0],positive:["6",0],negative:["7",0],latent_image:["13",0]},class_type:"KSampler"},4:{inputs:{ckpt_name:a},class_type:"CheckpointLoaderSimple"},6:{inputs:{text:t,clip:["4",1]},class_type:"CLIPTextEncode"},7:{inputs:{text:n,clip:["4",1]},class_type:"CLIPTextEncode"},8:{inputs:{samples:["3",0],vae:["4",2]},class_type:"VAEDecode"},9:{inputs:{filename_prefix:"obsidian_inpaint",images:["8",0]},class_type:"SaveImage"},10:{inputs:{image:l,upload:"image"},class_type:"LoadImage"},12:{inputs:{image:s,upload:"image"},class_type:"LoadImage"},13:{inputs:{pixels:["10",0],vae:["4",2],mask:["12",1]},class_type:"VAEEncodeForInpaint"}}}var ac;(o=>{o.GENERATE_IMAGE_METADATA={name:"generate_image",description:"Generate image via FLUX.1 Kontext Max Multi and save to assets",parameters:{type:"object",properties:{prompt:{type:"string",description:"Prompt text"},app:{type:"object",description:"Obsidian app instance"},fileName:{type:"string",description:"File name",nullable:!0},imageUrls:{type:"array",description:"Reference image URLs for context",items:{type:"string"},nullable:!0},guidanceScale:{type:"number",description:"CFG scale (1.0-20.0)",minimum:1,maximum:20,nullable:!0},numImages:{type:"integer",description:"Number of images to generate (1-4)",minimum:1,maximum:4,nullable:!0},aspectRatio:{type:"string",description:'Aspect ratio (e.g., "1:1", "16:9", "9:16")',nullable:!0},seed:{type:"integer",description:"Seed for reproducible results",nullable:!0}},required:["prompt","app"]}};async function t(a,l){let u=await fetch("https://fal.run/fal-ai/flux/schnell",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Key ${l}`},body:JSON.stringify({prompt:a,image_size:"square_hd",num_inference_steps:4,num_images:1})});if(!u.ok)throw new Error(`fal.ai API \u30A8\u30E9\u30FC: ${u.status} ${await u.text()}`);let c=await u.json();if(!c.images||!c.images[0]||!c.images[0].url)throw new Error("fal.ai\u304B\u3089\u753B\u50CFURL\u304C\u8FD4\u3055\u308C\u307E\u305B\u3093\u3067\u3057\u305F");return c.images[0].url}async function n(a,l,s){let u=new oc(l);try{await u.connect();let c=(s==null?void 0:s.filter(h=>h.enabled!==!1))||[],p=c.find(h=>h.type==="image"),d=c.find(h=>h.type==="mask"),g,y;if(p){let h=await r(p.data);g=await u.uploadImage(h,"i2i_image.png")}if(d){let h=await r(d.data);y=await u.uploadImage(h,"mask_image.png")}let v={prompt:a,i2iImageName:g,maskImageName:y},S;g&&y?S=Rw(v):g?S=Mw(v):S=Dw(v);let m=await u.queueWorkflow(S);console.log(`ComfyUI workflow queued with ID: ${m}`),u.addProgressListener(m,h=>{if(h.type==="progress"&&h.data){let{value:w,max:I}=h.data;w!==void 0&&I!==void 0&&console.log(`ComfyUI Progress: ${w}/${I} (${Math.round(w/I*100)}%)`)}});let f=await u.waitForCompletion(m);if(f[m]){let h=f[m].outputs;if(h&&h[9]&&h[9].images){let w=h[9].images[0].filename;return`${l}/view?filename=${w}&type=output`}}throw new Error("ComfyUI\u304B\u3089\u753B\u50CF\u7D50\u679C\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F")}finally{u.disconnect()}}async function r(a){return(await fetch(a)).blob()}async function i(a){var L,A;let{prompt:l,app:s,fileName:u}=a,c=kw();if(!c)throw new Error("\u30D7\u30E9\u30B0\u30A4\u30F3\u8A2D\u5B9A\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093");let p;if(c.aiProvider==="fal.ai"){if(!c.falApiKey)throw new Error("fal.ai API \u30AD\u30FC\u304C\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093");p=await t(l,c.falApiKey)}else{if(!c.comfyApiUrl)throw new Error("ComfyUI URL \u304C\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093");p=await n(l,c.comfyApiUrl,a.attachments)}let d=await fetch(p);if(!d.ok)throw new Error(`\u753B\u50CF\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u30A8\u30E9\u30FC: ${d.status}`);let g=await d.arrayBuffer(),y=new Uint8Array(g),v=((A=(L=s.workspace.getActiveFile())==null?void 0:L.parent)==null?void 0:A.path)||"",S=(0,Ow.normalizePath)(`${v}/assets`),m="png",f=u!=null?u:`generated-${Date.now()}.${m}`;f.endsWith(`.${m}`)||(f+=`.${m}`);let h=`${S}/${f}`;try{s.vault.getAbstractFileByPath(S)||await s.vault.createFolder(S)}catch(O){}let w=1;for(;s.vault.getAbstractFileByPath(h);)h=`${S}/${Date.now()}_${w}.${m}`,w++;let I=await s.vault.createBinary(h,y),T={filePath:I.path,message:`\u753B\u50CF\u3092\u751F\u6210\u3057\u307E\u3057\u305F (${c.aiProvider}): ${I.path}`};return JSON.stringify(T)}o.executeGenerateImage=i})(ac||(ac={}));var Wp={name:"generate_image",description:"Generate image via FLUX.1 Kontext Max Multi and save to assets",parameters:ac.GENERATE_IMAGE_METADATA.parameters,execute:ac.executeGenerateImage};var Fw=[Ip,Tp,Pp,Ap,Dp,Op,Fp,Np,Up,Bp,zp,Vp,Hp,Gp,Wp];var Ut;(a=>{a.tools=new Map,a.aiEnabledTools=new Set,a.config=Qv;function r(l){return typeof l=="object"&&l!==null&&typeof l.name=="string"&&typeof l.description=="string"&&l.parameters!==void 0&&typeof l.execute=="function"}a.isValidTool=r;async function i(l){let s=Fw.find(u=>u.name===l.name);if(!s)throw new Error(`Tool not found: ${l.name}`);if(!r(s))throw new Error(`Invalid tool for ${l.name}`);o(s),l.ai_enabled&&a.aiEnabledTools.add(s.name)}a.loadToolFromConfig=i;function o(l){a.tools.has(l.name)||a.tools.set(l.name,l)}a.registerToolInternal=o})(Ut||(Ut={}));var jp=class{constructor(){Ut.config.config.autoRegister?this.ready=this.autoRegisterTools():this.ready=Promise.resolve()}async autoRegisterTools(){let t=0,n=0;for(let r of Ut.config.tools)try{await Ut.loadToolFromConfig(r),t++}catch(i){if(n++,Ut.config.config.failOnError)throw new Error(`Tool registration failed for ${r.name}: ${i}`)}Yr.initialize(Ut.tools,Ut.aiEnabledTools,Ut.config)}getTool(t){return Yr.getTool(t)}getAllTools(){return Array.from(Ut.tools.values())}getAiEnabledTools(){return this.getAllTools().filter(t=>Ut.aiEnabledTools.has(t.name))}getRegisteredToolNames(){return Array.from(Ut.tools.keys())}getAiEnabledToolNames(){return Array.from(Ut.aiEnabledTools)}hasToolRegistered(t){return Yr.hasToolRegistered(t)}isAiEnabled(t){return Yr.isAiEnabled(t)}async executeTool(t,n){return Yr.executeTool(t,n)}printToolInfo(){Ut.tools.forEach((t,n)=>{let r=Ut.aiEnabledTools.has(n)})}},Ie=new jp;function Nw(e,t){let n=e.containerEl.querySelector(".view-header-title");n&&(n.textContent=t)}var zi=class extends qo.FileView{constructor(n,r){super(n);this.reactRoot=null;this.actionsAdded=!1;this.renderReact=r}getViewType(){return"psd-view"}getDisplayText(){var n;return((n=this.file)==null?void 0:n.basename)||"Untitled"}updateTitle(n,r,i){if(!this.file)return;let o=this.file.basename;n&&r&&(o+=` (${n}x${r})`),i&&(o+=` ${i}%`),Nw(this,o)}getState(){var n,r;return{file:(r=(n=this.file)==null?void 0:n.path)!=null?r:null}}async onOpen(){this.actionsAdded||(this.addActionButtons(),this.actionsAdded=!0)}addActionButtons(){var i,o;let n=this.addAction("",te("EDIT_MENU"),async a=>{let l=new qo.Menu;l.addItem(s=>s.setTitle(te("UNDO")).onClick(async()=>{try{await Ie.executeTool("undo_painter",{})}catch(u){console.error(u)}})),l.addItem(s=>s.setTitle(te("REDO")).onClick(async()=>{try{await Ie.executeTool("redo_painter",{})}catch(u){console.error(u)}})),l.showAtMouseEvent(a)});(i=n.querySelector("svg"))==null||i.remove(),n.textContent=te("EDIT_MENU");let r=this.addAction("",te("EXPORT_MERGED_IMAGE"),async()=>{var a;if(this._painterData)try{await Ie.executeTool("export_merged_image",{app:this.app,layers:this._painterData.layers,fileName:`${((a=this.file)==null?void 0:a.basename)||"merged"}.png`})}catch(l){console.error(l)}});(o=r.querySelector("svg"))==null||o.remove(),r.textContent=te("EXPORT_MERGED_IMAGE")}async setState(n){if(!n.file)return;let r=this.app.vault.getAbstractFileByPath(n.file);r instanceof qo.TFile&&(this.file=r,this.updateTitle(),this.renderReact())}async onClose(){this.reactRoot&&(this.reactRoot.unmount(),this.reactRoot=null)}};var jt=ae(ft(),1);var tr=ae(ft(),1);function $p(){let[e,t]=(0,tr.useState)("brush"),[n,r]=(0,tr.useState)(5),[i,o]=(0,tr.useState)("#000000"),[a,l]=(0,tr.useState)("normal"),[s,u]=(0,tr.useState)("rect"),[c,p]=(0,tr.useState)(!0),[d,g]=(0,tr.useState)(100),[y,v]=(0,tr.useState)(50),[S,m]=(0,tr.useState)(100);return{tool:e,drawingMode:a,lineWidth:n,color:i,selectionMode:s,brushHasColor:c,brushOpacity:d,blendStrength:y,mixRatio:S,setTool:h=>{switch(t(h),h){case"pen":g(100),l("normal"),m(100),v(0),p(!0);break;case"brush":g(10),l("normal"),m(100),v(0),p(!0);break;case"paint-brush":g(10),l("spectral"),m(50),v(50),p(!0);break;case"color-mixer":g(0),l("spectral"),m(0),v(100),p(!1);break;case"eraser":g(100),l("erase-soft"),m(100),v(0),p(!0);break;default:break}},setDrawingMode:l,setLineWidth:r,setColor:o,setSelectionMode:u,setBrushHasColor:p,setBrushOpacity:g,setBlendStrength:v,setMixRatio:m}}function lc(e,t){if(!e)return{x:0,y:0};let n=e.getBoundingClientRect(),r=e.width/n.width,i=e.height/n.height,o=(t.clientX-n.left)*r,a=(t.clientY-n.top)*i;return{x:o,y:a}}var an=ae(ft(),1);var Uw=ae(ft(),1);function Yp(){let e=(0,Uw.useRef)(null);if(!e.current){let t={mode:"rect",version:0,selectionMask:void 0,selectionClipPath:void 0,selectionOutline:void 0,selectionBounding:void 0,tempRect:void 0,tempLassoPoints:[],reset(){t.selectionMask=void 0,t.selectionClipPath=void 0,t.selectionOutline=void 0,t.selectionBounding=void 0,t.tempRect=void 0,t.tempLassoPoints=[]},hasSelection(){return!!(t.selectionMask||t.selectionClipPath)},getBoundingRect(){return t.selectionBounding},setMode(n){t.mode=n,t.tempRect=void 0,t.tempLassoPoints=[],t.version++},forceUpdate(){t.version++},computeMagicSelection(n,r,i){let o=n.getContext("2d");if(!o)return;let a=n.width,l=n.height;if(r<0||i<0||r>=a||i>=l)return;let u=o.getImageData(0,0,a,l).data,c=new Uint8Array(a*l),p=(D,b)=>b*a+D,d=(D,b)=>(b*a+D)*4,g=Math.round(r),y=Math.round(i),v=d(g,y),S=u[v],m=u[v+1],f=u[v+2],h=[g,y],w=32;for(;h.length;){let D=h.pop(),b=h.pop();if(b===void 0||D===void 0)break;let k=p(b,D);if(c[k])continue;let M=k*4,H=u[M],j=u[M+1],ne=u[M+2];Math.abs(H-S)>w||Math.abs(j-m)>w||Math.abs(ne-f)>w||(c[k]=1,b>0&&h.push(b-1,D),b<a-1&&h.push(b+1,D),D>0&&h.push(b,D-1),D<l-1&&h.push(b,D+1))}let I=new Path2D,T=new Path2D,L=a,A=l,O=0,R=0,F=!1,q=(D,b)=>{if(D<0||b<0||D>=a||b>=l)return!1;let k=p(D,b);return c[k]?D===0||!c[p(D-1,b)]||D===a-1||!c[p(D+1,b)]||b===0||!c[p(D,b-1)]||b===l-1||!c[p(D,b+1)]:!1};for(let D=0;D<l;D++){let b=-1;for(let k=0;k<a;k++){let M=p(k,D);c[M]?(F=!0,k<L&&(L=k),k>O&&(O=k),D<A&&(A=D),D>R&&(R=D),I.rect(k,D,1,1),q(k,D)?b===-1&&(b=k):b!==-1&&(T.moveTo(b+.5,D+.5),T.lineTo(k+.5,D+.5),b=-1)):b!==-1&&(T.moveTo(b+.5,D+.5),T.lineTo(k+.5,D+.5),b=-1)}b!==-1&&(T.moveTo(b+.5,D+.5),T.lineTo(a+.5,D+.5))}if(!F||L>O||A>R){t.selectionClipPath=void 0,t.selectionOutline=void 0,t.selectionBounding=void 0,t.version++;return}t.selectionClipPath=I,t.selectionOutline=T,t.selectionBounding={x:L,y:A,width:O-L+1,height:R-A+1},t.version++},updateMaskSelection(n,r,i,o,a){if(!t.selectionMask&&(t.selectionMask=document.createElement("canvas"),t.selectionMask.width=n.width,t.selectionMask.height=n.height,t.selectionClipPath)){let h=t.selectionMask.getContext("2d");h&&(h.fillStyle="white",h.fill(t.selectionClipPath))}let l=t.selectionMask.getContext("2d");if(!l)return;l.lineCap="round",l.lineJoin="round",l.lineWidth=a,o==="select-eraser"?(l.globalCompositeOperation="destination-out",l.strokeStyle="rgba(0,0,0,1)"):(l.globalCompositeOperation="source-over",l.strokeStyle="rgba(255,255,255,1)"),l.beginPath(),l.moveTo(r.x,r.y),l.lineTo(i.x,i.y),l.stroke(),l.globalCompositeOperation="source-over";let{width:s,height:u}=t.selectionMask,c=l.getImageData(0,0,s,u).data,p=new Path2D,d=new Path2D,g=s,y=u,v=0,S=0,m=!1,f=(h,w)=>(w*s+h)*4+3;for(let h=0;h<u;h++){let w=-1;for(let I=0;I<s;I++)if(c[f(I,h)]>0){m=!0,I<g&&(g=I),I>v&&(v=I),h<y&&(y=h),h>S&&(S=h),p.rect(I,h,1,1);let L=I===0?0:c[f(I-1,h)],A=I===s-1?0:c[f(I+1,h)],O=h===0?0:c[f(I,h-1)],R=h===u-1?0:c[f(I,h+1)];!(L&&A&&O&&R)?w===-1&&(w=I):w!==-1&&(d.moveTo(w+.5,h+.5),d.lineTo(I+.5,h+.5),w=-1)}else w!==-1&&(d.moveTo(w+.5,h+.5),d.lineTo(I+.5,h+.5),w=-1);w!==-1&&(d.moveTo(w+.5,h+.5),d.lineTo(s+.5,h+.5))}if(!m){t.selectionClipPath=void 0,t.selectionOutline=void 0,t.selectionBounding=void 0,t.version++;return}t.selectionClipPath=p,t.selectionOutline=d,t.selectionBounding={x:g,y,width:v-g+1,height:S-y+1},t.version++}};e.current=t}return e.current}var si=er()(Lw(e=>({layoutDirection:"horizontal",setLayoutDirection:t=>e({layoutDirection:t})}),{name:"painter-layout-store",storage:{getItem:async e=>{try{return typeof window!="undefined"&&window.boardPlugin&&(await window.boardPlugin.loadData()||{}).painterLayoutStore||null}catch(t){return null}},setItem:async(e,t)=>{try{if(typeof window!="undefined"&&window.boardPlugin){let n=window.boardPlugin,r=await n.loadData()||{};r.painterLayoutStore=t,await n.saveData(r)}}catch(n){console.error(n)}},removeItem:async e=>{try{if(typeof window!="undefined"&&window.boardPlugin){let t=window.boardPlugin,n=await t.loadData()||{};delete n.painterLayoutStore,await t.saveData(n)}}catch(t){console.error(t)}}}}));var sc=er((e,t)=>({attachments:[],addAttachment:n=>{e(r=>({attachments:[...r.attachments,n]}))},removeAttachment:n=>{e(r=>{let i=[...r.attachments],[o]=i.splice(n,1);return o&&URL.revokeObjectURL(o.url),{attachments:i}})},toggleAttachment:n=>{e(r=>{let i=[...r.attachments];return i[n]&&(i[n]={...i[n],enabled:!i[n].enabled}),{attachments:i}})},clearAttachments:()=>{e(n=>(n.attachments.forEach(r=>URL.revokeObjectURL(r.url)),{attachments:[]}))}}));var Vi=ae(ke(),1),FI=({handlers:e,mode:t="global",position:n={x:8,y:8},isFloating:r=!1,layoutDirection:i="horizontal"})=>{if(t==="hidden")return null;let o="flex gap-1 bg-secondary border border-modifier-border p-2 rounded",a;r?a=`absolute ${o} shadow-lg z-50`:a=i==="horizontal"?`${o} border-r border-l-0 border-t-0 border-b-0 w-[250px] flex-col`:`${o} border-b border-l-0 border-t-0 border-r-0 flex-row items-center`;let l="px-2 py-1 text-xs bg-primary hover:bg-modifier-hover text-text-normal rounded border-none cursor-pointer";return(0,Vi.jsxs)("div",{className:a,style:r?{left:`${n.x}px`,top:`${n.y}px`}:void 0,children:[(0,Vi.jsx)("button",{className:l,onClick:e.fill,title:"\u5857\u308A\u3064\u3076\u3057",children:"\u5857\u308A\u3064\u3076\u3057"}),(0,Vi.jsx)("button",{className:l,onClick:e.clear,title:"\u30AF\u30EA\u30A2",children:"\u30AF\u30EA\u30A2"}),e.edit&&(0,Vi.jsx)("button",{className:l,onClick:e.edit,title:"\u7DE8\u96C6",children:"\u7DE8\u96C6"}),t==="selection"&&e.cancel&&(0,Vi.jsx)("button",{className:l,onClick:e.cancel,title:"\u30AD\u30E3\u30F3\u30BB\u30EB",children:"\u30AD\u30E3\u30F3\u30BB\u30EB"})]})},Xp=FI;var Cl=ae(ft(),1);var bl=ae(ft(),1);function NI(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function UI(e,t,n){return"#"+[e,t,n].map(r=>r.toString(16).padStart(2,"0")).join("")}function BI(e,t,n){e/=255,t/=255,n/=255;let r=Math.max(e,t,n),i=Math.min(e,t,n),o=0,a=0,l=(r+i)/2;if(r!==i){let s=r-i;switch(a=l>.5?s/(2-r-i):s/(r+i),r){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4;break}o*=60}return{h:o,s:a*100,l:l*100}}function cc(e,t,n){t/=100,n/=100;let r=(1-Math.abs(2*n-1))*t,i=r*(1-Math.abs(e/60%2-1)),o=n-r/2,a=0,l=0,s=0;return 0<=e&&e<60?(a=r,l=i,s=0):60<=e&&e<120?(a=i,l=r,s=0):120<=e&&e<180?(a=0,l=r,s=i):180<=e&&e<240?(a=0,l=i,s=r):240<=e&&e<300?(a=i,l=0,s=r):(a=r,l=0,s=i),{r:Math.round((a+o)*255),g:Math.round((l+o)*255),b:Math.round((s+o)*255)}}function Zp(e){let t=NI(e);return t?BI(t.r,t.g,t.b):{h:0,s:0,l:0}}function Hw(e,t,n){let{r,g:i,b:o}=cc(e,t,n);return UI(r,i,o)}var Ww=ae(ke(),1);function Gw(e,t){return t*(100-50*e)}function zI(e,t){let n=100-50*e;return n<=0?0:t/n}function Kp({hue:e,saturation:t,lightness:n,onChange:r,size:i=100}){let o=(0,bl.useRef)(null),a=(0,bl.useRef)(null);(0,bl.useEffect)(()=>{let d=o.current;if(!d)return;let g=d.getContext("2d");if(!g)return;let y=i/2,v=i*.15,S=y-v,m=S*Math.SQRT2,f=m/2,h=g.createImageData(i,i),w=h.data;for(let q=0;q<i;q++)for(let D=0;D<i;D++){let b=D-y,k=q-y,M=Math.sqrt(b*b+k*k),H=(q*i+D)*4;if(M>y){w[H+3]=0;continue}if(M>=S){let j=Math.atan2(k,b);j<0&&(j+=Math.PI*2);let ne=j*180/Math.PI,{r:U,g:z,b:Q}=cc(ne,100,50);w[H]=U,w[H+1]=z,w[H+2]=Q,w[H+3]=255}else if(Math.abs(b)<=f&&Math.abs(k)<=f){let j=(b+f)/m,ne=1-(k+f)/m,U=Gw(j,ne),{r:z,g:Q,b:ee}=cc(e,j*100,U);w[H]=z,w[H+1]=Q,w[H+2]=ee,w[H+3]=255}else w[H+3]=0}g.putImageData(h,0,0);let I=e*Math.PI/180,T=y-v/2,L=y+T*Math.cos(I),A=y+T*Math.sin(I);g.strokeStyle="#ffffff",g.lineWidth=2,g.beginPath(),g.arc(L,A,4,0,Math.PI*2),g.stroke();let O=y-f+t*m,R=zI(t,n),F=y-f+(1-R)*m;g.strokeRect(O-3,F-3,6,6)},[e,t,n,i]);function l(d,g){let y=i/2,v=i*.15,S=y-v,m=Math.sqrt(d*d+g*g);return m>=S&&m<=y?"hue":m<S?"sl":null}function s(d,g){let y=d.currentTarget.getBoundingClientRect(),v=d.clientX-y.left-i/2,S=d.clientY-y.top-i/2,m=i/2,f=i*.15,h=m-f;if(g==="hue"){let w=Math.atan2(S,v);w<0&&(w+=Math.PI*2),r(w*180/Math.PI,t,n)}else{let w=h*Math.SQRT2,I=w/2,T=Math.max(-I,Math.min(I,v)),L=Math.max(-I,Math.min(I,S)),A=(T+I)/w,O=1-(L+I)/w,R=Gw(A,O);r(e,A,R)}}function u(d){let g=d.currentTarget.getBoundingClientRect(),y=d.clientX-g.left-i/2,v=d.clientY-g.top-i/2,S=l(y,v);S&&(a.current=S,s(d,S))}function c(d){a.current&&s(d,a.current)}function p(){a.current=null}return(0,Ww.jsx)("canvas",{ref:o,width:i,height:i,onMouseDown:u,onMouseMove:c,onMouseUp:p,onMouseLeave:p,className:"cursor-crosshair rounded-full select-none"})}var Il=ae(ke(),1);function qp({color:e,setColor:t,layoutDirection:n}){let[r,i]=(0,Cl.useState)(()=>Zp(e));(0,Cl.useEffect)(()=>{i(Zp(e))},[e]),(0,Cl.useEffect)(()=>{t(Hw(r.h,r.s,r.l))},[r,t]);let o=n==="horizontal"?"p-2 bg-secondary border-r border-modifier-border w-[250px] flex flex-col items-center gap-2":"p-2 bg-secondary border-b border-modifier-border flex flex-row items-center gap-2",a=(l,s,u)=>{i({h:l,s:s*100,l:u})};return(0,Il.jsxs)("div",{className:o,children:[(0,Il.jsx)("div",{className:"text-text-muted text-xs",children:"\u30AB\u30E9\u30FC"}),(0,Il.jsx)(Kp,{hue:r.h,saturation:r.s/100,lightness:r.l,onChange:a,size:120})]})}var K=ae(ke(),1);function Qp({tool:e,drawingMode:t,lineWidth:n,selectionMode:r,brushHasColor:i,brushOpacity:o,blendStrength:a,mixRatio:l,zoom:s,rotation:u,canvasWidth:c,canvasHeight:p,actualZoom:d,maintainAspectRatio:g,resizeMode:y,setDrawingMode:v,setLineWidth:S,setSelectionMode:m,setBrushHasColor:f,setBrushOpacity:h,setBlendStrength:w,setMixRatio:I,setZoom:T,setRotation:L,setCanvasSize:A,setMaintainAspectRatio:O,setResizeMode:R,layoutDirection:F}){let{setLayoutDirection:q}=si();return(0,K.jsxs)("div",{className:F==="horizontal"?"p-2 bg-secondary border-r border-modifier-border w-[250px] flex flex-col gap-2":"p-2 bg-secondary border-b border-modifier-border flex flex-row gap-4 items-center flex-wrap",children:[e==="settings"&&(0,K.jsxs)("div",{className:F==="horizontal"?"flex flex-col gap-2":"flex flex-row gap-2 items-center",children:[(0,K.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,K.jsxs)("div",{className:"text-text-muted text-xs",children:[te("LAYOUT_SETTINGS"),":"]}),(0,K.jsxs)("select",{className:F==="horizontal"?"w-full text-xs p-1 border border-modifier-border rounded bg-primary":"text-xs p-1 border border-modifier-border rounded bg-primary",value:F,onChange:b=>q(b.target.value),children:[(0,K.jsx)("option",{value:"horizontal",children:te("LAYOUT_HORIZONTAL")}),(0,K.jsx)("option",{value:"vertical",children:te("LAYOUT_VERTICAL")})]})]}),(0,K.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,K.jsx)("div",{className:"text-text-muted text-xs",children:"\u30AD\u30E3\u30F3\u30D0\u30B9\u30B5\u30A4\u30BA:"}),(0,K.jsxs)("label",{className:"flex items-center gap-1 text-xs",children:[(0,K.jsx)("input",{type:"checkbox",checked:g,onChange:b=>O(b.target.checked),className:"w-3 h-3"}),"\u7E26\u6A2A\u6BD4\u3092\u7DAD\u6301"]}),(0,K.jsxs)("div",{className:F==="horizontal"?"flex flex-col gap-1":"flex flex-row gap-2",children:[(0,K.jsxs)("div",{className:"flex items-center gap-1",children:[(0,K.jsx)("span",{className:"text-xs",children:"\u5E45:"}),(0,K.jsx)("input",{type:"number",min:100,max:4e3,step:10,value:c,onChange:b=>{let k=parseInt(b.target.value)||c;if(g){let M=c/p,H=Math.round(k/M);A(k,H)}else A(k,p)},className:"w-20 text-xs p-1 border border-modifier-border rounded bg-primary"}),(0,K.jsx)("span",{className:"text-xs",children:"px"})]}),(0,K.jsxs)("div",{className:"flex items-center gap-1",children:[(0,K.jsx)("span",{className:"text-xs",children:"\u9AD8:"}),(0,K.jsx)("input",{type:"number",min:100,max:4e3,step:10,value:p,onChange:b=>{let k=parseInt(b.target.value)||p;if(g){let M=c/p,H=Math.round(k*M);A(H,k)}else A(c,k)},className:"w-20 text-xs p-1 border border-modifier-border rounded bg-primary"}),(0,K.jsx)("span",{className:"text-xs",children:"px"})]})]}),(0,K.jsxs)("div",{className:"flex flex-col gap-1 mt-2",children:[(0,K.jsx)("div",{className:"text-text-muted text-xs",children:"\u753B\u50CF\u306E\u51E6\u7406:"}),(0,K.jsxs)("label",{className:"flex items-center gap-1 text-xs",children:[(0,K.jsx)("input",{type:"radio",name:"resizeMode",value:"canvas-only",checked:y==="canvas-only",onChange:b=>R(b.target.value),className:"w-3 h-3"}),"\u30AD\u30E3\u30F3\u30D0\u30B9\u30B5\u30A4\u30BA\u306E\u307F\u5909\u66F4"]}),(0,K.jsxs)("label",{className:"flex items-center gap-1 text-xs",children:[(0,K.jsx)("input",{type:"radio",name:"resizeMode",value:"resize-content",checked:y==="resize-content",onChange:b=>R(b.target.value),className:"w-3 h-3"}),"\u753B\u50CF\u3082\u7E26\u6A2A\u6BD4\u3092\u7DAD\u6301\u3057\u3066\u30EA\u30B5\u30A4\u30BA"]})]})]})]}),["pen","brush","paint-brush","color-mixer","eraser"].includes(e)&&(0,K.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,K.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,K.jsxs)("div",{className:"text-text-muted text-xs",children:[te("BRUSH_SIZE"),": ",n,"px"]}),(0,K.jsx)("input",{type:"range",min:0,max:100,value:Math.log10(n)*33.33,onChange:b=>{let k=parseInt(b.currentTarget.value,10)/33.33,M=Math.round(Math.pow(10,k));S(Math.max(1,Math.min(1e3,M)))}})]}),(0,K.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,K.jsxs)("div",{className:"text-text-muted text-xs",children:[te("BRUSH_OPACITY"),": ",o,"%"]}),(0,K.jsx)("input",{type:"range",min:0,max:100,value:Math.sqrt(o)*10,onChange:b=>{let k=parseInt(b.currentTarget.value,10),M=Math.round((k/10)**2);h(Math.max(0,Math.min(100,M))),f(M>0)}})]}),(0,K.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,K.jsx)("div",{className:"text-text-muted text-xs",children:te("COLOR_MIX_RATIO").replace("{canvas}",(100-l).toString()).replace("{pen}",l.toString())}),(0,K.jsx)("input",{type:"range",min:0,max:100,value:l,onChange:b=>I(parseInt(b.currentTarget.value,10))})]}),(0,K.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,K.jsxs)("div",{className:"text-text-muted text-xs",children:[te("BLEND_STRENGTH"),": ",a,"%"]}),(0,K.jsx)("input",{type:"range",min:0,max:100,value:Math.sqrt(a)*10,onChange:b=>{let k=parseInt(b.currentTarget.value,10),M=Math.round((k/10)**2);w(Math.max(0,Math.min(100,M)))}})]}),(0,K.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,K.jsxs)("div",{className:"text-text-muted text-xs",children:[te("DRAWING_MODE"),":"]}),(0,K.jsxs)("select",{className:"w-full text-xs p-1 border border-modifier-border rounded bg-primary",value:t,onChange:b=>v(b.target.value),children:[(0,K.jsx)("option",{value:"normal",children:te("DRAWING_MODE_NORMAL")}),(0,K.jsx)("option",{value:"spectral",children:te("DRAWING_MODE_SPECTRAL")}),(0,K.jsx)("option",{value:"erase-soft",children:te("DRAWING_MODE_ERASE_SOFT")})]})]})]}),e==="selection"&&(0,K.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,K.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,K.jsxs)("div",{className:"text-text-muted text-xs",children:[te("SELECTION_TYPE"),":"]}),(0,K.jsxs)("select",{className:"w-full text-xs",value:r,onChange:b=>m(b.currentTarget.value),children:[(0,K.jsx)("option",{value:"rect",children:te("SELECT_RECT")}),(0,K.jsx)("option",{value:"lasso",children:te("SELECT_LASSO")}),(0,K.jsx)("option",{value:"magic",children:te("SELECT_MAGIC")}),(0,K.jsx)("option",{value:"select-pen",children:te("SELECT_PEN")}),(0,K.jsx)("option",{value:"select-eraser",children:te("SELECT_ERASER")})]})]}),(r==="select-pen"||r==="select-eraser")&&(0,K.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,K.jsxs)("div",{className:"text-text-muted text-xs",children:[te("BRUSH_SIZE"),": ",n,"px"]}),(0,K.jsx)("input",{type:"range",min:0,max:100,value:Math.log10(n)*33.33,onChange:b=>{let k=parseInt(b.currentTarget.value,10)/33.33,M=Math.round(Math.pow(10,k));S(Math.max(1,Math.min(1e3,M)))}})]})]}),e==="hand"&&(0,K.jsxs)("div",{className:F==="horizontal"?"flex flex-col gap-2":"flex flex-row gap-4",children:[(0,K.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,K.jsxs)("div",{className:"text-text-muted text-xs",children:[te("ZOOM_LEVEL"),": ",d!==void 0?d:s,"%"]}),(0,K.jsx)("input",{type:"range",min:10,max:400,value:s,onChange:b=>T(parseInt(b.currentTarget.value,10))})]}),(0,K.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,K.jsxs)("div",{className:"text-text-muted text-xs",children:[te("ROTATION_ANGLE"),": ",u,"\xB0"]}),(0,K.jsx)("input",{type:"range",min:-180,max:180,value:u,onChange:b=>L(parseInt(b.currentTarget.value,10))})]})]})]})}var Je=ae(ft(),1);var ui=ae(ke(),1);function Jp({rect:e,layers:t,currentLayerIndex:n,containerRef:r,onFinish:i}){let o=(0,Je.useRef)(null),a=(0,Je.useRef)(null),l=e||(t[n]?{x:0,y:0,width:t[n].canvas.width,height:t[n].canvas.height}:{x:0,y:0,width:800,height:600}),[s,u]=(0,Je.useState)({x:0,y:0}),[c,p]=(0,Je.useState)(1),[d,g]=(0,Je.useState)(0),[y,v]=(0,Je.useState)({left:l.x,top:l.y,width:l.width,height:l.height}),S=(0,Je.useRef)(1),m=(0,Je.useRef)(!1),f=(0,Je.useRef)({x:0,y:0}),h=(0,Je.useRef)(!1),w=(0,Je.useRef)({x:0,y:0}),I=(0,Je.useRef)(1),T=(0,Je.useRef)(0),L=(0,Je.useRef)(1),A=(0,Je.useRef)(0);(0,Je.useEffect)(()=>{let D=r.current;if(!D)return;let b=D.querySelector("canvas");if(!(b instanceof HTMLCanvasElement))return;let k=b.getBoundingClientRect(),M=D.getBoundingClientRect(),H=k.width/b.width,j=k.height/b.height,ne=l.x*H+(k.left-M.left),U=l.y*j+(k.top-M.top),z=l.width*H,Q=l.height*j;S.current=H,v({left:ne,top:U,width:z,height:Q})},[l,r]),(0,Je.useEffect)(()=>{let D=t[n];if(!D)return;let b=D.canvas.getContext("2d"),k=o.current;if(!b||!k)return;let M=document.createElement("canvas");M.width=l.width,M.height=l.height;let H=M.getContext("2d");if(!H)return;H.drawImage(D.canvas,l.x,l.y,l.width,l.height,0,0,l.width,l.height),a.current=M,k.width=l.width,k.height=l.height;let j=k.getContext("2d");j&&(j.drawImage(D.canvas,l.x,l.y,l.width,l.height,0,0,l.width,l.height),b.clearRect(l.x,l.y,l.width,l.height))},[l,n]),(0,Je.useEffect)(()=>{let D=o.current;if(D){let b=S.current;D.style.transform=`translate(${s.x*b}px, ${s.y*b}px) scale(${c}) rotate(${d}rad)`}},[s,c,d]),(0,Je.useEffect)(()=>{let D=k=>{m.current&&u(M=>{let H=S.current,j=M.x+(k.clientX-f.current.x)/H,ne=M.y+(k.clientY-f.current.y)/H;return f.current={x:k.clientX,y:k.clientY},{x:j,y:ne}})},b=()=>{m.current=!1};return window.addEventListener("pointermove",D),window.addEventListener("pointerup",b),()=>{window.removeEventListener("pointermove",D),window.removeEventListener("pointerup",b)}},[]);let O=()=>{let b=t[n].canvas.getContext("2d"),k=o.current;if(!b||!k)return;b.save(),b.translate(l.x+l.width/2+s.x,l.y+l.height/2+s.y),b.rotate(d),b.scale(c,c),b.drawImage(k,-l.width/2,-l.height/2),b.restore();let M=se.getState();rt.getState().saveHistory(M.layers,n),M.updateLayers([...M.layers]),i()},R=()=>{let b=t[n].canvas.getContext("2d"),k=a.current;if(!b||!k)return;b.clearRect(l.x,l.y,l.width,l.height),b.drawImage(k,l.x,l.y);let M=se.getState();M.updateLayers([...M.layers]),i()},F=D=>{m.current=!0,f.current={x:D.clientX,y:D.clientY}},q=D=>{if(D.stopPropagation(),!o.current)return;h.current=!0;let b=o.current.getBoundingClientRect(),k=b.left+b.width/2,M=b.top+b.height/2,H=D.clientX-k,j=D.clientY-M;w.current={x:H,y:j},I.current=Math.hypot(H,j),T.current=Math.atan2(j,H),L.current=c,A.current=d;let ne=z=>{if(!h.current||!o.current)return;let Q=o.current.getBoundingClientRect(),ee=Q.left+Q.width/2,_e=Q.top+Q.height/2,J=z.clientX-ee,ze=z.clientY-_e,sn=Math.hypot(J,ze),xn=Math.atan2(ze,J);p(L.current*(sn/I.current)),g(A.current+(xn-T.current))},U=()=>{h.current=!1,window.removeEventListener("pointermove",ne),window.removeEventListener("pointerup",U)};window.addEventListener("pointermove",ne),window.addEventListener("pointerup",U)};return(0,ui.jsxs)("div",{className:"absolute z-50",style:{left:y.left,top:y.top,width:y.width,height:y.height},onPointerDown:F,children:[(0,ui.jsx)("canvas",{ref:o,style:{width:y.width,height:y.height,pointerEvents:"none",border:"1px dashed var(--color-accent)"}}),(0,ui.jsxs)("div",{className:"absolute left-0 -top-7 flex gap-1 bg-secondary border border-modifier-border p-1 rounded",children:[(0,ui.jsx)("button",{className:"px-2 py-1 text-xs",onClick:O,children:"\u78BA\u5B9A"}),(0,ui.jsx)("button",{className:"px-2 py-1 text-xs",onClick:R,children:"\u30AD\u30E3\u30F3\u30BB\u30EB"})]}),(0,ui.jsx)("div",{className:"absolute w-4 h-4 bg-background border-2 border-accent rounded-full cursor-grab",style:{right:"-8px",bottom:"-8px"},onPointerDown:q})]})}var it=ae(ft(),1);var Tl=ae($w(),1);function Qo(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function VI(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}function Ll(e,t,n){let r=Qo(e),i=Qo(t);if(!r||!i)return e;let o=Math.round(r.r*(1-n)+i.r*n),a=Math.round(r.g*(1-n)+i.g*n),l=Math.round(r.b*(1-n)+i.b*n);return VI(o,a,l)}function fc(e,t,n){try{let r=Qo(e),i=Qo(t);if(!r||!i)return e;let o=new Tl.Color([r.r,r.g,r.b]),a=new Tl.Color([i.r,i.g,i.b]),s=Tl.mix([o,1-n],[a,n]).toString();return s.startsWith("#")?s:"#"+s}catch(r){return console.error("\u30B9\u30DA\u30AF\u30C8\u30E9\u30EB\u6DF7\u8272\u30A8\u30E9\u30FC:",r),Ll(e,t,n)}}function HI(e,t){let n=Qo(e),r=Qo(t);if(!n||!r)return!1;let i=30;return Math.abs(n.r-r.r)>i||Math.abs(n.g-r.g)>i||Math.abs(n.b-r.b)>i}function GI(e,t){if(e.length===0)return"#000000";if(e.length===1)return e[0];let n=e[0];for(let r=1;r<e.length;r++){let i=1/(r+1);n=t==="spectral"?fc(n,e[r],i):Ll(n,e[r],i)}return n}function WI(e,t){if(e.length===0)return"#000000";if(e.length===1)return e[0];let n=e[0];for(let r=1;r<e.length;r++)n=t==="spectral"?fc(n,e[r],.5):Ll(n,e[r],.5);return n}function Yw(e,t,n,r){let i=r.brushOpacity/100;e.globalCompositeOperation="destination-out",e.globalAlpha=i,e.strokeStyle="rgba(0,0,0,1)",e.lineWidth=r.lineWidth,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.stroke(),e.globalAlpha=1,e.globalCompositeOperation="source-over"}function Xw(e,t,n,r){let i=r.lineWidth/2,o=r.brushOpacity/100,a=Math.sqrt((n.x-t.x)**2+(n.y-t.y)**2),l=Math.max(1,Math.floor(a));for(let s=0;s<=l;s++){let u=l===0?0:s/l,c=t.x+(n.x-t.x)*u,p=t.y+(n.y-t.y)*u,d=e.getImageData(Math.max(0,c-i),Math.max(0,p-i),Math.min(r.lineWidth,e.canvas.width-(c-i)),Math.min(r.lineWidth,e.canvas.height-(p-i))),g=d.data,y=d.width,v=d.height,S=r.color;if(r.mixRatio<100){let f=[];for(let h=0;h<v;h++)for(let w=0;w<y;w++){let I=(h*y+w)*4;if(g[I+3]>0){let L=g[I],A=g[I+1],O=g[I+2],R=`#${L.toString(16).padStart(2,"0")}${A.toString(16).padStart(2,"0")}${O.toString(16).padStart(2,"0")}`;f.push(R)}}if(f.length>0){let h=r.drawingMode==="spectral"?"spectral":"normal",w=WI(f,h),I=r.mixRatio/100;S=h==="spectral"?fc(w,r.color,I):Ll(w,r.color,I)}}let m=r.blendStrength/100;if(m>0){let f=i*Math.max(.3,m),h=e.createRadialGradient(c,p,0,c,p,f);h.addColorStop(0,S+Math.floor(255*o).toString(16).padStart(2,"0")),h.addColorStop(.7,S+Math.floor(255*o*m*.8).toString(16).padStart(2,"0")),h.addColorStop(1,S+"00"),e.globalCompositeOperation="source-over",e.fillStyle=h,e.beginPath(),e.arc(c,p,f,0,Math.PI*2),e.fill()}else{e.globalCompositeOperation="source-over",e.globalAlpha=o,e.strokeStyle=S,e.lineWidth=r.lineWidth,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.stroke(),e.globalAlpha=1;return}}}function Zw(e,t,n,r){let i=r.lineWidth/2,o=r.blendStrength/100;if(o===0)return;let a=Math.sqrt((n.x-t.x)**2+(n.y-t.y)**2),l=Math.max(1,Math.floor(a));for(let s=0;s<=l;s++){let u=l===0?0:s/l,c=t.x+(n.x-t.x)*u,p=t.y+(n.y-t.y)*u,d=e.getImageData(Math.max(0,c-i),Math.max(0,p-i),Math.min(r.lineWidth,e.canvas.width-(c-i)),Math.min(r.lineWidth,e.canvas.height-(p-i))),g=d.data,y=d.width,v=d.height,S=new Set;for(let I=0;I<v;I++)for(let T=0;T<y;T++){let L=(I*y+T)*4;if(g[L+3]>0){let O=g[L],R=g[L+1],F=g[L+2],q=`#${O.toString(16).padStart(2,"0")}${R.toString(16).padStart(2,"0")}${F.toString(16).padStart(2,"0")}`,D=[[T-1,I],[T+1,I],[T,I-1],[T,I+1]];for(let[b,k]of D)if(b>=0&&b<y&&k>=0&&k<v){let M=(k*y+b)*4;if(g[M+3]>0){let j=g[M],ne=g[M+1],U=g[M+2],z=`#${j.toString(16).padStart(2,"0")}${ne.toString(16).padStart(2,"0")}${U.toString(16).padStart(2,"0")}`;q!==z&&HI(q,z)&&(S.add(q),S.add(z))}}}}if(S.size===0)return;let m=Array.from(S),f;if(m.length===1)f=m[0];else if(m.length===2)f=(r.drawingMode==="spectral"?"spectral":"normal")==="spectral"?fc(m[0],m[1],.5):Ll(m[0],m[1],.5);else{let I=r.drawingMode==="spectral"?"spectral":"normal";f=GI(m,I)}let h=i*o,w=e.createRadialGradient(c,p,0,c,p,h);w.addColorStop(0,f),w.addColorStop(.6,f+Math.floor(255*o*.7).toString(16).padStart(2,"0")),w.addColorStop(1,f+"00"),e.globalCompositeOperation="source-over",e.fillStyle=w,e.beginPath(),e.arc(c,p,h,0,Math.PI*2),e.fill()}}var pc=ae(ke(),1);function eh({view:e,pointer:t,zoom:n,rotation:r,containerRef:i,selectionState:o,canvasSize:a,onActualZoomChange:l,onSelectionStart:s,onSelectionUpdate:u,onSelectionEnd:c}){let p=(0,it.useRef)(null),[d,g]=(0,it.useState)({width:800,height:600}),[y,v]=(0,it.useState)({x:0,y:0}),S=se(U=>U.layers),m=De(U=>U.currentLayerIndex),{updateLayers:f}=se(),h=(0,it.useRef)(0),w=(0,it.useRef)(),[I,T]=(0,it.useState)(0),L=()=>{w.current&&cancelAnimationFrame(w.current);let U=()=>{o.hasSelection()&&(h.current=(h.current+.5)%12,T(z=>z+1),w.current=requestAnimationFrame(U))};w.current=requestAnimationFrame(U)},A=()=>{w.current&&(cancelAnimationFrame(w.current),w.current=void 0)},O=(0,it.useRef)(!1),R=(0,it.useRef)(0),F=(0,it.useRef)(0),q=(0,it.useRef)(!1),D=(0,it.useRef)(null),b=(0,it.useRef)(!1),k=(0,it.useRef)({x:0,y:0});(0,it.useEffect)(()=>{let U=p.current;U&&(["pen","brush","paint-brush","color-mixer","eraser","selection"].includes(t.tool)?U.style.cursor="crosshair":t.tool==="hand"?U.style.cursor="grab":U.style.cursor="default")},[t.tool]),(0,it.useEffect)(()=>{var U,z;a?g(a):(U=e==null?void 0:e._painterData)!=null&&U.canvasWidth&&((z=e==null?void 0:e._painterData)!=null&&z.canvasHeight)?g({width:e._painterData.canvasWidth,height:e._painterData.canvasHeight}):S.length>0&&S[0].canvas&&g({width:S[0].canvas.width||800,height:S[0].canvas.height||600})},[a,e,S]),(0,it.useEffect)(()=>{let U=p.current;U&&(U.width=d.width,U.height=d.height)},[d]),(0,it.useEffect)(()=>{let U=p.current;if(U){let z=U.getBoundingClientRect(),Q=Math.round(z.width/d.width*n);e&&e.updateTitle&&e.updateTitle(d.width,d.height,Q),l&&l(Q)}else e&&e.updateTitle&&e.updateTitle(d.width,d.height,n),l&&l(n)},[n,d,e,l]),(0,it.useEffect)(()=>{let U=p.current;if(!U)return;let z=U.getContext("2d");if(!z)return;z.clearRect(0,0,U.width,U.height);let Q=10;z.fillStyle="#ffffff",z.fillRect(0,0,U.width,U.height),z.fillStyle="#e0e0e0";for(let J=0;J<U.height;J+=Q*2)for(let ze=0;ze<U.width;ze+=Q*2)z.fillRect(ze+Q,J,Q,Q),z.fillRect(ze,J+Q,Q,Q);S&&S.length>0&&S.forEach((J,ze)=>{if(J.visible&&J.canvas){let sn=z.globalAlpha;z.globalAlpha=J.opacity!==void 0?J.opacity:1;let xn=z.globalCompositeOperation;if(J.blendMode&&J.blendMode!=="normal")try{z.globalCompositeOperation=J.blendMode}catch($t){console.error($t)}try{if(J.clippingMask&&ze>0){let $t=document.createElement("canvas");$t.width=J.canvas.width,$t.height=J.canvas.height;let le=$t.getContext("2d");le&&(le.drawImage(J.canvas,0,0),le.globalCompositeOperation="destination-in",le.drawImage(S[ze-1].canvas,0,0),z.drawImage($t,0,0))}else z.drawImage(J.canvas,0,0)}catch($t){console.error($t)}z.globalAlpha=sn,z.globalCompositeOperation=xn}});let ee=o.hasSelection(),_e=o.tempRect||o.tempLassoPoints.length>0;if(ee||_e){if(z.save(),z.setLineDash([6]),z.lineDashOffset=-h.current,z.strokeStyle="#000",z.lineWidth=1,o.selectionOutline&&z.stroke(o.selectionOutline),o.mode==="rect"&&o.tempRect){let J=o.tempRect;z.strokeRect(J.x+.5,J.y+.5,J.width,J.height)}else if(o.mode==="lasso"&&o.tempLassoPoints.length>1){z.beginPath(),z.moveTo(o.tempLassoPoints[0].x+.5,o.tempLassoPoints[0].y+.5);for(let J=1;J<o.tempLassoPoints.length;J++){let ze=o.tempLassoPoints[J];z.lineTo(ze.x+.5,ze.y+.5)}z.closePath(),z.stroke()}z.restore()}},[S,m,o,o.version,I,d]);let M=(U,z)=>{if(!S[m]||!S[m].canvas)return;let ee=S[m].canvas.getContext("2d");if(!ee)return;t.tool==="eraser"&&t.drawingMode!=="erase-soft"?(ee.globalCompositeOperation="destination-out",ee.strokeStyle="rgba(0,0,0,1)",ee.lineWidth=t.lineWidth,ee.lineCap="round",ee.lineJoin="round",ee.beginPath(),ee.moveTo(U.x,U.y),ee.lineTo(z.x,z.y),ee.stroke()):["pen","brush","paint-brush","color-mixer","eraser"].includes(t.tool)&&(t.drawingMode==="erase-soft"?Yw(ee,U,z,t):t.brushOpacity===0?Zw(ee,U,z,t):Xw(ee,U,z,t));let _e=[...S];_e[m]={...S[m]},f(_e)},H=U=>{let{x:z,y:Q}=lc(p.current,U),ee=se.getState(),_e=De.getState(),J=rt.getState();if(t.tool==="selection"){if(o.mode!==t.selectionMode&&o.setMode(t.selectionMode),t.selectionMode==="magic"){o.reset(),p.current&&o.computeMagicSelection(p.current,z,Q),u==null||u(),c==null||c(),L();return}else if(t.selectionMode==="select-pen"||t.selectionMode==="select-eraser"){O.current=!0,D.current={x:z,y:Q},o.updateMaskSelection(d,{x:z,y:Q},{x:z,y:Q},t.selectionMode,t.lineWidth),u==null||u(),s==null||s(),L();return}O.current=!0,R.current=z,F.current=Q,t.selectionMode==="rect"?(o.tempRect={x:z,y:Q,width:0,height:0},o.tempLassoPoints=[]):(o.tempLassoPoints=[{x:z,y:Q}],o.tempRect=void 0),u==null||u(),s==null||s(),L()}else["pen","brush","paint-brush","color-mixer","eraser"].includes(t.tool)?(J.saveHistory(ee.layers,_e.currentLayerIndex),q.current=!0,D.current={x:z,y:Q},M({x:z,y:Q},{x:z,y:Q})):t.tool==="hand"&&(b.current=!0,k.current={x:U.clientX,y:U.clientY},p.current&&(p.current.style.cursor="grabbing"))},j=U=>{let{x:z,y:Q}=lc(p.current,U);if(t.tool==="selection"&&O.current){if(o.mode==="rect"){let ee=Math.min(R.current,z),_e=Math.min(F.current,Q),J=Math.abs(z-R.current),ze=Math.abs(Q-F.current);o.tempRect={x:ee,y:_e,width:J,height:ze}}else o.mode==="lasso"?o.tempLassoPoints.push({x:z,y:Q}):(o.mode==="select-pen"||o.mode==="select-eraser")&&D.current&&(o.updateMaskSelection(d,D.current,{x:z,y:Q},o.mode,t.lineWidth),D.current={x:z,y:Q});u==null||u()}else if(["pen","brush","paint-brush","color-mixer","eraser"].includes(t.tool)&&q.current&&D.current)M(D.current,{x:z,y:Q}),D.current={x:z,y:Q};else if(t.tool==="hand"&&b.current){let ee=U.clientX-k.current.x,_e=U.clientY-k.current.y;v(J=>({x:J.x+ee,y:J.y+_e})),k.current={x:U.clientX,y:U.clientY}}},ne=U=>{let{x:z,y:Q}=lc(p.current,U);if(t.tool==="selection"){if(t.selectionMode==="magic"){c==null||c();return}if(!O.current)return;if(O.current=!1,o.mode==="select-pen"||o.mode==="select-eraser")D.current&&(o.updateMaskSelection(d,D.current,{x:z,y:Q},o.mode,t.lineWidth),D.current=null),c==null||c();else{let ee=!1;if(o.mode==="rect"){if(ee=!!(o.tempRect&&o.tempRect.width>2&&o.tempRect.height>2),ee&&o.tempRect){let _e=new Path2D;_e.rect(o.tempRect.x,o.tempRect.y,o.tempRect.width,o.tempRect.height);let J=new Path2D;J.rect(o.tempRect.x+.5,o.tempRect.y+.5,o.tempRect.width,o.tempRect.height),o.selectionClipPath=_e,o.selectionOutline=J,o.selectionBounding={...o.tempRect},o.tempRect=void 0}}else if(o.tempLassoPoints.length>2&&o.tempLassoPoints.push(o.tempLassoPoints[0]),ee=o.tempLassoPoints.length>2,ee){let _e=new Path2D,J=new Path2D;_e.moveTo(o.tempLassoPoints[0].x,o.tempLassoPoints[0].y),J.moveTo(o.tempLassoPoints[0].x+.5,o.tempLassoPoints[0].y+.5);let ze=o.tempLassoPoints[0].x,sn=o.tempLassoPoints[0].x,xn=o.tempLassoPoints[0].y,$t=o.tempLassoPoints[0].y;for(let le=1;le<o.tempLassoPoints.length;le++){let he=o.tempLassoPoints[le];_e.lineTo(he.x,he.y),J.lineTo(he.x+.5,he.y+.5),ze=Math.min(ze,he.x),sn=Math.max(sn,he.x),xn=Math.min(xn,he.y),$t=Math.max($t,he.y)}_e.closePath(),J.closePath(),o.selectionClipPath=_e,o.selectionOutline=J,o.selectionBounding={x:ze,y:xn,width:sn-ze,height:$t-xn},o.tempLassoPoints=[]}ee||(o.reset(),A(),u==null||u()),c==null||c()}}else["pen","brush","paint-brush","color-mixer","eraser"].includes(t.tool)?(q.current=!1,D.current=null):t.tool==="hand"&&(b.current=!1,p.current&&(p.current.style.cursor="grab"))};return(0,pc.jsx)("div",{className:"flex flex-1 w-full h-full bg-background overflow-hidden relative",children:(0,pc.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,pc.jsx)("canvas",{ref:p,width:d.width,height:d.height,className:"border border-modifier-border max-w-full max-h-full",style:{display:"block",transform:`translate(${y.x}px, ${y.y}px) scale(${n/100}) rotate(${r}deg)`},onPointerDown:H,onPointerMove:j,onPointerUp:ne})})})}var ln=ae(ke(),1);function th({pointer:e,view:t,zoom:n,rotation:r,setZoom:i,setRotation:o}){let a=(0,an.useRef)(null),{layoutDirection:l}=si(),s=Yp(),[u,c]=(0,an.useState)("global"),[p,d]=(0,an.useState)({x:8,y:8}),[g,y]=(0,an.useState)(null),[v,S]=(0,an.useState)({width:800,height:600}),[m,f]=(0,an.useState)(!1),[h,w]=(0,an.useState)("canvas-only"),[I,T]=(0,an.useState)(n),[L,A]=(0,an.useState)(!1),{layers:O}=se(),{currentLayerIndex:R}=De(),{attachments:F,addAttachment:q,removeAttachment:D}=sc(),b=()=>{let le=se.getState(),he=De.getState(),me=le.layers[he.currentLayerIndex];if(!me||!me.canvas)return;let ye=F.findIndex(Oe=>Oe.type==="image");ye!==-1&&D(ye);let Se=me.canvas.toDataURL();q({url:Se,data:Se,type:"image",enabled:!0})},k=()=>{let le=s.getBoundingRect(),he=s.selectionClipPath;if(!le||!he){let Pe=F.findIndex(je=>je.type==="mask");Pe!==-1&&D(Pe);return}let me=document.createElement("canvas");me.width=v.width,me.height=v.height;let ye=me.getContext("2d");if(!ye)return;ye.fillStyle="black",ye.fillRect(0,0,me.width,me.height),ye.fillStyle="white",ye.clip(he),ye.fillRect(le.x,le.y,le.width,le.height);let Se=F.findIndex(Pe=>Pe.type==="mask");Se!==-1&&D(Se);let Oe=me.toDataURL();q({url:Oe,data:Oe,type:"mask",enabled:!0})};(0,an.useEffect)(()=>{b()},[O,R]);let M=(le,he,me,ye,Se,Oe)=>{if(!le.canvas)return le;let Pe=document.createElement("canvas");Pe.width=ye,Pe.height=Se;let je=Pe.getContext("2d");if(!je)return le;if(Oe==="canvas-only")je.drawImage(le.canvas,0,0);else{let br=ye/he,vS=Se/me,uh=Math.min(br,vS),ch=he*uh,dh=me*uh,yS=(ye-ch)/2,wS=(Se-dh)/2;je.drawImage(le.canvas,yS,wS,ch,dh)}return{...le,canvas:Pe}},H=(le,he)=>{var Se;let me=v.width,ye=v.height;if(S({width:le,height:he}),t&&t._painterData&&(t._painterData.canvasWidth=le,t._painterData.canvasHeight=he,(Se=t.updateTitle)==null||Se.call(t,le,he,n)),h==="resize-content"){let Oe=se.getState();rt.getState().saveHistory(Oe.layers,R);let je=Oe.layers.map(br=>M(br,me,ye,le,he,h));Oe.updateLayers(je)}},j=()=>{c("hidden")},ne=()=>{k()},U=()=>{let le=s.getBoundingRect();if(le&&a.current){let he=a.current.querySelector("canvas");if(he){let me=he.getBoundingClientRect(),ye=a.current.getBoundingClientRect(),Se=me.width/he.width,Oe=me.height/he.height,Pe=le.x*Se+(me.left-ye.left),je=le.y*Oe+(me.top-ye.top)-28;d({x:Pe,y:je}),c("selection");return}}c("global")},z=()=>{s.reset(),c("global")},Q=()=>{let le=se.getState(),he=De.getState(),me=le.layers[he.currentLayerIndex],Se=s.getBoundingRect();if(!Se&&me&&(Se={x:0,y:0,width:me.canvas.width,height:me.canvas.height}),!Se){console.log("\u7DE8\u96C6\u5BFE\u8C61\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093");return}console.log("\u7DE8\u96C6\u958B\u59CB:",Se),y(Se),s.reset(),c("hidden")},ee=()=>{y(null),c("global")},_e=le=>{le.preventDefault(),A(!0)},J=le=>{le.preventDefault(),A(!1)},ze=async le=>{if(le.preventDefault(),A(!1),le.dataTransfer.files.length>0){for(let me of Array.from(le.dataTransfer.files))try{await Ie.executeTool("add_layer",{name:me.name,fileData:me,width:v.width,height:v.height})}catch(ye){console.error("External file drop error:",ye)}return}let he=le.dataTransfer.getData("text/plain");if(he)try{let me=window.app;if(!me){console.error("Obsidian app not found");return}let ye=he;if(he.startsWith("obsidian://")){let br=new URL(he).searchParams.get("file");if(br)ye=decodeURIComponent(br);else{console.error("No file parameter in Obsidian URI:",he);return}}let Se=me.vault.getAbstractFileByPath(ye);if(console.log("Found file:",Se,"path:",ye),!Se){console.error("File not found:",ye,"from dragData:",he);let je=me.vault.getFiles();console.log("All files in vault:",je.map(br=>br.path));return}let Oe=["png","jpg","jpeg","gif","webp","bmp","svg"],Pe=Se.extension.toLowerCase();if(!Oe.includes(Pe)){console.warn("Not an image file:",ye);return}if(!Se.path||!Se.extension){console.error("Invalid file object:",Se);return}await Ie.executeTool("add_layer",{name:Se.name,imageFile:Se,width:v.width,height:v.height,app:me}),console.log("Successfully added layer from Obsidian file:",ye)}catch(me){console.error("Obsidian file drop error:",me)}},sn={fill:()=>{let le=se.getState(),he=De.getState(),me=rt.getState(),ye=le.layers,Se=he.currentLayerIndex,Oe=ye[Se];if(!Oe||!Oe.canvas)return;me.saveHistory(ye,Se);let Pe=Oe.canvas.getContext("2d");if(Pe){if(Pe.save(),s.selectionClipPath){Pe.clip(s.selectionClipPath);let je=s.getBoundingRect();je&&(Pe.fillStyle=e.color,Pe.fillRect(je.x,je.y,je.width,je.height))}else Pe.fillStyle=e.color,Pe.fillRect(0,0,Oe.canvas.width,Oe.canvas.height);Pe.restore(),le.updateLayers([...ye])}},clear:()=>{let le=se.getState(),he=De.getState(),me=rt.getState(),ye=le.layers,Se=he.currentLayerIndex,Oe=ye[Se];if(!Oe||!Oe.canvas)return;me.saveHistory(ye,Se);let Pe=Oe.canvas.getContext("2d");if(Pe){if(Pe.save(),s.selectionClipPath){Pe.clip(s.selectionClipPath);let je=s.getBoundingRect();je&&Pe.clearRect(je.x,je.y,je.width,je.height)}else Pe.clearRect(0,0,Oe.canvas.width,Oe.canvas.height);Pe.restore(),le.updateLayers([...ye])}},edit:Q,cancel:z};return(0,ln.jsxs)("div",{className:l==="horizontal"?"flex flex-1 w-full h-full overflow-hidden":"flex flex-col flex-1 w-full h-full overflow-hidden",children:[(0,ln.jsxs)("div",{className:l==="horizontal"?"flex flex-col":"flex flex-row border-b border-modifier-border",children:[(0,ln.jsx)(Qp,{tool:e.tool,drawingMode:e.drawingMode,lineWidth:e.lineWidth,selectionMode:e.selectionMode,brushHasColor:e.brushHasColor,brushOpacity:e.brushOpacity,blendStrength:e.blendStrength,mixRatio:e.mixRatio,zoom:n,rotation:r,canvasWidth:v.width,canvasHeight:v.height,actualZoom:I,maintainAspectRatio:m,resizeMode:h,setDrawingMode:e.setDrawingMode,setLineWidth:e.setLineWidth,setSelectionMode:e.setSelectionMode,setBrushHasColor:e.setBrushHasColor,setBrushOpacity:e.setBrushOpacity,setBlendStrength:e.setBlendStrength,setMixRatio:e.setMixRatio,setZoom:i,setRotation:o,setCanvasSize:H,setMaintainAspectRatio:f,setResizeMode:w,layoutDirection:l}),(0,ln.jsx)(qp,{color:e.color,setColor:e.setColor,layoutDirection:l}),(0,ln.jsx)(Xp,{handlers:sn,mode:u==="selection"?"hidden":"global",isFloating:!1,layoutDirection:l})]}),(0,ln.jsxs)("div",{className:"flex flex-1 w-full h-full items-center justify-center overflow-auto bg-secondary relative",ref:a,onDragOver:_e,onDragLeave:J,onDrop:ze,children:[(0,ln.jsx)(eh,{pointer:e,view:t,zoom:n,rotation:r,containerRef:a,selectionState:s,canvasSize:v,onActualZoomChange:T,onSelectionStart:j,onSelectionUpdate:ne,onSelectionEnd:U}),L&&(0,ln.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-accent bg-opacity-10 border-2 border-dashed border-accent pointer-events-none z-50",children:(0,ln.jsx)("span",{className:"text-accent font-semibold",children:"\u753B\u50CF\u3092\u30C9\u30ED\u30C3\u30D7\u3057\u3066\u30EC\u30A4\u30E4\u30FC\u8FFD\u52A0"})}),u==="selection"&&(0,ln.jsx)(Xp,{handlers:sn,mode:u,position:p,isFloating:!0}),g&&(0,ln.jsx)(Jp,{rect:g,layers:O,currentLayerIndex:R,containerRef:a,onFinish:ee})]})]})}var Kw='xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor"',qw='stroke-width="1" stroke-linecap="round" stroke-linejoin="round"',Qw="0 0 24 24",Hi=`${Kw} viewBox="${Qw}" ${qw}`,Me=`${Kw} width="20" height="20" viewBox="${Qw}" ${qw}`,Jw=`
  <rect x="4" y="4" width="16" height="16" rx="2" ry="2"/>
  <line x1="4" y1="10" x2="20" y2="10"/>
  <line x1="10" y1="20" x2="10" y2="10"/>
`,eS=`
  <path d="M12 2l3 6L21 9l-4.5 4.5L18 21l-6-3.5L6 21l1.5-7.5L3 9l6-.5L12 2z"/>
  <circle cx="12" cy="12" r="2"/>
`,tS=`
  <line x1="4" y1="12" x2="20" y2="12"/>
  <circle cx="6" cy="12" r="1"/>
  <circle cx="12" cy="12" r="1"/>
  <circle cx="18" cy="12" r="1"/>
  <line x1="6" y1="8" x2="6" y2="10"/>
  <line x1="12" y1="8" x2="12" y2="10"/>
  <line x1="18" y1="8" x2="18" y2="10"/>
`,nS=`
  <path d="M4 19v-14A2 2 0 0 1 6 3h14v18H6a2 2 0 0 1 0-4h14"/>
  <path d="M7 7h10"/><path d="M7 11h10"/><path d="M7 15h7"/>
`,rS=`
  <polyline points="15 4 20 4 20 9"/><line x1="4" y1="20" x2="20" y2="4"/><polyline points="9 20 4 20 4 15"/>
`,nh=`
  <line x1="12" y1="7" x2="12" y2="17"/>
  <line x1="7" y1="12" x2="17" y2="12"/>
`,iS=`
  <polyline points="9 6 15 12 9 18"/>
`,jI=`
  <rect x="4" y="4" width="16" height="16" rx="2" ry="2"/>
  <rect x="8" y="8" width="8" height="8"/>
`,Gi={moveUp:'<polyline points="6 14 12 8 18 14"/>',moveDown:'<polyline points="6 10 12 16 18 10"/>',add:'<line x1="12" y1="7" x2="12" y2="17"/><line x1="7" y1="12" x2="17" y2="12"/>',addBelow:'<polyline points="12 5 12 15"/><polyline points="8 11 12 15 16 11"/>',delete:'<line x1="8" y1="8" x2="16" y2="16"/><line x1="16" y1="8" x2="8" y2="16"/>',menu:'<circle cx="12" cy="5" r="2" fill="currentColor"/><circle cx="12" cy="12" r="2" fill="currentColor"/><circle cx="12" cy="19" r="2" fill="currentColor"/>'},ci={pen:`
    <path d="M14.7 3.3l6 6-9.4 9.4-4.6 1.3 1.3-4.6 9.4-9.4z" fill="none"/>
    <circle cx="17.8" cy="6.2" r="1.2"/>
  `,brush:`
    <rect x="2" y="10" width="14" height="4" rx="1" ry="1" fill="none"/>
    <path d="M9 14v6" fill="none"/>
    <circle cx="18" cy="12" r="1"/>
    <circle cx="20" cy="12" r="1"/>
    <circle cx="22" cy="12" r="1"/>
  `,"paint-brush":`
    <path d="M4 22c.5-2.5 2-4.5 4-6l9-9-3-3-9 9c-1.5 1.5-3.5 3.5-6 4l5 5z" fill="none"/>
    <path d="M14 5l3 3" fill="none"/>
  `,"color-mixer":`
    <circle cx="9"  cy="9"  r="6" fill="currentColor" fill-opacity="0.25"/>
    <circle cx="15" cy="9"  r="6" fill="currentColor" fill-opacity="0.25"/>
    <circle cx="12" cy="15" r="6" fill="currentColor" fill-opacity="0.25"/>
  `,eraser:`
    <path d="M3 14l7.5-7.5a2 2 0 0 1 2.83 0l5.17 5.17a2 2 0 0 1 0 2.83L13 22a2 2 0 0 1-2.83 0L3 14z" fill="none"/>
    <path d="M14 7l3 3" fill="none"/>
    <path d="M2 22h6" fill="none"/>
  `,selection:`
    <rect x="4" y="4" width="16" height="16" rx="2" ry="2" fill="none"/>
    <path d="M4 9h16" fill="none"/>
    <path d="M9 20V9" fill="none"/>
  `,hand:`
    <path d="M7 12V6a1.5 1.5 0 0 1 3 0v6" fill="none"/>
    <path d="M11 13V3a1.5 1.5 0 0 1 3 0v10" fill="none"/>
    <path d="M16 13V7a1.5 1.5 0 0 1 3 0v10" fill="none"/>
    <path d="M5 16s2 4 7 4 7-4 7-4" fill="none"/>
  `,settings:`
    <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
  `},hc={fileSelect:'<path d="M8 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/><path d="M17 17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h6.5L17 6.5zM4 2a1 1 0 0 0-1 1v12l2.7-2.7a.5.5 0 0 1 .7-.1L10 14l2.6-3.6a.5.5 0 0 1 .9-.1L16 12V6.5h-2A2 2 0 0 1 12 4.5V2z"/>',aiGenerate:'<path d="M7 .3a.9.9 0 0 1 .1 1 8.6 8.6 0 0 0-1 4.1c0 4.8 3.9 8.7 8.8 8.7q.9 0 1.8-.2a.9.9 0 0 1 1 .4.9.9 0 0 1 0 1.1A10 10 0 0 1 10 19C4.5 19 0 14.7 0 9.3 0 5.1 2.5 1.6 6.1.1A.9.9 0 0 1 7 .3M5.8 1.6A8.7 8.7 0 0 0 1.2 9.3c0 4.8 3.9 8.7 8.8 8.7a8.8 8.8 0 0 0 6.2-2.6q-.6.1-1.2.1c-5.5 0-10-4.5-10-10 0-1.4.3-2.7.8-3.9"/><path d="M13 3.8a.3.3 0 0 1 .5 0l.5 1.4c.2.6.7 1.1 1.3 1.3l1.4.5a.3.3 0 0 1 0 .5l-1.4.5a2.1 2.1 0 0 0-1.3 1.3l-.5 1.4a.3.3 0 0 1-.5 0l-.5-1.4a2.1 2.1 0 0 0-1.3-1.3l-1.4-.5a.3.3 0 0 1 0-.5l1.4-.5c.4-.1.7-.5 1.3-1.3zM16.6.1a.2.2 0 0 1 .3 0l.3.9c.1.4.5.7.9.9l.9.3a.2.2 0 0 1 0 .3l-.9.3a1.4 1.4 0 0 0-.9.9l-.3.9a.2.2 0 0 1-.3 0l-.3-.9a1.4 1.4 0 0 0-.9-.9l-.9-.3a.2.2 0 0 1 0-.3l.9-.3c.4-.1.7-.5.9-.9z"/>',clearPath:'<path d="M2 6h20"/><path d="M19 6v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/>',createPsd:'<rect x="4" y="4" width="16" height="16" rx="2" ry="2"/><line x1="4" y1="10" x2="20" y2="10"/><line x1="10" y1="20" x2="10" y2="10"/><line x1="12" y1="7" x2="12" y2="17"/><line x1="7" y1="12" x2="17" y2="12"/>'},oS={PSD_ICON_SVG:`<svg ${Hi}>${Jw}</svg>`,PAINTER_ICON_SVG:`<svg ${Hi}>${eS}</svg>`,TIMELINE_ICON_SVG:`<svg ${Hi}>${tS}</svg>`,STORYBOARD_ICON_SVG:`<svg ${Hi}>${nS}</svg>`,STORYBOARD_TOGGLE_ICON_SVG:`<svg ${Hi}>${rS}</svg>`,ADD_ICON_SVG:`<svg ${Hi}>${nh}</svg>`,FOLD_ICON_SVG:`<svg ${Hi}>${iS}</svg>`},_A=`<svg ${Me}>${Jw}</svg>`,EA=`<svg ${Me}>${eS}</svg>`,bA=`<svg ${Me}>${tS}</svg>`,CA=`<svg ${Me}>${nS}</svg>`,IA=`<svg ${Me}>${rS}</svg>`,TA=`<svg ${Me}>${iS}</svg>`,LA=`<svg ${Me}>${nh}</svg>`,aS={moveUp:`<svg ${Me}>${Gi.moveUp}</svg>`,moveDown:`<svg ${Me}>${Gi.moveDown}</svg>`,add:`<svg ${Me}>${Gi.add}</svg>`,addBelow:`<svg ${Me}>${Gi.addBelow}</svg>`,delete:`<svg ${Me}>${Gi.delete}</svg>`,menu:`<svg ${Me}>${Gi.menu}</svg>`},mc={add:`<svg ${Me}>${nh}</svg>`,delete:`<svg ${Me}>${Gi.delete}</svg>`,clip:`<svg ${Me}>${jI}</svg>`},_r={settings:`<svg ${Me}>${ci.settings}</svg>`,pen:`<svg ${Me}>${ci.pen}</svg>`,brush:`<svg ${Me}>${ci.brush}</svg>`,"paint-brush":`<svg ${Me}>${ci["paint-brush"]}</svg>`,"color-mixer":`<svg ${Me}>${ci["color-mixer"]}</svg>`,eraser:`<svg ${Me}>${ci.eraser}</svg>`,selection:`<svg ${Me}>${ci.selection}</svg>`,hand:`<svg ${Me}>${ci.hand}</svg>`},lS={fileSelect:`<svg ${Me}>${hc.fileSelect}</svg>`,aiGenerate:`<svg ${Me}>${hc.aiGenerate}</svg>`,clearPath:`<svg ${Me}>${hc.clearPath}</svg>`,createPsd:`<svg ${Me}>${hc.createPsd}</svg>`};var Wi=ae(ft(),1),Er=ae(ke(),1),$I=({icon:e,title:t,options:n,className:r="",disabled:i=!1,variant:o="secondary"})=>{let[a,l]=(0,Wi.useState)(!1),s=(0,Wi.useRef)(null),u=(0,Wi.useRef)(null),c=(y="secondary")=>{switch(y){case"accent":return"bg-accent text-on-accent hover:bg-accent-hover";case"secondary":return"bg-secondary border border-modifier-border text-text-normal hover:bg-modifier-hover";case"danger":return"bg-error text-on-error hover:bg-error-hover";case"primary":default:return"bg-primary border border-modifier-border text-text-normal hover:bg-modifier-hover"}},p=(y="default")=>"text-gray-700 hover:bg-gray-100",d=y=>{y.stopPropagation(),i||l(!a)},g=(y,v)=>{v.stopPropagation(),y.disabled||(y.onClick(),l(!1))};return(0,Wi.useEffect)(()=>{let y=v=>{s.current&&!s.current.contains(v.target)&&u.current&&!u.current.contains(v.target)&&l(!1)};if(a)return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[a]),(0,Er.jsxs)("div",{className:"relative",children:[(0,Er.jsx)("button",{ref:u,className:`p-1 rounded cursor-pointer disabled:opacity-50 flex items-center justify-center ${c(o)} ${r}`,onClick:d,disabled:i,title:t,children:(0,Er.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})}),a&&(0,Er.jsx)("div",{ref:s,className:"absolute top-full right-0 mt-1 bg-white border rounded-lg shadow-xl py-2 z-[9999] whitespace-nowrap",children:n.map((y,v)=>(0,Er.jsxs)("button",{className:`w-full text-left px-4 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-3 transition-colors ${p(y.variant)}`,onClick:S=>g(y,S),disabled:y.disabled,children:[y.icon&&(0,Er.jsx)("span",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",dangerouslySetInnerHTML:{__html:y.icon}}),(0,Er.jsx)("span",{className:"font-medium",children:y.label})]},v))})]})},sS=$I;var gc=ae(ke(),1),YI=({buttons:e,className:t="",gap:n="gap-2",direction:r="horizontal"})=>{let i=(a="primary")=>{switch(a){case"accent":return"bg-accent text-on-accent hover:bg-accent-hover";case"secondary":return"bg-secondary border border-modifier-border text-text-normal hover:bg-modifier-hover";case"danger":return"bg-error text-on-error hover:bg-error-hover";case"primary":default:return"bg-primary border border-modifier-border text-text-normal hover:bg-modifier-hover"}};return(0,gc.jsx)("div",{className:`flex ${r==="vertical"?"flex-col":""} ${n} ${t}`,children:e.map((a,l)=>a.menuOptions&&a.menuOptions.length>0?(0,gc.jsx)(sS,{icon:a.icon,title:a.title,options:a.menuOptions,className:a.className,disabled:a.disabled,variant:a.variant},l):(0,gc.jsx)("button",{className:`p-1 rounded cursor-pointer disabled:opacity-50 flex items-center justify-center ${i(a.variant)} ${a.className||""}`,onClick:a.onClick,disabled:a.disabled,title:a.title,dangerouslySetInnerHTML:{__html:a.icon}},l))})},rh=YI;var ji=ae(ke(),1);function ih({tool:e,onChange:t}){let{layoutDirection:n}=si(),r=[{id:"settings",title:te("TOOL_SETTINGS"),icon:_r.settings},{id:"selection",title:te("TOOL_SELECTION"),icon:_r.selection},{id:"hand",title:te("TOOL_HAND"),icon:_r.hand}],i=[{id:"pen",title:te("TOOL_PEN"),icon:_r.pen},{id:"brush",title:te("TOOL_BRUSH"),icon:_r.brush},{id:"paint-brush",title:te("TOOL_PAINT_BRUSH"),icon:_r["paint-brush"]},{id:"color-mixer",title:te("TOOL_COLOR_MIXER"),icon:_r["color-mixer"]},{id:"eraser",title:te("TOOL_ERASER"),icon:_r.eraser}],o=n==="horizontal"?"w-[60px] bg-secondary border-r border-modifier-border flex flex-col gap-1 p-1":"h-[60px] bg-secondary border-b border-modifier-border flex flex-row gap-1 p-1",a=n==="horizontal"?"flex flex-col gap-1 items-center":"flex flex-row gap-1 items-center",l=u=>e===u?{backgroundColor:"#3b82f6",color:"#ffffff",borderWidth:"2px",borderColor:"#2563eb"}:{},s=u=>`w-10 h-10 border-none rounded cursor-pointer flex items-center justify-center transition-all duration-200 ${e===u?"shadow-lg scale-110 ring-2 ring-opacity-50":"bg-primary text-text-normal hover:bg-modifier-hover hover:scale-105"}`;return(0,ji.jsx)("div",{className:o,children:(0,ji.jsxs)("div",{className:a,children:[(0,ji.jsx)(rh,{buttons:r.map(u=>({icon:u.icon,title:u.title,className:s(u.id),style:l(u.id),onClick:()=>t(u.id)})),direction:n==="horizontal"?"vertical":"horizontal",gap:"gap-1"}),(0,ji.jsx)("div",{className:n==="horizontal"?"w-8 h-px bg-modifier-border my-1":"h-full w-px bg-modifier-border mx-1"}),(0,ji.jsx)(rh,{buttons:i.map(u=>({icon:u.icon,title:u.title,className:s(u.id),style:l(u.id),onClick:()=>t(u.id)})),direction:n==="horizontal"?"vertical":"horizontal",gap:"gap-1"})]})})}var Jo=ae(ke(),1);function oh({view:e,app:t}){var m;if(!e)return(0,Jo.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-primary text-text-normal",children:"Painter \u30D3\u30E5\u30FC\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093"});let n=$p(),[r,i]=(0,jt.useState)(100),[o,a]=(0,jt.useState)(0),{layoutDirection:l}=si();(0,jt.useEffect)(()=>{e&&e._painterData&&e.updateTitle&&e.updateTitle(e._painterData.canvasWidth,e._painterData.canvasHeight,r)},[r,e]);let[s,u]=(0,jt.useState)([]),[c,p]=(0,jt.useState)(0),d=(0,jt.useRef)(new Set),g=(0,jt.useRef)(!1),y=se(f=>f.layers),v=De(f=>f.currentLayerIndex);return(0,jt.useEffect)(()=>{y.length>0&&(u(y),e&&(e.layers=y))},[y,e]),(0,jt.useEffect)(()=>{p(v),e&&(e.currentLayerIndex=v)},[v,e]),(0,jt.useEffect)(()=>{if(y.length>0){let f=rt.getState();f.history.length===0&&f.saveHistory(y,v)}},[y,v]),(0,jt.useEffect)(()=>{var w;if(!((w=e==null?void 0:e.file)!=null&&w.path)||!t)return;let f=`${e.file.path}-${t.vault.getName()}`;if(d.current.has(f)||g.current)return;d.current.add(f),g.current=!0,(async()=>{var I,T;try{if(((I=e.file)==null?void 0:I.extension)==="psd"){se.getState().setCurrentPsdFile(e.file);let L=await Ie.executeTool("load_painter_file",{app:t,file:e.file}),A=JSON.parse(L),O=await Promise.all(A.layers.map(async R=>{let F=document.createElement("canvas");if(F.width=R.width||A.width,F.height=R.height||A.height,R.canvasDataUrl)try{let q=new Image;await new Promise((b,k)=>{q.onload=b,q.onerror=k,q.src=R.canvasDataUrl});let D=F.getContext("2d");D&&D.drawImage(q,0,0)}catch(q){console.warn("Canvas\u5909\u63DB\u30A8\u30E9\u30FC:",R.name,q)}return{name:R.name,visible:R.visible,opacity:R.opacity,blendMode:R.blendMode,canvas:F}}));e.layers=O,e.currentLayerIndex=0,e._painterData={layers:O,currentLayerIndex:0,canvasWidth:A.width,canvasHeight:A.height},rt.getState().clearHistory(),se.getState().initializeLayers(O),De.getState().setCurrentLayerIndex(0),(T=e.updateTitle)==null||T.call(e,A.width,A.height,r)}else se.getState().clearCurrentPsdFile()}catch(L){console.error("\u274C \u30D5\u30A1\u30A4\u30EB\u51E6\u7406\u30A8\u30E9\u30FC:",L),d.current.delete(f)}finally{g.current=!1}})()},[(m=e==null?void 0:e.file)==null?void 0:m.path,t]),(0,Jo.jsxs)("div",{className:l==="horizontal"?"flex w-full h-full overflow-hidden":"flex flex-col w-full h-full overflow-hidden",children:[(0,Jo.jsx)(ih,{tool:n.tool,onChange:f=>n.setTool(f)}),(0,Jo.jsx)(th,{pointer:n,view:e,zoom:r,rotation:o,setZoom:i,setRotation:a})]})}var vc=class{createPainterView(t){let n=new zi(t,()=>this.renderReactComponent(n));return n}renderReactComponent(t){t.contentEl.empty(),t.contentEl.style.width="100%",t.contentEl.style.height="100%",t.contentEl.style.display="flex",t.reactRoot=(0,uS.createRoot)(t.contentEl),t.reactRoot.render(cS.default.createElement(oh,{view:t,app:t.app}))}};var yc=class{constructor(t){this.plugin=t,this.factory=new vc}initialize(){(0,wc.addIcon)("palette",oS.PAINTER_ICON_SVG),this.plugin.registerView("psd-view",t=>this.factory.createPainterView(t)),this.plugin.registerExtensions(["psd","painter"],"psd-view"),this.plugin.addRibbonIcon("image-plus","\u65B0\u898FPSD\u4F5C\u6210",async()=>{try{await Ie.executeTool("create_painter_file",{app:this.plugin.app})}catch(t){console.error("PSD\u4F5C\u6210\u30A8\u30E9\u30FC:",t)}}),this.plugin.app.workspace.on("file-menu",(t,n)=>{n instanceof wc.TFile&&n.extension.toLowerCase().match(/^(png|jpe?g|gif|webp)$/)&&t.addItem(r=>{r.setTitle("PSD\u3067\u958B\u304F").setIcon("image").onClick(async()=>{await Ie.executeTool("create_painter_file",{app:this.plugin.app,imageFile:n})})})}),this.plugin.registerDomEvent(document,"keydown",t=>{t.ctrlKey&&t.key==="z"&&!t.shiftKey&&(t.preventDefault(),this.plugin.app.workspace.getActiveViewOfType(zi)&&Ie.executeTool("undo_painter",{})),(t.ctrlKey&&t.shiftKey&&t.key==="z"||t.ctrlKey&&t.key==="y")&&(t.preventDefault(),this.plugin.app.workspace.getActiveViewOfType(zi)&&Ie.executeTool("redo_painter",{}))}),this.plugin.register(()=>{this.plugin.app.workspace.detachLeavesOfType("psd-view")})}};var ea=require("obsidian");var XI={falApiKey:"",comfyApiUrl:"http://localhost:8188",aiProvider:"fal.ai"};async function dS(e){return Object.assign({},XI,await e.loadData())}async function Sc(e,t){await e.saveData(t)}var xc=class extends ea.PluginSettingTab{constructor(t,n,r){super(t,n),this.plugin=n,this.settings=r}display(){let{containerEl:t}=this;if(t.empty(),t.createEl("h2",{text:"AI Settings"}),new ea.Setting(t).setName("AI Provider").setDesc("Select AI image generation provider").addDropdown(n=>n.addOption("fal.ai","fal.ai").addOption("comfy","ComfyUI").setValue(this.settings.aiProvider).onChange(async r=>{this.settings.aiProvider=r,await Sc(this.plugin,this.settings),this.display()})),this.settings.aiProvider==="fal.ai"&&new ea.Setting(t).setName("fal.ai API Key").setDesc("API key for fal.ai service").addText(n=>n.setPlaceholder("fal-...").setValue(this.settings.falApiKey||"").onChange(async r=>{this.settings.falApiKey=r,await Sc(this.plugin,this.settings)})),this.settings.aiProvider==="comfy"){new ea.Setting(t).setName("ComfyUI API URL").setDesc("URL for ComfyUI server (e.g., http://localhost:8188)").addText(i=>i.setPlaceholder("http://localhost:8188").setValue(this.settings.comfyApiUrl||"").onChange(async o=>{this.settings.comfyApiUrl=o,await Sc(this.plugin,this.settings)}));let n=t.createDiv();n.createEl("h3",{text:"ComfyUI Setup"}),n.createEl("p",{text:"To use ComfyUI, you need to install and run it locally:"});let r=n.createEl("ol");r.createEl("li",{text:"Download ComfyUI from: "}).createEl("a",{text:"https://github.com/comfyanonymous/ComfyUI",href:"https://github.com/comfyanonymous/ComfyUI"}),r.createEl("li",{text:"Install required models in ComfyUI/models/checkpoints/ (e.g., sd_xl_base_1.0.safetensors)"}),r.createEl("li",{text:"Start ComfyUI server: python main.py --listen"}),r.createEl("li",{text:"Verify server is running at http://localhost:8188"}),n.createEl("p",{text:"Supported workflows: Text-to-Image, Image-to-Image, Inpainting"})}}};var _c=class{constructor(t){this.settings=null;this.plugin=t}async initialize(){this.settings=await dS(this.plugin),Aw(this.settings),this.plugin.addSettingTab(new xc(this.plugin.app,this.plugin,this.settings))}getSettings(){return this.settings}};var fS=require("obsidian"),ta="right-sidebar-view",Ec=class extends fS.ItemView{constructor(t,n){super(t),this.renderReact=n}getViewType(){return ta}getDisplayText(){return"Right Sidebar"}async onOpen(){this.contentEl.empty(),this.contentEl.addClass("right-sidebar"),this.renderReact()}async onClose(){this.reactRoot&&(this.reactRoot.unmount(),this.reactRoot=void 0)}};var hS=ae(Yf(),1),mS=ae(ft(),1);var pS=ae(ft(),1);var Pl=ae(ft(),1);var Re=ae(ke(),1);function ah(){var h,w,I;let e=se(T=>T.layers),t=De(T=>T.currentLayerIndex),n=(0,Pl.useRef)(null),[r,i]=(0,Pl.useState)(null),[o,a]=(0,Pl.useState)(""),l=async T=>{var A;let L=(A=T.target.files)==null?void 0:A[0];if(L)try{let O=await L.arrayBuffer();await Ie.executeTool("add_layer",{name:L.name,fileData:O})}catch(O){console.error(O)}finally{T.target.value=""}},s=()=>{var T;(T=n.current)==null||T.click()},u=async()=>{try{await Ie.executeTool("add_layer",{name:`\u30EC\u30A4\u30E4\u30FC ${e.length+1}`})}catch(T){console.error(T)}},c=async()=>{if(!(e.length<=1))try{await Ie.executeTool("remove_layer",{index:t})}catch(T){console.error(T)}},p=async T=>{try{De.getState().setCurrentLayerIndex(T)}catch(L){console.error(L)}},d=async T=>{try{await Ie.executeTool("toggle_layer_visibility",{index:T})}catch(L){console.error(L)}},g=async T=>{var L,A;try{let O=(A=(L=e[T])==null?void 0:L.clippingMask)!=null?A:!1;await Ie.executeTool("set_layer_clipping",{index:T,clippingMask:!O})}catch(O){console.error(O)}},y=T=>{i(T),a(e[T].name)},v=async()=>{if(r!==null&&o.trim()&&o!==e[r].name)try{await Ie.executeTool("rename_layer",{index:r,name:o.trim()})}catch(T){console.error(T)}i(null),a("")},S=()=>{i(null),a("")},m=async T=>{try{await Ie.executeTool("set_layer_opacity",{index:t,opacity:T/100})}catch(L){console.error(L)}},f=async T=>{try{await Ie.executeTool("set_layer_blend_mode",{index:t,blendMode:T})}catch(L){console.error(L)}};return e.length===0?(0,Re.jsxs)("div",{className:"p-2 border-b border-modifier-border",children:[(0,Re.jsx)("div",{className:"text-text-muted text-sm",children:te("NO_LAYERS")}),(0,Re.jsxs)("div",{className:"text-text-muted text-xs mt-1",children:["\u30C7\u30D0\u30C3\u30B0\u60C5\u5831:",(0,Re.jsx)("br",{}),"\u2022 Layers\u914D\u5217: ",JSON.stringify(e)]})]}):(0,Re.jsxs)("div",{className:"p-2 border-b border-modifier-border",children:[(0,Re.jsx)("div",{className:"text-text-normal text-sm mb-2 pb-1 border-b border-modifier-border",children:te("LAYERS")}),e[t]&&(0,Re.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Re.jsx)("button",{className:"p-2 w-8 h-8 bg-primary border border-modifier-border text-text-normal rounded cursor-pointer hover:bg-modifier-hover flex items-center justify-center",onClick:u,title:te("NEW_LAYER"),dangerouslySetInnerHTML:{__html:mc.add}}),(0,Re.jsx)("button",{className:"p-2 w-8 h-8 bg-primary border border-modifier-border text-text-normal rounded cursor-pointer hover:bg-modifier-hover flex items-center justify-center",onClick:s,title:te("FILE_SELECT"),dangerouslySetInnerHTML:{__html:lS.fileSelect}}),(0,Re.jsx)("input",{ref:n,type:"file",accept:"image/*",className:"hidden",onChange:l}),(0,Re.jsx)("button",{className:"p-2 w-8 h-8 bg-primary border border-modifier-border text-text-normal rounded cursor-pointer hover:bg-modifier-hover flex items-center justify-center",onClick:c,title:te("DELETE_LAYER"),dangerouslySetInnerHTML:{__html:mc.delete}}),(0,Re.jsx)("input",{type:"range",min:"0",max:"100",value:Math.sqrt((((h=e[t])==null?void 0:h.opacity)!==void 0?(w=e[t])==null?void 0:w.opacity:1)*100)*10,onChange:T=>{let L=parseInt(T.target.value,10),A=Math.round((L/10)**2);m(A)},className:"flex-1 h-1 bg-modifier-border rounded outline-none"}),(0,Re.jsx)("select",{value:((I=e[t])==null?void 0:I.blendMode)||"normal",onChange:T=>f(T.target.value),className:"p-1 border border-modifier-border rounded bg-primary text-xs",children:[{key:"normal",label:te("BLEND_MODE_NORMAL")},{key:"multiply",label:te("BLEND_MODE_MULTIPLY")},{key:"screen",label:te("BLEND_MODE_SCREEN")},{key:"overlay",label:te("BLEND_MODE_OVERLAY")},{key:"darken",label:te("BLEND_MODE_DARKEN")},{key:"lighten",label:te("BLEND_MODE_LIGHTEN")},{key:"color-dodge",label:te("BLEND_MODE_COLOR_DODGE")},{key:"color-burn",label:te("BLEND_MODE_COLOR_BURN")},{key:"hard-light",label:te("BLEND_MODE_HARD_LIGHT")},{key:"soft-light",label:te("BLEND_MODE_SOFT_LIGHT")},{key:"difference",label:te("BLEND_MODE_DIFFERENCE")},{key:"exclusion",label:te("BLEND_MODE_EXCLUSION")}].map(T=>(0,Re.jsx)("option",{value:T.key,children:T.label},T.key))})]}),(0,Re.jsx)("div",{className:"space-y-1",children:e.slice().reverse().map((T,L)=>{let A=e.length-1-L;return(0,Re.jsxs)("div",{className:`p-2 bg-primary rounded cursor-pointer flex items-center gap-2 relative select-none hover:bg-modifier-hover ${A===t?"ring-2 ring-accent":""}`,onClick:()=>p(A),children:[(0,Re.jsx)("div",{className:`w-4 h-4 border border-modifier-border rounded relative cursor-pointer ${T.visible?"bg-accent":"bg-transparent"}`,onClick:O=>{O.stopPropagation(),d(A)}}),(0,Re.jsx)("div",{className:`w-4 h-4 border border-modifier-border rounded relative cursor-pointer ${T.clippingMask?"bg-accent":"bg-transparent"}`,onClick:O=>{O.stopPropagation(),g(A)},title:te("CLIPPING_MASK"),children:(0,Re.jsx)("span",{className:"absolute inset-0 flex items-center justify-center",dangerouslySetInnerHTML:{__html:mc.clip}})}),(0,Re.jsxs)("div",{className:"flex-1",children:[r===A?(0,Re.jsx)("input",{type:"text",value:o,onChange:O=>a(O.target.value),onBlur:v,onKeyDown:O=>{O.key==="Enter"?v():O.key==="Escape"&&S()},className:"text-text-normal text-sm w-full bg-primary border border-modifier-border rounded px-1",autoFocus:!0}):(0,Re.jsx)("div",{className:"text-text-normal text-sm cursor-pointer",onDoubleClick:()=>y(A),children:T.name}),(0,Re.jsxs)("div",{className:"text-text-muted text-xs mt-1 flex gap-2",children:[(0,Re.jsxs)("span",{children:["\u4E0D\u900F\u660E\u5EA6: ",Math.round((T.opacity||1)*100),"%"]}),(0,Re.jsx)("span",{children:T.blendMode==="normal"?"\u901A\u5E38":T.blendMode==="multiply"?"\u4E57\u7B97":T.blendMode==="screen"?"\u30B9\u30AF\u30EA\u30FC\u30F3":T.blendMode==="overlay"?"\u30AA\u30FC\u30D0\u30FC\u30EC\u30A4":T.blendMode==="darken"?"\u6BD4\u8F03(\u6697)":T.blendMode==="lighten"?"\u6BD4\u8F03(\u660E)":T.blendMode==="color-dodge"?"\u8986\u3044\u713C\u304D":T.blendMode==="color-burn"?"\u713C\u304D\u8FBC\u307F":T.blendMode==="hard-light"?"\u30CF\u30FC\u30C9\u30E9\u30A4\u30C8":T.blendMode==="soft-light"?"\u30BD\u30D5\u30C8\u30E9\u30A4\u30C8":T.blendMode==="difference"?"\u5DEE\u306E\u7D76\u5BFE\u5024":T.blendMode==="exclusion"?"\u9664\u5916":T.blendMode||"\u901A\u5E38"})]})]})]},A)})})]})}var na=ae(ft(),1);var be=ae(ke(),1);function lh({app:e}){let[t,n]=(0,na.useState)(""),[r,i]=(0,na.useState)(!1),[o,a]=(0,na.useState)("generation"),l=(0,na.useRef)(null),{attachments:s,addAttachment:u,removeAttachment:c,toggleAttachment:p,clearAttachments:d}=sc();return(0,be.jsxs)("div",{className:"flex flex-col w-full border-t border-modifier-border bg-primary",children:[(0,be.jsxs)("div",{className:"flex border-b border-modifier-border",role:"tablist",children:[(0,be.jsx)("div",{role:"tab",tabIndex:0,"aria-selected":o==="generation",className:`flex-1 p-2 text-sm font-medium rounded-t border-t border-l border-r transition-colors relative cursor-pointer ${o==="generation"?"text-text-normal bg-primary border-modifier-border -mb-px z-10":"text-text-muted bg-secondary border-transparent hover:text-text-normal hover:bg-modifier-hover"}`,onClick:()=>a("generation"),onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),a("generation"))},children:"AI\u753B\u50CF\u751F\u6210"}),(0,be.jsx)("div",{role:"tab",tabIndex:0,"aria-selected":o==="streaming",className:`flex-1 p-2 text-sm font-medium rounded-t border-t border-l border-r transition-colors relative cursor-pointer ${o==="streaming"?"text-text-normal bg-primary border-modifier-border -mb-px z-10":"text-text-muted bg-secondary border-transparent hover:text-text-normal hover:bg-modifier-hover"}`,onClick:()=>a("streaming"),onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),a("streaming"))},children:"\u30B9\u30C8\u30EA\u30FC\u30DF\u30F3\u30B0\u751F\u6210"})]}),r&&(0,be.jsx)("div",{className:"text-xs text-text-faint text-center p-2",children:"\u753B\u50CF\u751F\u6210\u4E2D..."}),(0,be.jsxs)("form",{onSubmit:async v=>{if(v.preventDefault(),!t.trim())return;let S=t.trim();n(""),d(),i(!0);try{await Ie.executeTool(wt.GENERATE_IMAGE,{prompt:S,app:e,attachments:s})}catch(m){let f=m instanceof Error?m.message:"\u753B\u50CF\u751F\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F";console.error("\u274C \u753B\u50CF\u751F\u6210\u30A8\u30E9\u30FC:",f)}finally{i(!1)}},className:"flex flex-col p-2 border-t border-modifier-border w-full gap-2 relative",children:[(0,be.jsx)("input",{ref:l,type:"file",accept:"image/*",className:"hidden",onChange:v=>{var h;let S=(h=v.target.files)==null?void 0:h[0];if(!S)return;let m=URL.createObjectURL(S),f=new FileReader;f.onload=()=>{let w=f.result;u({url:m,data:w,type:"reference",enabled:!0})},f.readAsDataURL(S),v.target.value=""}}),o==="streaming"&&(0,be.jsx)("div",{className:"mb-3",children:(0,be.jsxs)("div",{className:"w-full h-48 border-2 border-dashed border-modifier-border rounded-lg flex items-center justify-center bg-secondary relative overflow-hidden",children:[r?(0,be.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,be.jsx)("div",{className:"w-8 h-8 border-2 border-accent border-t-transparent rounded-full animate-spin"}),(0,be.jsx)("span",{className:"text-xs text-text-muted",children:"\u30EA\u30A2\u30EB\u30BF\u30A4\u30E0\u751F\u6210\u4E2D..."})]}):(0,be.jsxs)("div",{className:"flex flex-col items-center gap-2 text-text-muted",children:[(0,be.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"opacity-50",children:[(0,be.jsx)("path",{d:"M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 19 20.1046 19 19V5C19 3.89543 20.1046 3 19 3Z",stroke:"currentColor",strokeWidth:"2"}),(0,be.jsx)("path",{d:"M8.5 14L12 10.5L15.5 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,be.jsx)("span",{className:"text-sm",children:"\u30B9\u30C8\u30EA\u30FC\u30DF\u30F3\u30B0\u751F\u6210\u30D7\u30EC\u30D3\u30E5\u30FC"}),(0,be.jsx)("span",{className:"text-xs opacity-70",children:"\u30D7\u30ED\u30F3\u30D7\u30C8\u5165\u529B\u5F8C\u306B\u30EA\u30A2\u30EB\u30BF\u30A4\u30E0\u751F\u6210\u304C\u958B\u59CB\u3055\u308C\u307E\u3059"})]}),(0,be.jsx)("div",{className:"absolute inset-0 bg-transparent pointer-events-none"})]})}),(0,be.jsxs)("div",{className:"flex gap-2",children:[s.map((v,S)=>{let m=v.type==="image"?"border-blue-500":v.type==="mask"?"border-red-500":v.type==="reference"?"border-green-500":"border-gray-500";return(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("img",{src:v.url,alt:`${v.type} attachment`,className:`w-12 h-12 object-cover rounded border-2 ${m} ${v.enabled===!1?"opacity-50":""}`}),(0,be.jsxs)("div",{className:"absolute -top-1 -right-1",children:[v.type==="image"&&(0,be.jsx)("button",{type:"button",className:"bg-secondary rounded-full p-1 text-xs",onClick:()=>p(S),title:v.enabled===!1?"\u6709\u52B9\u306B\u3059\u308B":"\u7121\u52B9\u306B\u3059\u308B",children:v.enabled===!1?"\u{1F6AB}":"\u{1F441}"}),(v.type==="reference"||v.type==="mask")&&(0,be.jsx)("button",{type:"button",className:"bg-secondary rounded-full p-1",onClick:()=>c(S),dangerouslySetInnerHTML:{__html:aS.delete}})]})]},S)}),(0,be.jsx)("button",{type:"button",className:"w-12 h-12 border-2 border-dashed border-modifier-border rounded flex items-center justify-center text-text-muted hover:border-accent hover:text-accent transition-colors cursor-pointer bg-transparent",onClick:()=>{var v;return(v=l.current)==null?void 0:v.click()},title:"\u30EA\u30D5\u30A1\u30EC\u30F3\u30B9\u753B\u50CF\u3092\u8FFD\u52A0",children:(0,be.jsx)("span",{className:"text-lg",children:"+"})})]}),(0,be.jsx)("div",{className:"flex gap-2",children:(0,be.jsx)("input",{type:"text",value:t,onChange:v=>n(v.target.value),placeholder:"\u30D7\u30ED\u30F3\u30D7\u30C8\u3092\u5165\u529B",className:"flex-1 p-1 border border-modifier-border rounded bg-primary text-text-normal",disabled:r})}),(0,be.jsx)("div",{className:"flex",children:(0,be.jsx)("button",{type:"submit",className:"flex-1 p-2 bg-accent text-on-accent rounded cursor-pointer hover:bg-accent-hover disabled:opacity-50",disabled:r||!t.trim(),children:o==="generation"?"\u751F\u6210":"\u78BA\u5B9A"})})]})]})}var ra=ae(ke(),1);function sh({view:e,app:t}){let n=se(i=>i.currentPsdFile),r=se(i=>i.layers);return(0,pS.useEffect)(()=>{if(!t)return;if(!n){se.getState().clearLayers(),De.getState().setCurrentLayerIndex(0);return}(async()=>{try{let o=await Ie.executeTool("load_painter_file",{app:t,file:n}),a=JSON.parse(o),l=await Promise.all(a.layers.map(async s=>{let u;if(s.canvasDataUrl){u=document.createElement("canvas"),u.width=s.width,u.height=s.height;let c=u.getContext("2d");c&&await new Promise(p=>{let d=new Image;d.onload=()=>{c.drawImage(d,0,0),p()},d.onerror=()=>{console.error("\u753B\u50CF\u306E\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F"),p()},d.src=s.canvasDataUrl})}else s.canvas?u=s.canvas:(u=document.createElement("canvas"),u.width=s.width,u.height=s.height);return{name:s.name,visible:s.visible,opacity:s.opacity,blendMode:s.blendMode,clippingMask:s.clippingMask,canvas:u}}));se.getState().initializeLayers(l),De.getState().setCurrentLayerIndex(0)}catch(o){console.error("\u274C PSD\u30D5\u30A1\u30A4\u30EB\u306E\u8AAD\u307F\u8FBC\u307F\u306B\u5931\u6557\u3057\u307E\u3057\u305F:",o)}})()},[n,t]),(0,ra.jsxs)("div",{className:"w-full h-full flex flex-col bg-primary border-l border-modifier-border",children:[r&&r.length>0&&(0,ra.jsx)(ah,{}),(0,ra.jsx)("div",{className:"flex-1"}),(0,ra.jsx)(lh,{app:t||{}})]})}var bc=class{createRightSidebarView(t){let n=new Ec(t,()=>this.renderReactComponent(n));return n}renderReactComponent(t){t.containerEl.empty(),t.reactRoot=(0,hS.createRoot)(t.containerEl),t.reactRoot.render(mS.default.createElement(sh,{view:t,app:t.app}))}};var Cc=class{constructor(t){this.plugin=t,this.factory=new bc}initialize(){this.plugin.registerView(ta,t=>this.factory.createRightSidebarView(t)),this.plugin.app.workspace.onLayoutReady(()=>{this.activateRightSidebar()}),this.plugin.register(()=>{this.plugin.app.workspace.detachLeavesOfType(ta)})}async activateRightSidebar(){let{workspace:t}=this.plugin.app,n=t.getLeavesOfType(ta)[0];if(!n){let r=t.getRightLeaf(!1);r&&(n=r,await n.setViewState({type:ta,active:!0}))}n&&t.revealLeaf(n)}};var Ic=class extends gS.Plugin{async onload(){qv(this.app),await Ie.ready,Ie.getRegisteredToolNames().length===0&&console.warn("\u767B\u9332\u6E08\u307F\u30C4\u30FC\u30EB\u304C\u3042\u308A\u307E\u305B\u3093"),this.painterPlugin=new yc(this),this.rightSidebarPlugin=new Cc(this),this.settingsPlugin=new _c(this),this.painterPlugin.initialize(),this.rightSidebarPlugin.initialize(),await this.settingsPlugin.initialize()}onunload(){}};
/*! Bundled license information:

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
